(function(I,M){'object'==typeof exports&&'object'==typeof module?module.exports=M(require('xmldom'),function(){try{return require('JSZip')}catch(W){}}()):'function'==typeof define&&define.amd?define(['xmldom','JSZip'],M):'object'==typeof exports?exports.ePub=M(require('xmldom'),function(){try{return require('JSZip')}catch(W){}}()):I.ePub=M(I.xmldom,I.JSZip)})(this,function(N,I){return function(M){function U(H){if(W[H])return W[H].exports;var Y=W[H]={i:H,l:!1,exports:{}};return M[H].call(Y.exports,Y,Y.exports,U),Y.l=!0,Y.exports}var W={};return U.m=M,U.c=W,U.i=function(H){return H},U.d=function(H,Y,G){U.o(H,Y)||Object.defineProperty(H,Y,{configurable:!1,enumerable:!0,get:G})},U.n=function(H){var Y=H&&H.__esModule?function(){return H['default']}:function(){return H};return U.d(Y,'a',Y),Y},U.o=function(H,Y){return Object.prototype.hasOwnProperty.call(H,Y)},U.p='/dist/',U(U.s=347)}([function(M,U,W){var H=W(2),Y=W(26),G=W(13),X=W(14),$=W(27),J='prototype',Z=function(Q,ee,te){var ne=Q&Z.F,ae=Q&Z.G,ie=Q&Z.S,oe=Q&Z.P,se=Q&Z.B,le=ae?H:ie?H[ee]||(H[ee]={}):(H[ee]||{})[J],de=ae?Y:Y[ee]||(Y[ee]={}),ue=de[J]||(de[J]={}),ce,pe,fe,he;for(ce in ae&&(te=ee),te)pe=!ne&&le&&void 0!==le[ce],fe=(pe?le:te)[ce],he=se&&pe?$(fe,H):oe&&'function'==typeof fe?$(Function.call,fe):fe,le&&X(le,ce,fe,Q&Z.U),de[ce]!=fe&&G(de,ce,he),oe&&ue[ce]!=fe&&(ue[ce]=fe)};H.core=Y,Z.F=1,Z.G=2,Z.S=4,Z.P=8,Z.B=16,Z.W=32,Z.U=64,Z.R=128,M.exports=Z},function(M,U,W){var H=W(4);M.exports=function(Y){if(!H(Y))throw TypeError(Y+' is not an object!');return Y}},function(M){var W=M.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=W)},function(M){M.exports=function(W){try{return!!W()}catch(H){return!0}}},function(M){M.exports=function(W){return'object'==typeof W?null!==W:'function'==typeof W}},function(M,U,W){var H=W(62)('wks'),Y=W(41),G=W(2).Symbol,X='function'==typeof G,$=M.exports=function(J){return H[J]||(H[J]=X&&G[J]||(X?G:Y)('Symbol.'+J))};$.store=H},function(M,U,W){M.exports=!W(3)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(M,U,W){var H=W(1),Y=W(106),G=W(24),X=Object.defineProperty;U.f=W(6)?Object.defineProperty:function(J,Z,Q){if(H(J),Z=G(Z,!0),H(Q),Y)try{return X(J,Z,Q)}catch(ee){}if('get'in Q||'set'in Q)throw TypeError('Accessors not supported!');return'value'in Q&&(J[Z]=Q.value),J}},function(M,U,W){'use strict';function H(ze,qe){if(!(ze instanceof qe))throw new TypeError('Cannot call a class as a function')}function G(){var ze=new Date().getTime(),qe='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(je){var Me=0|(ze+16*Math.random())%16;return ze=Math.floor(ze/16),('x'==je?Me:8|7&Me).toString(16)});return qe}function $(ze){return!isNaN(parseFloat(ze))&&isFinite(ze)}function ne(ze,qe,je,Me,Be){var Ue=Me||0,De=Be||qe.length,We=parseInt(Ue+(De-Ue)/2),He;return(je||(je=function(Ve,Ge){return Ve>Ge?1:Ve<Ge?-1:Ve==Ge?0:void 0}),0>=De-Ue)?We:(He=je(qe[We],ze),1==De-Ue?0<He?We:We+1:0===He?We:-1===He?ne(ze,qe,je,We,De):ne(ze,qe,je,Ue,We))}function ae(ze,qe,je,Me,Be){var Ue=Me||0,De=Be||qe.length,We=parseInt(Ue+(De-Ue)/2),He;return(je||(je=function(Ve,Ge){return Ve>Ge?1:Ve<Ge?-1:Ve==Ge?0:void 0}),0>=De-Ue)?-1:(He=je(qe[We],ze),1==De-Ue?0===He?We:-1:0===He?We:-1===He?ae(ze,qe,je,We,De):ae(ze,qe,je,Ue,We))}function de(ze,qe){for(var je=ze.parentNode,Me=je.childNodes,Ue=-1,De=0,Be;De<Me.length&&(Be=Me[De],Be.nodeType===qe&&Ue++,Be!=ze);De++);return Ue}function be(ze,qe){return'undefined'==typeof ze.querySelector?ze.getElementsByTagName(qe):ze.querySelectorAll(qe)}function _e(ze,qe,je){for(var Me=document.createTreeWalker(ze,je,null,!1),Be;Be=Me.nextNode();)qe(Be)}function we(ze,qe){if(qe(ze))return!0;if(ze=ze.firstChild,ze)do{var je=we(ze,qe);if(je)return!0;ze=ze.nextSibling}while(ze)}function Ce(ze){for(var qe=[ze];ze;ze=ze.parentNode)qe.unshift(ze);return qe}Object.defineProperty(U,'__esModule',{value:!0});var Re=function(){function ze(qe,je){for(var Me=0,Be;Me<je.length;Me++)Be=je[Me],Be.enumerable=Be.enumerable||!1,Be.configurable=!0,'value'in Be&&(Be.writable=!0),Object.defineProperty(qe,Be.key,Be)}return function(qe,je,Me){return je&&ze(qe.prototype,je),Me&&ze(qe,Me),qe}}();U.isElement=function(ze){return!!(ze&&1==ze.nodeType)},U.uuid=G,U.documentHeight=function(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)},U.isNumber=$,U.isFloat=function(ze){return $(ze)&&Math.floor(ze)!==ze},U.prefixed=function(ze){var qe=['-Webkit-','-moz-','-o-','-ms-'],je=ze[0].toUpperCase()+ze.slice(1),Me=qe.length;if('undefined'==typeof document||'undefined'!=typeof document.body.style[ze])return ze;for(var Be=0;Be<Me;Be++)if('undefined'!=typeof document.body.style[qe[Be]+je])return qe[Be]+je;return ze},U.defaults=function(ze){for(var qe=1,je=arguments.length,Me;qe<je;qe++)for(var Be in Me=arguments[qe],Me)void 0===ze[Be]&&(ze[Be]=Me[Be]);return ze},U.extend=function(ze){var qe=[].slice.call(arguments,1);return qe.forEach(function(je){je&&Object.getOwnPropertyNames(je).forEach(function(Me){Object.defineProperty(ze,Me,Object.getOwnPropertyDescriptor(je,Me))})}),ze},U.insert=function(ze,qe,je){var Me=ne(ze,qe,je);return qe.splice(Me,0,ze),Me},U.locationOf=ne,U.indexOfSorted=ae,U.bounds=function(ze){var qe=window.getComputedStyle(ze),Be=0,Ue=0;return['width','paddingRight','paddingLeft','marginRight','marginLeft','borderRightWidth','borderLeftWidth'].forEach(function(De){Be+=parseFloat(qe[De])||0}),['height','paddingTop','paddingBottom','marginTop','marginBottom','borderTopWidth','borderBottomWidth'].forEach(function(De){Ue+=parseFloat(qe[De])||0}),{height:Ue,width:Be}},U.borders=function(ze){var qe=window.getComputedStyle(ze),Be=0,Ue=0;return['paddingRight','paddingLeft','marginRight','marginLeft','borderRightWidth','borderLeftWidth'].forEach(function(De){Be+=parseFloat(qe[De])||0}),['paddingTop','paddingBottom','marginTop','marginBottom','borderTopWidth','borderBottomWidth'].forEach(function(De){Ue+=parseFloat(qe[De])||0}),{height:Ue,width:Be}},U.windowBounds=function(){var ze=window.innerWidth,qe=window.innerHeight;return{top:0,left:0,right:ze,bottom:qe,width:ze,height:qe}},U.cleanStringForXpath=function(ze){var qe=ze.match(/[^'"]+|['"]/g);return qe=qe.map(function(je){return'\''===je?'"\'"':'"'===je?'\'"\'':'\''+je+'\''}),'concat(\'\','+qe.join(',')+')'},U.indexOfNode=de,U.indexOfTextNode=function(ze){return de(ze,Ne)},U.indexOfElementNode=function(ze){return de(ze,Le)},U.isXml=function(ze){return-1<['xml','opf','ncx'].indexOf(ze)},U.createBlob=function(ze,qe){return new Blob([ze],{type:qe})},U.createBlobUrl=function(ze,qe){var je=window.URL||window.webkitURL||window.mozURL,Be=this.createBlob(ze,qe),Me;return Me=je.createObjectURL(Be),Me},U.createBase64Url=function(ze,qe){var je,Me;if('string'==typeof ze)return je=btoa(ze),Me='data:'+qe+';base64,'+je,Me},U.type=function(ze){return Object.prototype.toString.call(ze).slice(8,-1)},U.parse=function(ze,qe,je){var Me,Be;return Be='undefined'==typeof DOMParser||je?W(129).DOMParser:DOMParser,65279===ze.charCodeAt(0)&&(ze=ze.slice(1)),Me=new Be().parseFromString(ze,qe),Me},U.qs=function(ze,qe){var je;if(!ze)throw new Error('No Element Provided');return'undefined'==typeof ze.querySelector?(je=ze.getElementsByTagName(qe),je.length)?je[0]:void 0:ze.querySelector(qe)},U.qsa=be,U.qsp=function(ze,qe,je){var Me,Be;if('undefined'!=typeof ze.querySelector){for(var Ue in qe+='[',je)qe+=Ue+'=\''+je[Ue]+'\'';return qe+=']',ze.querySelector(qe)}return(Me=ze.getElementsByTagName(qe),Be=Array.prototype.slice.call(Me,0).filter(function(De){for(var We in je)if(De.getAttribute(We)===je[We])return!0;return!1}),Be)?Be[0]:void 0},U.sprint=function(ze,qe){var je=ze.ownerDocument||ze;'undefined'==typeof je.createTreeWalker?we(ze,function(Me){Me&&3===Me.nodeType&&qe(Me)},!0):_e(ze,qe,NodeFilter.SHOW_TEXT)},U.treeWalker=_e,U.walk=we,U.blob2base64=function(ze){return new Promise(function(qe){var Me=new FileReader;Me.readAsDataURL(ze),Me.onloadend=function(){qe(Me.result)}})},U.defer=function(){var ze=this;this.resolve=null,this.reject=null,this.id=G(),this.promise=new Promise(function(qe,je){ze.resolve=qe,ze.reject=je}),Object.freeze(this)},U.querySelectorByType=function(ze,qe,je){var Me;if('undefined'!=typeof ze.querySelector&&(Me=ze.querySelector(qe+'[*|type="'+je+'"]')),!Me||0===Me.length){Me=be(ze,qe);for(var Be=0;Be<Me.length;Be++)if(Me[Be].getAttributeNS('http://www.idpf.org/2007/ops','type')===je)return Me[Be]}else return Me},U.findChildren=function(ze){for(var qe=[],je=ze.childNodes,Me=0,Be;Me<je.length;Me++)Be=je[Me],1===Be.nodeType&&qe.push(Be);return qe},U.parents=Ce;var Oe=U.requestAnimationFrame='undefined'!=typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),Le=1,Ne=3,Fe=U.RangeObject=function(){function ze(){H(this,ze),this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}return Re(ze,[{key:'setStart',value:function(je,Me){this.startContainer=je,this.startOffset=Me,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}},{key:'setEnd',value:function(je,Me){this.endContainer=je,this.endOffset=Me,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}},{key:'collapse',value:function(je){this.collapsed=!0,je?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}},{key:'selectNode',value:function(je){var Me=je.parentNode,Be=Array.prototype.indexOf.call(Me.childNodes,je);this.setStart(Me,Be),this.setEnd(Me,Be+1)}},{key:'selectNodeContents',value:function(je){var Me=je.childNodes[je.childNodes-1],Be=3===je.nodeType?je.textContent.length:parent.childNodes.length;this.setStart(je,0),this.setEnd(je,Be)}},{key:'_commonAncestorContainer',value:function(je,Me){var Be=Ce(je||this.startContainer),Ue=Ce(Me||this.endContainer);if(Be[0]==Ue[0])for(var De=0;De<Be.length;De++)if(Be[De]!=Ue[De])return Be[De-1]}},{key:'_checkCollapsed',value:function(){this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset}},{key:'toString',value:function(){}}]),ze}()},function(M,U,W){var H=W(32),Y=Math.min;M.exports=function(G){return 0<G?Y(H(G),9007199254740991):0}},function(M,U,W){var H=W(20);M.exports=function(Y){return Object(H(Y))}},function(M){var W={}.hasOwnProperty;M.exports=function(H,Y){return W.call(H,Y)}},function(M){M.exports=function(W){if('function'!=typeof W)throw TypeError(W+' is not a function!');return W}},function(M,U,W){var H=W(7),Y=W(31);M.exports=W(6)?function(G,X,$){return H.f(G,X,Y(1,$))}:function(G,X,$){return G[X]=$,G}},function(M,U,W){var H=W(2),Y=W(13),G=W(11),X=W(41)('src'),$='toString',J=Function[$],Z=(''+J).split($);W(26).inspectSource=function(Q){return J.call(Q)},(M.exports=function(Q,ee,te,ne){var ae='function'==typeof te;ae&&(G(te,'name')||Y(te,'name',ee));Q[ee]===te||(ae&&(G(te,X)||Y(te,X,Q[ee]?''+Q[ee]:Z.join(ee+''))),Q===H?Q[ee]=te:ne?Q[ee]?Q[ee]=te:Y(Q,ee,te):(delete Q[ee],Y(Q,ee,te)))})(Function.prototype,$,function(){return'function'==typeof this&&this[X]||J.call(this)})},function(M,U,W){var H=W(0),Y=W(3),G=W(20),X=/"/g,$=function(J,Z,Q,ee){var te=G(J)+'',ne='<'+Z;return''!==Q&&(ne+=' '+Q+'="'+(ee+'').replace(X,'&quot;')+'"'),ne+'>'+te+'</'+Z+'>'};M.exports=function(J,Z){var Q={};Q[J]=Z($),H(H.P+H.F*Y(function(){var ee=''[J]('"');return ee!==ee.toLowerCase()||3<ee.split('"').length}),'String',Q)}},function(M,U,W){var H=W(49),Y=W(20);M.exports=function(G){return H(Y(G))}},function(M,U,W){var H=W(50),Y=W(31),G=W(16),X=W(24),$=W(11),J=W(106),Z=Object.getOwnPropertyDescriptor;U.f=W(6)?Z:function(ee,te){if(ee=G(ee),te=X(te,!0),J)try{return Z(ee,te)}catch(ne){}return $(ee,te)?Y(!H.f.call(ee,te),ee[te]):void 0}},function(M,U,W){var H=W(11),Y=W(10),G=W(81)('IE_PROTO'),X=Object.prototype;M.exports=Object.getPrototypeOf||function($){return $=Y($),H($,G)?$[G]:'function'==typeof $.constructor&&$ instanceof $.constructor?$.constructor.prototype:$ instanceof Object?X:null}},function(M){var W={}.toString;M.exports=function(H){return W.call(H).slice(8,-1)}},function(M){M.exports=function(W){if(W==void 0)throw TypeError('Can\'t call method on  '+W);return W}},function(M,U,W){var H=W(3);M.exports=function(Y,G){return!!Y&&H(function(){G?Y.call(null,function(){},1):Y.call(null)})}},function(M,U,W){var H=W(27),Y=W(49),G=W(10),X=W(9),$=W(151);M.exports=function(J,Z){var Q=1==J,ne=4==J,ae=6==J,oe=Z||$;return function(se,le,de){for(var ue=G(se),ce=Y(ue),pe=H(le,de,3),fe=X(ce.length),he=0,ge=Q?oe(se,fe):2==J?oe(se,0):void 0,ye,me;fe>he;he++)if((5==J||ae||he in ce)&&(ye=ce[he],me=pe(ye,he,ue),J))if(Q)ge[he]=me;else if(me)switch(J){case 3:return!0;case 5:return ye;case 6:return he;case 2:ge.push(ye);}else if(ne)return!1;return ae?-1:3==J||ne?ne:ge}}},function(M,U,W){var H=W(0),Y=W(26),G=W(3);M.exports=function(X,$){var J=(Y.Object||{})[X]||Object[X],Z={};Z[X]=$(J),H(H.S+H.F*G(function(){J(1)}),'Object',Z)}},function(M,U,W){var H=W(4);M.exports=function(Y,G){if(!H(Y))return Y;var X,$;if(G&&'function'==typeof(X=Y.toString)&&!H($=X.call(Y)))return $;if('function'==typeof(X=Y.valueOf)&&!H($=X.call(Y)))return $;if(!G&&'function'==typeof(X=Y.toString)&&!H($=X.call(Y)))return $;throw TypeError('Can\'t convert object to primitive value')}},function(M,U,W){'use strict';function H(ee,te){if(!(ee instanceof te))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&'function'==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?'symbol':typeof ee},G=function(){function ee(te,ne){for(var ae=0,ie;ae<ne.length;ae++)ie=ne[ae],ie.enumerable=ie.enumerable||!1,ie.configurable=!0,'value'in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}return function(te,ne,ae){return ne&&ee(te.prototype,ne),ae&&ee(te,ae),te}}(),X=W(8),$=1,J=3,Q=function(){function ee(te,ne,ae){H(this,ee);var ie;if(this.str='',this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof ee))return new ee(te,ne,ae);if('string'==typeof ne?this.base=this.parseComponent(ne):'object'===('undefined'==typeof ne?'undefined':Y(ne))&&ne.steps&&(this.base=ne),ie=this.checkType(te),'string'===ie)return this.str=te,(0,X.extend)(this,this.parse(te));if('range'===ie)return(0,X.extend)(this,this.fromRange(te,this.base,ae));if('node'===ie)return(0,X.extend)(this,this.fromNode(te,this.base,ae));if('EpubCFI'===ie&&te.path)return te;if(!te)return this;throw new TypeError('not a valid argument for EpubCFI')}return G(ee,[{key:'checkType',value:function(ne){return this.isCfiString(ne)?'string':'object'===('undefined'==typeof ne?'undefined':Y(ne))&&('Range'===(0,X.type)(ne)||'undefined'!=typeof ne.startContainer)?'range':'object'===('undefined'==typeof ne?'undefined':Y(ne))&&'undefined'!=typeof ne.nodeType?'node':'object'===('undefined'==typeof ne?'undefined':Y(ne))&&ne instanceof ee&&'EpubCFI'}},{key:'parse',value:function(ne){var ae={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},ie,oe,se;return'string'==typeof ne?(0===ne.indexOf('epubcfi(')&&')'===ne[ne.length-1]&&(ne=ne.slice(8,ne.length-1)),ie=this.getChapterComponent(ne),!ie)?{spinePos:-1}:(ae.base=this.parseComponent(ie),oe=this.getPathComponent(ne),ae.path=this.parseComponent(oe),se=this.getRange(ne),se&&(ae.range=!0,ae.start=this.parseComponent(se[0]),ae.end=this.parseComponent(se[1])),ae.spinePos=ae.base.steps[1].index,ae):{spinePos:-1}}},{key:'parseComponent',value:function(ne){var ae={steps:[],terminal:{offset:null,assertion:null}},ie=ne.split(':'),oe=ie[0].split('/'),se;return 1<ie.length&&(se=ie[1],ae.terminal=this.parseTerminal(se)),''===oe[0]&&oe.shift(),ae.steps=oe.map(function(le){return this.parseStep(le)}.bind(this)),ae}},{key:'parseStep',value:function(ne){var ae,ie,oe,se,le;if(se=ne.match(/\[(.*)\]/),se&&se[1]&&(le=se[1]),ie=parseInt(ne),!isNaN(ie))return 0==ie%2?(ae='element',oe=ie/2-1):(ae='text',oe=(ie-1)/2),{type:ae,index:oe,id:le||null}}},{key:'parseTerminal',value:function(ne){var oe=ne.match(/\[(.*)\]/),ae,ie;return oe&&oe[1]?(ae=parseInt(ne.split('[')[0])||null,ie=oe[1]):ae=parseInt(ne)||null,{offset:ae,assertion:ie}}},{key:'getChapterComponent',value:function(ne){var ae=ne.split('!');return ae[0]}},{key:'getPathComponent',value:function(ne){var ae=ne.split('!');if(ae[1]){var ie=ae[1].split(',');return ie[0]}}},{key:'getRange',value:function(ne){var ae=ne.split(',');return 3===ae.length&&[ae[1],ae[2]]}},{key:'getCharecterOffsetComponent',value:function(ne){var ae=ne.split(':');return ae[1]||''}},{key:'joinSteps',value:function(ne){return ne?ne.map(function(ae){var ie='';return'element'===ae.type&&(ie+=2*(ae.index+1)),'text'===ae.type&&(ie+=1+2*ae.index),ae.id&&(ie+='['+ae.id+']'),ie}).join('/'):''}},{key:'segmentString',value:function(ne){var te='/';return te+=this.joinSteps(ne.steps),ne.terminal&&null!=ne.terminal.offset&&(te+=':'+ne.terminal.offset),ne.terminal&&null!=ne.terminal.assertion&&(te+='['+ne.terminal.assertion+']'),te}},{key:'toString',value:function(){var ne='epubcfi(';return ne+=this.segmentString(this.base),ne+='!',ne+=this.segmentString(this.path),this.start&&(ne+=',',ne+=this.segmentString(this.start)),this.end&&(ne+=',',ne+=this.segmentString(this.end)),ne+=')',ne}},{key:'compare',value:function(ne,ae){var ie,oe,se,le;if('string'==typeof ne&&(ne=new ee(ne)),'string'==typeof ae&&(ae=new ee(ae)),ne.spinePos>ae.spinePos)return 1;if(ne.spinePos<ae.spinePos)return-1;ne.range?(ie=ne.path.steps.concat(ne.start.steps),se=ne.start.terminal):(ie=ne.path.steps,se=ne.path.terminal),ae.range?(oe=ae.path.steps.concat(ae.start.steps),le=ae.start.terminal):(oe=ae.path.steps,le=ae.path.terminal);for(var de=0;de<ie.length;de++){if(!ie[de])return-1;if(!oe[de])return 1;if(ie[de].index>oe[de].index)return 1;if(ie[de].index<oe[de].index)return-1}return ie.length<oe.length?1:se.offset>le.offset?1:se.offset<le.offset?-1:0}},{key:'step',value:function(ne){var ae=ne.nodeType===J?'text':'element';return{id:ne.id,tagName:ne.tagName,type:ae,index:this.position(ne)}}},{key:'filteredStep',value:function(ne,ae){var ie=this.filter(ne,ae),oe;if(ie)return oe=ie.nodeType===J?'text':'element',{id:ie.id,tagName:ie.tagName,type:oe,index:this.filteredPosition(ie,ae)}}},{key:'pathTo',value:function(ne,ae,ie){for(var oe={steps:[],terminal:{offset:null,assertion:null}},se=ne,le;se&&se.parentNode&&se.parentNode.nodeType!=9;)le=ie?this.filteredStep(se,ie):this.step(se),le&&oe.steps.unshift(le),se=se.parentNode;return null!=ae&&0<=ae&&(oe.terminal.offset=ae,'text'!=oe.steps[oe.steps.length-1].type&&oe.steps.push({type:'text',index:0})),oe}},{key:'equalStep',value:function(ne,ae){return ne&&ae&&ne.index===ae.index&&ne.id===ae.id&&ne.type===ae.type}},{key:'fromRange',value:function(ne,ae,ie){var oe={range:!1,base:{},path:{},start:null,end:null},se=ne.startContainer,le=ne.endContainer,de=ne.startOffset,ue=ne.endOffset,ce=!1;if(ie&&(ce=null!=se.ownerDocument.querySelector('.'+ie)),'string'==typeof ae?(oe.base=this.parseComponent(ae),oe.spinePos=oe.base.steps[1].index):'object'===('undefined'==typeof ae?'undefined':Y(ae))&&(oe.base=ae),ne.collapsed)ce&&(de=this.patchOffset(se,de,ie)),oe.path=this.pathTo(se,de,ie);else{oe.range=!0,ce&&(de=this.patchOffset(se,de,ie)),oe.start=this.pathTo(se,de,ie),ce&&(ue=this.patchOffset(le,ue,ie)),oe.end=this.pathTo(le,ue,ie),oe.path={steps:[],terminal:null};var pe=oe.start.steps.length,fe;for(fe=0;fe<pe&&this.equalStep(oe.start.steps[fe],oe.end.steps[fe]);fe++)fe===pe-1?oe.start.terminal===oe.end.terminal&&(oe.path.steps.push(oe.start.steps[fe]),oe.range=!1):oe.path.steps.push(oe.start.steps[fe]);oe.start.steps=oe.start.steps.slice(oe.path.steps.length),oe.end.steps=oe.end.steps.slice(oe.path.steps.length)}return oe}},{key:'fromNode',value:function(ne,ae,ie){var oe={range:!1,base:{},path:{},start:null,end:null};return'string'==typeof ae?(oe.base=this.parseComponent(ae),oe.spinePos=oe.base.steps[1].index):'object'===('undefined'==typeof ae?'undefined':Y(ae))&&(oe.base=ae),oe.path=this.pathTo(ne,null,ie),oe}},{key:'filter',value:function(ne,ae){var ue=!1,ie,oe,se,le,de;return ne.nodeType===J?(ue=!0,se=ne.parentNode,ie=ne.parentNode.classList.contains(ae)):(ue=!1,ie=ne.classList.contains(ae)),ie&&ue?(le=se.previousSibling,de=se.nextSibling,le&&le.nodeType===J?oe=le:de&&de.nodeType===J&&(oe=de),oe?oe:ne):ie&&!ue?!1:ne}},{key:'patchOffset',value:function(ne,ae,ie){if(ne.nodeType!=J)throw new Error('Anchor must be a text node');var oe=ne,se=ae;for(ne.parentNode.classList.contains(ie)&&(oe=ne.parentNode);oe.previousSibling;){if(oe.previousSibling.nodeType!==$)se+=oe.previousSibling.textContent.length;else if(oe.previousSibling.classList.contains(ie))se+=oe.previousSibling.textContent.length;else break;oe=oe.previousSibling}return se}},{key:'normalizedMap',value:function(ne,ae,ie){var oe={},se=-1,de=ne.length,le,ue,ce;for(le=0;le<de;le++)ue=ne[le].nodeType,ue===$&&ne[le].classList.contains(ie)&&(ue=J),0<le&&ue===J&&ce===J?oe[le]=se:ae===ue&&(++se,oe[le]=se),ce=ue;return oe}},{key:'position',value:function(ne){var ae,ie;return ne.nodeType===$?(ae=ne.parentNode.children,!ae&&(ae=(0,X.findChildren)(ne.parentNode)),ie=Array.prototype.indexOf.call(ae,ne)):(ae=this.textNodes(ne.parentNode),ie=ae.indexOf(ne)),ie}},{key:'filteredPosition',value:function(ne,ae){var ie,oe,se;return ne.nodeType===$?(ie=ne.parentNode.children,se=this.normalizedMap(ie,$,ae)):(ie=ne.parentNode.childNodes,ne.parentNode.classList.contains(ae)&&(ne=ne.parentNode,ie=ne.parentNode.childNodes),se=this.normalizedMap(ie,J,ae)),oe=Array.prototype.indexOf.call(ie,ne),se[oe]}},{key:'stepsToXpath',value:function(ne){var ae=['.','*'];return ne.forEach(function(ie){var oe=ie.index+1;ie.id?ae.push('*[position()='+oe+' and @id=\''+ie.id+'\']'):'text'===ie.type?ae.push('text()['+oe+']'):ae.push('*['+oe+']')}),ae.join('/')}},{key:'stepsToQuerySelector',value:function(ne){var ae=['html'];return ne.forEach(function(ie){var oe=ie.index+1;ie.id?ae.push('#'+ie.id):'text'===ie.type||ae.push('*:nth-child('+oe+')')}),ae.join('>')}},{key:'textNodes',value:function(ne,ae){return Array.prototype.slice.call(ne.childNodes).filter(function(ie){return ie.nodeType===J||ae&&ie.classList.contains(ae)})}},{key:'walkToNode',value:function(ne,ae,ie){var oe=ae||document,se=oe.documentElement,ue=ne.length,le,de,ce;for(ce=0;ce<ue&&(de=ne[ce],'element'===de.type?de.id?se=oe.getElementById(de.id):(le=se.children||(0,X.findChildren)(se),se=le[de.index]):'text'===de.type&&(se=this.textNodes(se,ie)[de.index]),!!se);ce++);return se}},{key:'findNode',value:function(ne,ae,ie){var oe=ae||document,se,le;return ie||'undefined'==typeof oe.evaluate?ie?se=this.walkToNode(ne,oe,ie):se=this.walkToNode(ne,oe):(le=this.stepsToXpath(ne),se=oe.evaluate(le,oe,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),se}},{key:'fixMiss',value:function(ne,ae,ie,oe){var se=this.findNode(ne.slice(0,-1),ie,oe),le=se.childNodes,de=this.normalizedMap(le,J,oe),pe=ne[ne.length-1].index,ue,ce;for(var fe in de){if(!de.hasOwnProperty(fe))return;if(de[fe]===pe)if(ue=le[fe],ce=ue.textContent.length,ae>ce)ae-=ce;else{se=ue.nodeType===$?ue.childNodes[0]:ue;break}}return{container:se,offset:ae}}},{key:'toRange',value:function(ne,ae){var ie=ne||document,ce=this,he=!!ae&&null!=ie.querySelector('.'+ae),oe,se,le,de,ue,pe,fe,ge;if(oe='undefined'==typeof ie.createRange?new X.RangeObject:ie.createRange(),ce.range?(se=ce.start,pe=ce.path.steps.concat(se.steps),de=this.findNode(pe,ie,he?ae:null),le=ce.end,fe=ce.path.steps.concat(le.steps),ue=this.findNode(fe,ie,he?ae:null)):(se=ce.path,pe=ce.path.steps,de=this.findNode(ce.path.steps,ie,he?ae:null)),de)try{null==se.terminal.offset?oe.setStart(de,0):oe.setStart(de,se.terminal.offset)}catch(ye){ge=this.fixMiss(pe,se.terminal.offset,ie,he?ae:null),oe.setStart(ge.container,ge.offset)}else return console.log('NO START'),null;if(ue)try{null==le.terminal.offset?oe.setEnd(ue,0):oe.setEnd(ue,le.terminal.offset)}catch(ye){ge=this.fixMiss(fe,ce.end.terminal.offset,ie,he?ae:null),oe.setEnd(ge.container,ge.offset)}return oe}},{key:'isCfiString',value:function(ne){return'string'==typeof ne&&0===ne.indexOf('epubcfi(')&&')'===ne[ne.length-1]}},{key:'generateChapterComponent',value:function(ne,ae,ie){var oe=parseInt(ae),le='/'+2*(ne+1)+'/';return le+=2*(oe+1),ie&&(le+='['+ie+']'),le}}]),ee}();U.default=Q,M.exports=U['default']},function(M){var W=M.exports={version:'2.4.0'};'number'==typeof __e&&(__e=W)},function(M,U,W){var H=W(12);M.exports=function(Y,G,X){return(H(Y),void 0===G)?Y:1===X?function($){return Y.call(G,$)}:2===X?function($,J){return Y.call(G,$,J)}:3===X?function($,J,Z){return Y.call(G,$,J,Z)}:function(){return Y.apply(G,arguments)}}},function(M,U,W){var H=W(122),Y=W(0),G=W(62)('metadata'),X=G.store||(G.store=new(W(125))),$=function(ae,ie,oe){var se=X.get(ae);if(!se){if(!oe)return;X.set(ae,se=new H)}var le=se.get(ie);if(!le){if(!oe)return;se.set(ie,le=new H)}return le};M.exports={store:X,map:$,has:function(ae,ie,oe){var se=$(ie,oe,!1);return se!==void 0&&se.has(ae)},get:function(ae,ie,oe){var se=$(ie,oe,!1);return se===void 0?void 0:se.get(ae)},set:function(ae,ie,oe,se){$(oe,se,!0).set(ae,ie)},keys:function(ae,ie){var oe=$(ae,ie,!1),se=[];return oe&&oe.forEach(function(le,de){se.push(de)}),se},key:function(ae){return ae===void 0||'symbol'==typeof ae?ae:ae+''},exp:function(ae){Y(Y.S,'Reflect',ae)}}},function(M,U,W){'use strict';if(W(6)){var H=W(34),Y=W(2),G=W(3),X=W(0),$=W(63),J=W(88),Z=W(27),Q=W(33),ee=W(31),te=W(13),ne=W(38),ae=W(32),ie=W(9),oe=W(40),se=W(24),le=W(11),de=W(119),ue=W(48),ce=W(4),pe=W(10),fe=W(73),he=W(35),ge=W(18),ye=W(36).f,me=W(90),ve=W(41),be=W(5),xe=W(22),ke=W(53),_e=W(82),we=W(91),Se=W(45),Ee=W(59),Pe=W(39),Te=W(66),Ce=W(99),Re=W(7),Oe=W(17),Le=Re.f,Ne=Oe.f,Ae=Y.RangeError,Ie=Y.TypeError,Fe=Y.Uint8Array,ze='ArrayBuffer',qe='Shared'+ze,je='BYTES_PER_ELEMENT',Me='prototype',Be=Array[Me],Ue=J.ArrayBuffer,De=J.DataView,We=xe(0),He=xe(2),Ye=xe(3),Ve=xe(4),Ge=xe(5),Xe=xe(6),Ke=ke(!0),$e=ke(!1),Je=we.values,Ze=we.keys,Qe=we.entries,et=Be.lastIndexOf,tt=Be.reduce,nt=Be.reduceRight,ot=Be.join,st=Be.sort,dt=Be.slice,ut=Be.toString,ct=Be.toLocaleString,pt=be('iterator'),ft=be('toStringTag'),ht=ve('typed_constructor'),yt=ve('def_constructor'),mt=$.CONSTR,vt=$.TYPED,bt=$.VIEW,xt='Wrong length!',kt=xe(1,function(Wt,Ht){return Tt(_e(Wt,Wt[yt]),Ht)}),_t=G(function(){return 1===new Fe(new Uint16Array([1]).buffer)[0]}),wt=!!Fe&&!!Fe[Me].set&&G(function(){new Fe(1).set({})}),St=function(Wt,Ht){if(Wt===void 0)throw Ie(xt);var Vt=ie(Wt);if(Ht&&!de(+Wt,Vt))throw Ae(xt);return Vt},Et=function(Wt,Ht){var Yt=ae(Wt);if(0>Yt||Yt%Ht)throw Ae('Wrong offset!');return Yt},Pt=function(Wt){if(ce(Wt)&&vt in Wt)return Wt;throw Ie(Wt+' is not a typed array!')},Tt=function(Wt,Ht){if(!(ce(Wt)&&ht in Wt))throw Ie('It is not a typed array constructor!');return new Wt(Ht)},Ct=function(Wt,Ht){return Rt(_e(Wt,Wt[yt]),Ht)},Rt=function(Wt,Ht){for(var Yt=0,Vt=Ht.length,Gt=Tt(Wt,Vt);Vt>Yt;)Gt[Yt]=Ht[Yt++];return Gt},Ot=function(Wt,Ht,Yt){Le(Wt,Ht,{get:function(){return this._d[Yt]}})},Lt=function(Ht){var Yt=pe(Ht),Vt=arguments.length,Gt=1<Vt?arguments[1]:void 0,Xt=Gt!==void 0,Kt=me(Yt),$t,Jt,Zt,Qt,en,tn;if(Kt!=void 0&&!fe(Kt)){for(tn=Kt.call(Yt),Zt=[],$t=0;!(en=tn.next()).done;$t++)Zt.push(en.value);Yt=Zt}for(Xt&&2<Vt&&(Gt=Z(Gt,arguments[2],2)),$t=0,Jt=ie(Yt.length),Qt=Tt(this,Jt);Jt>$t;$t++)Qt[$t]=Xt?Gt(Yt[$t],$t):Yt[$t];return Qt},Nt=function(){for(var Ht=0,Yt=arguments.length,Vt=Tt(this,Yt);Yt>Ht;)Vt[Ht]=arguments[Ht++];return Vt},At=!!Fe&&G(function(){ct.call(new Fe(1))}),It=function(){return ct.apply(At?dt.call(Pt(this)):Pt(this),arguments)},Ft={copyWithin:function(Ht,Yt){return Ce.call(Pt(this),Ht,Yt,2<arguments.length?arguments[2]:void 0)},every:function(Ht){return Ve(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},fill:function(){return Te.apply(Pt(this),arguments)},filter:function(Ht){return Ct(this,He(Pt(this),Ht,1<arguments.length?arguments[1]:void 0))},find:function(Ht){return Ge(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},findIndex:function(Ht){return Xe(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},forEach:function(Ht){We(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},indexOf:function(Ht){return $e(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},includes:function(Ht){return Ke(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},join:function(){return ot.apply(Pt(this),arguments)},lastIndexOf:function(){return et.apply(Pt(this),arguments)},map:function(Ht){return kt(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},reduce:function(){return tt.apply(Pt(this),arguments)},reduceRight:function(){return nt.apply(Pt(this),arguments)},reverse:function(){for(var Ht=this,Yt=Pt(Ht).length,Vt=Math.floor(Yt/2),Gt=0,Xt;Gt<Vt;)Xt=Ht[Gt],Ht[Gt++]=Ht[--Yt],Ht[Yt]=Xt;return Ht},some:function(Ht){return Ye(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},sort:function(Ht){return st.call(Pt(this),Ht)},subarray:function(Ht,Yt){var Vt=Pt(this),Gt=Vt.length,Xt=oe(Ht,Gt);return new(_e(Vt,Vt[yt]))(Vt.buffer,Vt.byteOffset+Xt*Vt.BYTES_PER_ELEMENT,ie((Yt===void 0?Gt:oe(Yt,Gt))-Xt))}},zt=function(Ht,Yt){return Ct(this,dt.call(Pt(this),Ht,Yt))},qt=function(Ht){Pt(this);var Yt=Et(arguments[1],1),Vt=this.length,Gt=pe(Ht),Xt=ie(Gt.length),Kt=0;if(Xt+Yt>Vt)throw Ae(xt);for(;Kt<Xt;)this[Yt+Kt]=Gt[Kt++]},jt={entries:function(){return Qe.call(Pt(this))},keys:function(){return Ze.call(Pt(this))},values:function(){return Je.call(Pt(this))}},Mt=function(Wt,Ht){return ce(Wt)&&Wt[vt]&&'symbol'!=typeof Ht&&Ht in Wt&&+Ht+''==Ht+''},Bt=function(Ht,Yt){return Mt(Ht,Yt=se(Yt,!0))?ee(2,Ht[Yt]):Ne(Ht,Yt)},Ut=function(Ht,Yt,Vt){return Mt(Ht,Yt=se(Yt,!0))&&ce(Vt)&&le(Vt,'value')&&!le(Vt,'get')&&!le(Vt,'set')&&!Vt.configurable&&(!le(Vt,'writable')||Vt.writable)&&(!le(Vt,'enumerable')||Vt.enumerable)?(Ht[Yt]=Vt.value,Ht):Le(Ht,Yt,Vt)};mt||(Oe.f=Bt,Re.f=Ut),X(X.S+X.F*!mt,'Object',{getOwnPropertyDescriptor:Bt,defineProperty:Ut}),G(function(){ut.call({})})&&(ut=ct=function(){return ot.call(this)});var Dt=ne({},Ft);ne(Dt,jt),te(Dt,pt,jt.values),ne(Dt,{slice:zt,set:qt,constructor:function(){},toString:ut,toLocaleString:It}),Ot(Dt,'buffer','b'),Ot(Dt,'byteOffset','o'),Ot(Dt,'byteLength','l'),Ot(Dt,'length','e'),Le(Dt,ft,{get:function(){return this[vt]}}),M.exports=function(Wt,Ht,Yt,Vt){Vt=!!Vt;var Gt=Wt+(Vt?'Clamped':'')+'Array',Jt=Y[Gt],Zt=Jt||{},Qt=Jt&&ge(Jt),en=!Jt||!$.ABV,tn={},nn=Jt&&Jt[Me],an=function(pn,hn){var gn=pn._d;return gn.v['get'+Wt](hn*Ht+gn.o,_t)},rn=function(pn,hn,gn){var mn=pn._d;Vt&&(gn=0>(gn=Math.round(gn))?0:255<gn?255:255&gn),mn.v['set'+Wt](hn*Ht+mn.o,gn,_t)},sn=function(pn,hn){Le(pn,hn,{get:function(){return an(this,hn)},set:function(gn){return rn(this,hn,gn)},enumerable:!0})};en?(Jt=Yt(function(pn,hn,gn,mn){Q(pn,Jt,Gt,'_d');var vn=0,bn=0,kn,_n,wn,Sn;if(!ce(hn))wn=St(hn,!0),_n=wn*Ht,kn=new Ue(_n);else if(hn instanceof Ue||(Sn=ue(hn))==ze||Sn==qe){kn=hn,bn=Et(gn,Ht);var En=hn.byteLength;if(void 0===mn){if(En%Ht)throw Ae(xt);if(_n=En-bn,0>_n)throw Ae(xt)}else if(_n=ie(mn)*Ht,_n+bn>En)throw Ae(xt);wn=_n/Ht}else return vt in hn?Rt(Jt,hn):Lt.call(Jt,hn);for(te(pn,'_d',{b:kn,o:bn,l:_n,e:wn,v:new De(kn)});vn<wn;)sn(pn,vn++)}),nn=Jt[Me]=he(Dt),te(nn,'constructor',Jt)):!Ee(function(pn){new Jt(null),new Jt(pn)},!0)&&(Jt=Yt(function(pn,hn,gn,mn){Q(pn,Jt,Gt);var vn;return ce(hn)?hn instanceof Ue||(vn=ue(hn))==ze||vn==qe?void 0===mn?void 0===gn?new Zt(hn):new Zt(hn,Et(gn,Ht)):new Zt(hn,Et(gn,Ht),mn):vt in hn?Rt(Jt,hn):Lt.call(Jt,hn):new Zt(St(hn,'Uint8Array'!=Gt))}),We(Qt===Function.prototype?ye(Zt):ye(Zt).concat(ye(Qt)),function(pn){pn in Jt||te(Jt,pn,Zt[pn])}),Jt[Me]=nn,!H&&(nn.constructor=Jt));var ln=nn[pt],dn=!!ln&&('values'==ln.name||ln.name==void 0),cn=jt.values;te(Jt,ht,!0),te(nn,vt,Gt),te(nn,bt,!0),te(nn,yt,Jt),(Vt?new Jt(1)[ft]!=Gt:!(ft in nn))&&Le(nn,ft,{get:function(){return Gt}}),tn[Gt]=Jt,X(X.G+X.W+X.F*(Jt!=Zt),tn),X(X.S,Gt,{BYTES_PER_ELEMENT:Ht,from:Lt,of:Nt}),je in nn||te(nn,je,Ht),X(X.P,Gt,Ft),Pe(Gt),X(X.P+X.F*wt,Gt,{set:qt}),X(X.P+X.F*!dn,Gt,jt),X(X.P+X.F*(nn.toString!=ut),Gt,{toString:ut}),X(X.P+X.F*G(function(){new Jt(1).slice()}),Gt,{slice:zt}),X(X.P+X.F*(G(function(){return[1,2].toLocaleString()!=new Jt([1,2]).toLocaleString()})||!G(function(){nn.toLocaleString.call([1,2])})),Gt,{toLocaleString:It}),Se[Gt]=dn?ln:cn,H||dn||te(nn,pt,cn)}}else M.exports=function(){}},function(M,U,W){var H=W(41)('meta'),Y=W(4),G=W(11),X=W(7).f,$=0,J=Object.isExtensible||function(){return!0},Z=!W(3)(function(){return J(Object.preventExtensions({}))}),Q=function(ie){X(ie,H,{value:{i:'O'+ ++$,w:{}}})},ae=M.exports={KEY:H,NEED:!1,fastKey:function(ie,oe){if(!Y(ie))return'symbol'==typeof ie?ie:('string'==typeof ie?'S':'P')+ie;if(!G(ie,H)){if(!J(ie))return'F';if(!oe)return'E';Q(ie)}return ie[H].i},getWeak:function(ie,oe){if(!G(ie,H)){if(!J(ie))return!0;if(!oe)return!1;Q(ie)}return ie[H].w},onFreeze:function(ie){return Z&&ae.NEED&&J(ie)&&!G(ie,H)&&Q(ie),ie}}},function(M){M.exports=function(W,H){return{enumerable:!(1&W),configurable:!(2&W),writable:!(4&W),value:H}}},function(M){var W=Math.ceil,H=Math.floor;M.exports=function(Y){return isNaN(Y=+Y)?0:(0<Y?H:W)(Y)}},function(M){M.exports=function(W,H,Y,G){if(!(W instanceof H)||G!==void 0&&G in W)throw TypeError(Y+': incorrect invocation!');return W}},function(M){M.exports=!1},function(M,U,W){var H=W(1),Y=W(112),G=W(69),X=W(81)('IE_PROTO'),$=function(){},J='prototype',Z=function(){var Q=W(68)('iframe'),ee=G.length,te='<',ne='>',ae;for(Q.style.display='none',W(71).appendChild(Q),Q.src='javascript:',ae=Q.contentWindow.document,ae.open(),ae.write(te+'script'+ne+'document.F=Object'+te+'/script'+ne),ae.close(),Z=ae.F;ee--;)delete Z[J][G[ee]];return Z()};M.exports=Object.create||function(ee,te){var ne;return null===ee?ne=Z():($[J]=H(ee),ne=new $,$[J]=null,ne[X]=ee),void 0===te?ne:Y(ne,te)}},function(M,U,W){var H=W(114),Y=W(69).concat('length','prototype');U.f=Object.getOwnPropertyNames||function(X){return H(X,Y)}},function(M,U,W){var H=W(114),Y=W(69);M.exports=Object.keys||function(X){return H(X,Y)}},function(M,U,W){var H=W(14);M.exports=function(Y,G,X){for(var $ in G)H(Y,$,G[$],X);return Y}},function(M,U,W){'use strict';var H=W(2),Y=W(7),G=W(6),X=W(5)('species');M.exports=function($){var J=H[$];G&&J&&!J[X]&&Y.f(J,X,{configurable:!0,get:function(){return this}})}},function(M,U,W){var H=W(32),Y=Math.max,G=Math.min;M.exports=function(X,$){return X=H(X),0>X?Y(X+$,0):G(X,$)}},function(M){var W=0,H=Math.random();M.exports=function(Y){return'Symbol('.concat(Y===void 0?'':Y,')_',(++W+H).toString(36))}},function(M,U,W){'use strict';var H=W(148),Y=W(141),G=Function.prototype.apply,X=Function.prototype.call,$=Object.create,J=Object.defineProperty,Z=Object.defineProperties,Q=Object.prototype.hasOwnProperty,ee={configurable:!0,enumerable:!1,writable:!0},te,ne,ae,ie,oe,se,le;te=function(de,ue){var ce;return Y(ue),Q.call(this,'__ee__')?ce=this.__ee__:(ce=ee.value=$(null),J(this,'__ee__',ee),ee.value=null),ce[de]?'object'==typeof ce[de]?ce[de].push(ue):ce[de]=[ce[de],ue]:ce[de]=ue,this},ne=function(de,ue){var ce,pe;return Y(ue),pe=this,te.call(this,de,ce=function(){ae.call(pe,de,ce),G.call(ue,this,arguments)}),ce.__eeOnceListener__=ue,this},ae=function(de,ue){var ce,pe,fe,he;if(Y(ue),!Q.call(this,'__ee__'))return this;if(ce=this.__ee__,!ce[de])return this;if(pe=ce[de],'object'==typeof pe)for(he=0;fe=pe[he];++he)(fe===ue||fe.__eeOnceListener__===ue)&&(2===pe.length?ce[de]=pe[he?0:1]:pe.splice(he,1));else(pe===ue||pe.__eeOnceListener__===ue)&&delete ce[de];return this},ie=function(de){var ue,ce,pe,fe,he;if(Q.call(this,'__ee__')&&(fe=this.__ee__[de],!!fe))if('object'==typeof fe){for(ce=arguments.length,he=Array(ce-1),ue=1;ue<ce;++ue)he[ue-1]=arguments[ue];for(fe=fe.slice(),ue=0;pe=fe[ue];++ue)G.call(pe,this,he)}else switch(arguments.length){case 1:X.call(fe,this);break;case 2:X.call(fe,this,arguments[1]);break;case 3:X.call(fe,this,arguments[1],arguments[2]);break;default:for(ce=arguments.length,he=Array(ce-1),ue=1;ue<ce;++ue)he[ue-1]=arguments[ue];G.call(fe,this,he);}},oe={on:te,once:ne,off:ae,emit:ie},se={on:H(te),once:H(ne),off:H(ae),emit:H(ie)},le=Z({},se),M.exports=U=function(de){return null==de?$(le):Z(Object(de),se)},U.methods=oe},function(M,U,W){var H=W(5)('unscopables'),Y=Array.prototype;Y[H]==void 0&&W(13)(Y,H,{}),M.exports=function(G){Y[H][G]=!0}},function(M,U,W){var H=W(27),Y=W(108),G=W(73),X=W(1),$=W(9),J=W(90),Z={},Q={},U=M.exports=function(ee,te,ne,ae,ie){var oe=ie?function(){return ee}:J(ee),se=H(ne,ae,te?2:1),le=0,de,ue,ce,pe;if('function'!=typeof oe)throw TypeError(ee+' is not iterable!');if(G(oe)){for(de=$(ee.length);de>le;le++)if(pe=te?se(X(ue=ee[le])[0],ue[1]):se(ee[le]),pe===Z||pe===Q)return pe;}else for(ce=oe.call(ee);!(ue=ce.next()).done;)if(pe=Y(ce,se,ue.value,te),pe===Z||pe===Q)return pe};U.BREAK=Z,U.RETURN=Q},function(M){M.exports={}},function(M,U,W){var H=W(7).f,Y=W(11),G=W(5)('toStringTag');M.exports=function(X,$,J){X&&!Y(X=J?X:X.prototype,G)&&H(X,G,{configurable:!0,value:$})}},function(M,U,W){var H=W(0),Y=W(20),G=W(3),X=W(86),$='['+X+']',J='\u200B\x85',Z=RegExp('^'+$+$+'*'),Q=RegExp($+$+'*$'),ee=function(ne,ae,ie){var oe={},se=G(function(){return!!X[ne]()||J[ne]()!=J}),le=oe[ne]=se?ae(te):X[ne];ie&&(oe[ie]=le),H(H.P+H.F*se,'String',oe)},te=ee.trim=function(ne,ae){return ne=Y(ne)+'',1&ae&&(ne=ne.replace(Z,'')),2&ae&&(ne=ne.replace(Q,'')),ne};M.exports=ee},function(M,U,W){var H=W(19),Y=W(5)('toStringTag'),G='Arguments'==H(function(){return arguments}()),X=function($,J){try{return $[J]}catch(Z){}};M.exports=function($){var J,Z,Q;return $===void 0?'Undefined':null===$?'Null':'string'==typeof(Z=X(J=Object($),Y))?Z:G?H(J):'Object'==(Q=H(J))&&'function'==typeof J.callee?'Arguments':Q}},function(M,U,W){var H=W(19);M.exports=Object('z').propertyIsEnumerable(0)?Object:function(Y){return'String'==H(Y)?Y.split(''):Object(Y)}},function(M,U){U.f={}.propertyIsEnumerable},function(M,U,W){'use strict';function Y(Z,Q){if(!(Z instanceof Q))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function Z(Q,ee){for(var te=0,ne;te<ee.length;te++)ne=ee[te],ne.enumerable=ne.enumerable||!1,ne.configurable=!0,'value'in ne&&(ne.writable=!0),Object.defineProperty(Q,ne.key,ne)}return function(Q,ee,te){return ee&&Z(Q.prototype,ee),te&&Z(Q,te),Q}}(),X=W(52),$=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(X),J=function(){function Z(Q){Y(this,Z);var ee,te;ee=Q.indexOf('://'),-1<ee&&(Q=new URL(Q).pathname),te=this.parse(Q),this.path=Q,this.directory=this.isDirectory(Q)?Q:te.dir+'/',this.filename=te.base,this.extension=te.ext.slice(1)}return G(Z,[{key:'parse',value:function(ee){return $.default.parse(ee)}},{key:'isAbsolute',value:function(ee){return $.default.isAbsolute(ee||this.path)}},{key:'isDirectory',value:function(ee){return'/'===ee.charAt(ee.length-1)}},{key:'resolve',value:function(ee){return $.default.resolve(this.directory,ee)}},{key:'relative',value:function(ee){return $.default.relative(this.directory,ee)}},{key:'splitPath',value:function(ee){return this.splitPathRe.exec(ee).slice(1)}},{key:'toString',value:function(){return this.path}}]),Z}();U.default=J,M.exports=U['default']},function(M){'use strict';function H(J){if('string'!=typeof J)throw new TypeError('Path must be a string. Received '+J)}function Y(J,Z){for(var Q='',ee=-1,te=0,ae=0,ne;ae<=J.length;++ae){if(ae<J.length)ne=J.charCodeAt(ae);else if(47===ne)break;else ne=47;if(47===ne){if(ee==ae-1||1==te);else if(ee!=ae-1&&2==te){if(2>Q.length||46!==Q.charCodeAt(Q.length-1)||46!==Q.charCodeAt(Q.length-2))if(2<Q.length){for(var ie=Q.length-1,oe=ie;0<=oe&&47!==Q.charCodeAt(oe);--oe);if(oe!=ie){Q=-1==oe?'':Q.slice(0,oe),ee=ae,te=0;continue}}else if(2===Q.length||1===Q.length){Q='',ee=ae,te=0;continue}Z&&(0<Q.length?Q+='/..':Q='..')}else 0<Q.length?Q+='/'+J.slice(ee+1,ae):Q=J.slice(ee+1,ae);ee=ae,te=0}else 46===ne&&-1!=te?++te:te=-1}return Q}function G(J,Z){var Q=Z.dir||Z.root,ee=Z.base||(Z.name||'')+(Z.ext||'');return Q?Q===Z.root?Q+ee:Q+J+ee:ee}if(!X)var X={cwd:function(){return'/'}};var $={resolve:function(){for(var Z='',Q=!1,te=arguments.length-1,ee;-1<=te&&!Q;te--){var ne;(0<=te?ne=arguments[te]:(void 0==ee&&(ee=X.cwd()),ne=ee),H(ne),0!==ne.length)&&(Z=ne+'/'+Z,Q=47===ne.charCodeAt(0))}return Z=Y(Z,!Q),Q?0<Z.length?'/'+Z:'/':0<Z.length?Z:'.'},normalize:function(Z){if(H(Z),0===Z.length)return'.';var Q=47===Z.charCodeAt(0),ee=47===Z.charCodeAt(Z.length-1);return Z=Y(Z,!Q),0!==Z.length||Q||(Z='.'),0<Z.length&&ee&&(Z+='/'),Q?'/'+Z:Z},isAbsolute:function(Z){return H(Z),0<Z.length&&47===Z.charCodeAt(0)},join:function(){if(0===arguments.length)return'.';for(var Q=0,Z,ee;Q<arguments.length;++Q)ee=arguments[Q],H(ee),0<ee.length&&(void 0==Z?Z=ee:Z+='/'+ee);return void 0===Z?'.':$.normalize(Z)},relative:function(Z,Q){if(H(Z),H(Q),Z===Q)return'';if(Z=$.resolve(Z),Q=$.resolve(Q),Z===Q)return'';for(var ee=1;ee<Z.length&&47===Z.charCodeAt(ee);++ee);for(var te=Z.length,ne=te-ee,ae=1;ae<Q.length&&47===Q.charCodeAt(ae);++ae);for(var ie=Q.length,oe=ie-ae,se=ne<oe?ne:oe,le=-1,de=0;de<=se;++de){if(de==se){if(oe>se){if(47===Q.charCodeAt(ae+de))return Q.slice(ae+de+1);if(0==de)return Q.slice(ae+de)}else ne>se&&(47===Z.charCodeAt(ee+de)?le=de:0==de&&(le=0));break}var ue=Z.charCodeAt(ee+de),ce=Q.charCodeAt(ae+de);if(ue!==ce)break;else 47===ue&&(le=de)}var pe='';for(de=ee+le+1;de<=te;++de)(de===te||47===Z.charCodeAt(de))&&(pe+=0===pe.length?'..':'/..');return 0<pe.length?pe+Q.slice(ae+le):(ae+=le,47===Q.charCodeAt(ae)&&++ae,Q.slice(ae))},_makeLong:function(Z){return Z},dirname:function(Z){if(H(Z),0===Z.length)return'.';for(var Q=Z.charCodeAt(0),ee=47===Q,te=-1,ne=!0,ae=Z.length-1;1<=ae;--ae)if(Q=Z.charCodeAt(ae),47!==Q)ne=!1;else if(!ne){te=ae;break}return-1===te?ee?'/':'.':ee&&1===te?'//':Z.slice(0,te)},basename:function(Z,Q){if(Q!==void 0&&'string'!=typeof Q)throw new TypeError('"ext" argument must be a string');H(Z);var ee=0,te=-1,ne=!0,ae;if(void 0!==Q&&0<Q.length&&Q.length<=Z.length){if(Q.length===Z.length&&Q===Z)return'';var ie=Q.length-1,oe=-1;for(ae=Z.length-1;0<=ae;--ae){var se=Z.charCodeAt(ae);if(47!==se)-1==oe&&(ne=!1,oe=ae+1),0<=ie&&(se===Q.charCodeAt(ie)?-1==--ie&&(te=ae):(ie=-1,te=oe));else if(!ne){ee=ae+1;break}}return ee===te?te=oe:-1===te&&(te=Z.length),Z.slice(ee,te)}for(ae=Z.length-1;0<=ae;--ae)if(47!==Z.charCodeAt(ae))-1==te&&(ne=!1,te=ae+1);else if(!ne){ee=ae+1;break}return-1===te?'':Z.slice(ee,te)},extname:function(Z){H(Z);for(var Q=-1,ee=0,te=-1,ne=!0,ae=0,ie=Z.length-1,oe;0<=ie;--ie){if(oe=Z.charCodeAt(ie),47===oe){if(!ne){ee=ie+1;break}continue}-1==te&&(ne=!1,te=ie+1),46===oe?-1==Q?Q=ie:1!=ae&&(ae=1):-1!==Q&&(ae=-1)}return-1===Q||-1===te||0==ae||1==ae&&Q===te-1&&Q===ee+1?'':Z.slice(Q,te)},format:function(Z){if(null===Z||'object'!=typeof Z)throw new TypeError('Parameter "pathObject" must be an object, not '+typeof Z);return G('/',Z)},parse:function(Z){H(Z);var Q={root:'',dir:'',base:'',ext:'',name:''};if(0===Z.length)return Q;var ee=Z.charCodeAt(0),te=47===ee,ne;te?(Q.root='/',ne=1):ne=0;for(var ae=-1,ie=0,oe=-1,se=!0,le=Z.length-1,de=0;le>=ne;--le){if(ee=Z.charCodeAt(le),47===ee){if(!se){ie=le+1;break}continue}-1==oe&&(se=!1,oe=le+1),46===ee?-1==ae?ae=le:1!=de&&(de=1):-1!=ae&&(de=-1)}return-1==ae||-1==oe||0==de||1==de&&ae==oe-1&&ae==ie+1?-1!=oe&&(0==ie&&te?Q.base=Q.name=Z.slice(1,oe):Q.base=Q.name=Z.slice(ie,oe)):(0==ie&&te?(Q.name=Z.slice(1,ae),Q.base=Z.slice(1,oe)):(Q.name=Z.slice(ie,ae),Q.base=Z.slice(ie,oe)),Q.ext=Z.slice(ae,oe)),0<ie?Q.dir=Z.slice(0,ie-1):te&&(Q.dir='/'),Q},sep:'/',delimiter:':',posix:null};M.exports=$},function(M,U,W){var H=W(16),Y=W(9),G=W(40);M.exports=function(X){return function($,J,Z){var Q=H($),ee=Y(Q.length),te=G(Z,ee),ne;if(X&&J!=J){for(;ee>te;)if(ne=Q[te++],ne!=ne)return!0;}else for(;ee>te;te++)if((X||te in Q)&&Q[te]===J)return X||te||0;return!X&&-1}}},function(M,U,W){'use strict';var H=W(2),Y=W(0),G=W(14),X=W(38),$=W(30),J=W(44),Z=W(33),Q=W(4),ee=W(3),te=W(59),ne=W(46),ae=W(72);M.exports=function(ie,oe,se,le,de,ue){var ce=H[ie],pe=ce,fe=de?'set':'add',he=pe&&pe.prototype,ge={},ye=function(_e){var we=he[_e];G(he,_e,'delete'==_e?function(Se){return ue&&!Q(Se)?!1:we.call(this,0===Se?0:Se)}:'has'==_e?function(Ee){return ue&&!Q(Ee)?!1:we.call(this,0===Ee?0:Ee)}:'get'==_e?function(Ee){return ue&&!Q(Ee)?void 0:we.call(this,0===Ee?0:Ee)}:'add'==_e?function(Ee){return we.call(this,0===Ee?0:Ee),this}:function(Ee,Pe){return we.call(this,0===Ee?0:Ee,Pe),this})};if('function'!=typeof pe||!(ue||he.forEach&&!ee(function(){new pe().entries().next()})))pe=le.getConstructor(oe,ie,de,fe),X(pe.prototype,se),$.NEED=!0;else{var me=new pe,ve=me[fe](ue?{}:-0,1)!=me,be=ee(function(){me.has(1)}),xe=te(function(_e){new pe(_e)}),ke=!ue&&ee(function(){for(var _e=new pe,we=5;we--;)_e[fe](we,we);return!_e.has(-0)});xe||(pe=oe(function(_e,we){Z(_e,pe,ie);var Se=ae(new ce,_e,pe);return void 0!=we&&J(we,de,Se[fe],Se),Se}),pe.prototype=he,he.constructor=pe),(be||ke)&&(ye('delete'),ye('has'),de&&ye('get')),(ke||ve)&&ye(fe),ue&&he.clear&&delete he.clear}return ne(pe,ie),ge[ie]=pe,Y(Y.G+Y.W+Y.F*(pe!=ce),ge),ue||le.setStrong(pe,ie,de),pe}},function(M,U,W){'use strict';var H=W(13),Y=W(14),G=W(3),X=W(20),$=W(5);M.exports=function(J,Z,Q){var ee=$(J),te=Q(X,ee,''[J]),ne=te[0],ae=te[1];G(function(){var ie={};return ie[ee]=function(){return 7},7!=''[J](ie)})&&(Y(String.prototype,J,ne),H(RegExp.prototype,ee,2==Z?function(ie,oe){return ae.call(ie,this,oe)}:function(ie){return ae.call(ie,this)}))}},function(M,U,W){'use strict';var H=W(1);M.exports=function(){var Y=H(this),G='';return Y.global&&(G+='g'),Y.ignoreCase&&(G+='i'),Y.multiline&&(G+='m'),Y.unicode&&(G+='u'),Y.sticky&&(G+='y'),G}},function(M){M.exports=function(W,H,Y){var G=Y===void 0;switch(H.length){case 0:return G?W():W.call(Y);case 1:return G?W(H[0]):W.call(Y,H[0]);case 2:return G?W(H[0],H[1]):W.call(Y,H[0],H[1]);case 3:return G?W(H[0],H[1],H[2]):W.call(Y,H[0],H[1],H[2]);case 4:return G?W(H[0],H[1],H[2],H[3]):W.call(Y,H[0],H[1],H[2],H[3]);}return W.apply(Y,H)}},function(M,U,W){var H=W(4),Y=W(19),G=W(5)('match');M.exports=function(X){var $;return H(X)&&(($=X[G])===void 0?'RegExp'==Y(X):!!$)}},function(M,U,W){var H=W(5)('iterator'),Y=!1;try{var G=[7][H]();G['return']=function(){Y=!0},Array.from(G,function(){throw 2})}catch(X){}M.exports=function(X,$){if(!$&&!Y)return!1;var J=!1;try{var Z=[7],Q=Z[H]();Q.next=function(){return{done:J=!0}},Z[H]=function(){return Q},X(Z)}catch(ee){}return J}},function(M,U,W){M.exports=W(34)||!W(3)(function(){var H=Math.random();__defineSetter__.call(null,H,function(){}),delete W(2)[H]})},function(M,U){U.f=Object.getOwnPropertySymbols},function(M,U,W){var H=W(2),Y='__core-js_shared__',G=H[Y]||(H[Y]={});M.exports=function(X){return G[X]||(G[X]={})}},function(M,U,W){for(var H=W(2),Y=W(13),G=W(41),X=G('typed_array'),$=G('view'),J=!!(H.ArrayBuffer&&H.DataView),Z=J,Q=0,ne='Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'.split(','),te;Q<9;)(te=H[ne[Q++]])?(Y(te.prototype,X,!0),Y(te.prototype,$,!0)):Z=!1;M.exports={ABV:J,CONSTR:Z,TYPED:X,VIEW:$}},function(M,U,W){'use strict';Object.defineProperty(U,'__esModule',{value:!0}),U.replaceBase=function(ee,te){var ne,ae;ee&&(ae=(0,J.qs)(ee,'head'),ne=(0,J.qs)(ae,'base'),!ne&&(ne=ee.createElement('base'),ae.insertBefore(ne,ae.firstChild)),ne.setAttribute('href',te.url))},U.replaceCanonical=function(ee,te){var ne,ae,ie=te.url;ee&&(ne=(0,J.qs)(ee,'head'),ae=(0,J.qs)(ne,'link[rel=\'canonical\']'),ae?ae.setAttribute('href',ie):(ae=ee.createElement('link'),ae.setAttribute('rel','canonical'),ae.setAttribute('href',ie),ne.appendChild(ae)))},U.replaceLinks=function(ee,te){for(var ne=ee.querySelectorAll('a[href]'),ae=(0,J.qs)(ee.ownerDocument,'base'),ie=ae?ae.href:void 0,oe=function(le){var de=le.getAttribute('href');if(0!==de.indexOf('mailto:')){var ue=-1<de.indexOf('://'),ce=new Q.default(de,ie);ue?le.setAttribute('target','_blank'):le.onclick=function(){return ce&&ce.hash?te(ce.Path.path+ce.hash):ce?te(ce.Path.path):te(de),!1}}}.bind(this),se=0;se<ne.length;se++)oe(ne[se])},U.substitute=function(ee,te,ne){return te.forEach(function(ae,ie){ae&&ne[ie]&&(ee=ee.replace(new RegExp(ae,'g'),ne[ie]))}),ee};var J=W(8),Z=W(65),Q=function(ee){return ee&&ee.__esModule?ee:{default:ee}}(Z)},function(M,U,W){'use strict';function H(ee){return ee&&ee.__esModule?ee:{default:ee}}function Y(ee,te){if(!(ee instanceof te))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ee(te,ne){for(var ae=0,ie;ae<ne.length;ae++)ie=ne[ae],ie.enumerable=ie.enumerable||!1,ie.configurable=!0,'value'in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}return function(te,ne,ae){return ne&&ee(te.prototype,ne),ae&&ee(te,ae),te}}(),X=W(51),$=H(X),J=W(52),Z=H(J),Q=function(){function ee(te,ne){Y(this,ee);var ae=-1<te.indexOf('://'),ie=te;if(this.Url=void 0,this.href=te,this.protocol='',this.origin='',this.hash='',this.hash='',this.search='',this.base=ne,!ae&&!1!==ne&&'string'!=typeof ne&&window&&window.location&&(this.base=window.location.href),ae||this.base)try{this.Url=this.base?new URL(te,this.base):new URL(te),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,ie=this.Url.pathname}catch(oe){this.Url=void 0}this.Path=new $.default(ie),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}return G(ee,[{key:'path',value:function(){return this.Path}},{key:'resolve',value:function(ne){var ae=-1<ne.indexOf('://'),ie;return ae?ne:(ie=Z.default.resolve(this.directory,ne),this.origin+ie)}},{key:'relative',value:function(ne){return Z.default.relative(ne,this.directory)}},{key:'toString',value:function(){return this.href}}]),ee}();U.default=Q,M.exports=U['default']},function(M,U,W){'use strict';var H=W(10),Y=W(40),G=W(9);M.exports=function($){for(var J=H(this),Z=G(J.length),Q=arguments.length,ee=Y(1<Q?arguments[1]:void 0,Z),te=2<Q?arguments[2]:void 0,ne=void 0===te?Z:Y(te,Z);ne>ee;)J[ee++]=$;return J}},function(M,U,W){'use strict';var H=W(7),Y=W(31);M.exports=function(G,X,$){X in G?H.f(G,X,Y(0,$)):G[X]=$}},function(M,U,W){var H=W(4),Y=W(2).document,G=H(Y)&&H(Y.createElement);M.exports=function(X){return G?Y.createElement(X):{}}},function(M){M.exports='constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(',')},function(M,U,W){var H=W(5)('match');M.exports=function(Y){var G=/./;try{'/./'[Y](G)}catch(X){try{return G[H]=!1,!'/./'[Y](G)}catch($){}}return!0}},function(M,U,W){M.exports=W(2).document&&document.documentElement},function(M,U,W){var H=W(4),Y=W(80).set;M.exports=function(G,X,$){var Z=X.constructor,J;return Z!==$&&'function'==typeof Z&&(J=Z.prototype)!==$.prototype&&H(J)&&Y&&Y(G,J),G}},function(M,U,W){var H=W(45),Y=W(5)('iterator'),G=Array.prototype;M.exports=function(X){return X!==void 0&&(H.Array===X||G[Y]===X)}},function(M,U,W){var H=W(19);M.exports=Array.isArray||function(G){return'Array'==H(G)}},function(M,U,W){'use strict';var H=W(35),Y=W(31),G=W(46),X={};W(13)(X,W(5)('iterator'),function(){return this}),M.exports=function($,J,Z){$.prototype=H(X,{next:Y(1,Z)}),G($,J+' Iterator')}},function(M,U,W){'use strict';var H=W(34),Y=W(0),G=W(14),X=W(13),$=W(11),J=W(45),Z=W(75),Q=W(46),ee=W(18),te=W(5)('iterator'),ne=!([].keys&&'next'in[].keys()),ie='keys',oe='values',se=function(){return this};M.exports=function(le,de,ue,ce,pe,fe,he){Z(ue,de,ce);var ge=function(Te){return!ne&&Te in be?be[Te]:Te===ie?function(){return new ue(this,Te)}:Te===oe?function(){return new ue(this,Te)}:function(){return new ue(this,Te)}},ye=de+' Iterator',me=pe==oe,ve=!1,be=le.prototype,xe=be[te]||be['@@iterator']||pe&&be[pe],ke=xe||ge(pe),_e=pe?me?ge('entries'):ke:void 0,we='Array'==de?be.entries||xe:xe,Se,Ee,Pe;if(we&&(Pe=ee(we.call(new le)),Pe!==Object.prototype&&(Q(Pe,ye,!0),!H&&!$(Pe,te)&&X(Pe,te,se))),me&&xe&&xe.name!==oe&&(ve=!0,ke=function(){return xe.call(this)}),(!H||he)&&(ne||ve||!be[te])&&X(be,te,ke),J[de]=ke,J[ye]=se,pe)if(Se={values:me?ke:ge(oe),keys:fe?ke:ge(ie),entries:_e},he)for(Ee in Se)Ee in be||G(be,Ee,Se[Ee]);else Y(Y.P+Y.F*(ne||ve),de,Se);return Se}},function(M){var W=Math.expm1;M.exports=!W||22025.465794806718<W(10)||22025.465794806718>W(10)||-2e-17!=W(-2e-17)?function(Y){return 0==(Y=+Y)?Y:-1e-6<Y&&1e-6>Y?Y+Y*Y/2:Math.exp(Y)-1}:W},function(M){M.exports=Math.sign||function(H){return 0==(H=+H)||H!=H?H:0>H?-1:1}},function(M,U,W){var H=W(2),Y=W(87).set,G=H.MutationObserver||H.WebKitMutationObserver,X=H.process,$=H.Promise,J='process'==W(19)(X);M.exports=function(){var Z,Q,ee,te=function(){var oe,se;for(J&&(oe=X.domain)&&oe.exit();Z;){se=Z.fn,Z=Z.next;try{se()}catch(le){throw Z?ee():Q=void 0,le}}Q=void 0,oe&&oe.enter()};if(J)ee=function(){X.nextTick(te)};else if(G){var ne=!0,ae=document.createTextNode('');new G(te).observe(ae,{characterData:!0}),ee=function(){ae.data=ne=!ne}}else if($&&$.resolve){var ie=$.resolve();ee=function(){ie.then(te)}}else ee=function(){Y.call(H,te)};return function(oe){var se={fn:oe,next:void 0};Q&&(Q.next=se),Z||(Z=se,ee()),Q=se}}},function(M,U,W){var H=W(4),Y=W(1),G=function(X,$){if(Y(X),!H($)&&null!==$)throw TypeError($+': can\'t set as prototype!')};M.exports={set:Object.setPrototypeOf||('__proto__'in{}?function(X,$,J){try{J=W(27)(Function.call,W(17).f(Object.prototype,'__proto__').set,2),J(X,[]),$=!(X instanceof Array)}catch(Z){$=!0}return function(Q,ee){return G(Q,ee),$?Q.__proto__=ee:J(Q,ee),Q}}({},!1):void 0),check:G}},function(M,U,W){var H=W(62)('keys'),Y=W(41);M.exports=function(G){return H[G]||(H[G]=Y(G))}},function(M,U,W){var H=W(1),Y=W(12),G=W(5)('species');M.exports=function(X,$){var J=H(X).constructor,Z;return J===void 0||(Z=H(J)[G])==void 0?$:Y(Z)}},function(M,U,W){var H=W(32),Y=W(20);M.exports=function(G){return function(X,$){var J=Y(X)+'',Z=H($),Q=J.length,ee,te;return 0>Z||Z>=Q?G?'':void 0:(ee=J.charCodeAt(Z),55296>ee||56319<ee||Z+1===Q||56320>(te=J.charCodeAt(Z+1))||57343<te?G?J.charAt(Z):ee:G?J.slice(Z,Z+2):(ee-55296<<10)+(te-56320)+65536)}}},function(M,U,W){var H=W(58),Y=W(20);M.exports=function(G,X,$){if(H(X))throw TypeError('String#'+$+' doesn\'t accept regex!');return Y(G)+''}},function(M,U,W){'use strict';var H=W(32),Y=W(20);M.exports=function(X){var $=Y(this)+'',J='',Z=H(X);if(0>Z||Z==Infinity)throw RangeError('Count can\'t be negative');for(;0<Z;(Z>>>=1)&&($+=$))1&Z&&(J+=$);return J}},function(M){M.exports='\\t\\n\\x0B\\f\\r \\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF'},function(M,U,W){var H=W(27),Y=W(57),G=W(71),X=W(68),$=W(2),J=$.process,Z=$.setImmediate,Q=$.clearImmediate,ee=$.MessageChannel,te=0,ne={},ae='onreadystatechange',ie,oe,se,le=function(){var ue=+this;if(ne.hasOwnProperty(ue)){var ce=ne[ue];delete ne[ue],ce()}},de=function(ue){le.call(ue.data)};Z&&Q||(Z=function(ce){for(var pe=[],fe=1;arguments.length>fe;)pe.push(arguments[fe++]);return ne[++te]=function(){Y('function'==typeof ce?ce:Function(ce),pe)},ie(te),te},Q=function(ce){delete ne[ce]},'process'==W(19)(J)?ie=function(ue){J.nextTick(H(le,ue,1))}:ee?(oe=new ee,se=oe.port2,oe.port1.onmessage=de,ie=H(se.postMessage,se,1)):$.addEventListener&&'function'==typeof postMessage&&!$.importScripts?(ie=function(ue){$.postMessage(ue+'','*')},$.addEventListener('message',de,!1)):ae in X('script')?ie=function(ue){G.appendChild(X('script'))[ae]=function(){G.removeChild(this),le.call(ue)}}:ie=function(ue){setTimeout(H(le,ue,1),0)}),M.exports={set:Z,clear:Q}},function(M,U,W){'use strict';var H=W(2),Y=W(6),G=W(34),X=W(63),$=W(13),J=W(38),Z=W(3),Q=W(33),ee=W(32),te=W(9),ne=W(36).f,ae=W(7).f,ie=W(66),oe=W(46),se='ArrayBuffer',le='DataView',de='prototype',ue='Wrong length!',ce='Wrong index!',pe=H[se],fe=H[le],he=H.Math,ge=H.RangeError,ye=H.Infinity,me=pe,ve=he.abs,be=he.pow,xe=he.floor,ke=he.log,_e=he.LN2,we='buffer',Se='byteLength',Ee='byteOffset',Pe=Y?'_b':we,Te=Y?'_l':Se,Ce=Y?'_o':Ee,Re=function(Ge,Xe,Ke){var $e=Array(Ke),Je=8*Ke-Xe-1,Ze=(1<<Je)-1,Qe=Ze>>1,et=23===Xe?be(2,-24)-be(2,-77):0,tt=0,nt=0>Ge||0===Ge&&0>1/Ge?1:0,ot,st,dt;for(Ge=ve(Ge),Ge!=Ge||Ge===ye?(st=Ge==Ge?0:1,ot=Ze):(ot=xe(ke(Ge)/_e),1>Ge*(dt=be(2,-ot))&&(ot--,dt*=2),Ge+=1<=ot+Qe?et/dt:et*be(2,1-Qe),2<=Ge*dt&&(ot++,dt/=2),ot+Qe>=Ze?(st=0,ot=Ze):1<=ot+Qe?(st=(Ge*dt-1)*be(2,Xe),ot+=Qe):(st=Ge*be(2,Qe-1)*be(2,Xe),ot=0));8<=Xe;$e[tt++]=255&st,st/=256,Xe-=8);for(ot=ot<<Xe|st,Je+=Xe;0<Je;$e[tt++]=255&ot,ot/=256,Je-=8);return $e[--tt]|=128*nt,$e},Oe=function(Ge,Xe,Ke){var $e=8*Ke-Xe-1,Je=(1<<$e)-1,Ze=Je>>1,Qe=$e-7,et=Ke-1,tt=Ge[et--],nt=127&tt,ot;for(tt>>=7;0<Qe;nt=256*nt+Ge[et],et--,Qe-=8);for(ot=nt&(1<<-Qe)-1,nt>>=-Qe,Qe+=Xe;0<Qe;ot=256*ot+Ge[et],et--,Qe-=8);if(0===nt)nt=1-Ze;else{if(nt===Je)return ot?NaN:tt?-ye:ye;ot+=be(2,Xe),nt-=Ze}return(tt?-1:1)*ot*be(2,nt-Xe)},Le=function(Ge){return Ge[3]<<24|Ge[2]<<16|Ge[1]<<8|Ge[0]},Ne=function(Ge){return[255&Ge]},Ae=function(Ge){return[255&Ge,255&Ge>>8]},Ie=function(Ge){return[255&Ge,255&Ge>>8,255&Ge>>16,255&Ge>>24]},Fe=function(Ge){return Re(Ge,52,8)},ze=function(Ge){return Re(Ge,23,4)},qe=function(Ge,Xe,Ke){ae(Ge[de],Xe,{get:function(){return this[Ke]}})},je=function(Ge,Xe,Ke,$e){var Je=+Ke,Ze=ee(Je);if(Je!=Ze||0>Ze||Ze+Xe>Ge[Te])throw ge(ce);var Qe=Ge[Pe]._b,et=Ze+Ge[Ce],tt=Qe.slice(et,et+Xe);return $e?tt:tt.reverse()},Me=function(Ge,Xe,Ke,$e,Je,Ze){var Qe=+Ke,et=ee(Qe);if(Qe!=et||0>et||et+Xe>Ge[Te])throw ge(ce);for(var tt=Ge[Pe]._b,nt=et+Ge[Ce],ot=$e(+Je),st=0;st<Xe;st++)tt[nt+st]=ot[Ze?st:Xe-st-1]},Be=function(Ge,Xe){Q(Ge,pe,se);var Ke=+Xe,$e=te(Ke);if(Ke!=$e)throw ge(ue);return $e};if(!X.ABV)pe=function(Xe){var Ke=Be(this,Xe);this._b=ie.call(Array(Ke),0),this[Te]=Ke},fe=function(Xe,Ke,$e){Q(this,fe,le),Q(Xe,pe,le);var Je=Xe[Te],Ze=ee(Ke);if(0>Ze||Ze>Je)throw ge('Wrong offset!');if($e=void 0===$e?Je-Ze:te($e),Ze+$e>Je)throw ge(ue);this[Pe]=Xe,this[Ce]=Ze,this[Te]=$e},Y&&(qe(pe,Se,'_l'),qe(fe,we,'_b'),qe(fe,Se,'_l'),qe(fe,Ee,'_o')),J(fe[de],{getInt8:function(Xe){return je(this,1,Xe)[0]<<24>>24},getUint8:function(Xe){return je(this,1,Xe)[0]},getInt16:function(Xe){var Ke=je(this,2,Xe,arguments[1]);return(Ke[1]<<8|Ke[0])<<16>>16},getUint16:function(Xe){var Ke=je(this,2,Xe,arguments[1]);return Ke[1]<<8|Ke[0]},getInt32:function(Xe){return Le(je(this,4,Xe,arguments[1]))},getUint32:function(Xe){return Le(je(this,4,Xe,arguments[1]))>>>0},getFloat32:function(Xe){return Oe(je(this,4,Xe,arguments[1]),23,4)},getFloat64:function(Xe){return Oe(je(this,8,Xe,arguments[1]),52,8)},setInt8:function(Xe,Ke){Me(this,1,Xe,Ne,Ke)},setUint8:function(Xe,Ke){Me(this,1,Xe,Ne,Ke)},setInt16:function(Xe,Ke){Me(this,2,Xe,Ae,Ke,arguments[2])},setUint16:function(Xe,Ke){Me(this,2,Xe,Ae,Ke,arguments[2])},setInt32:function(Xe,Ke){Me(this,4,Xe,Ie,Ke,arguments[2])},setUint32:function(Xe,Ke){Me(this,4,Xe,Ie,Ke,arguments[2])},setFloat32:function(Xe,Ke){Me(this,4,Xe,ze,Ke,arguments[2])},setFloat64:function(Xe,Ke){Me(this,8,Xe,Fe,Ke,arguments[2])}});else{if(!Z(function(){new pe})||!Z(function(){new pe(.5)})){pe=function(Xe){return new me(Be(this,Xe))};for(var Ue=pe[de]=me[de],De=ne(me),We=0,He;De.length>We;)(He=De[We++])in pe||$(pe,He,me[He]);G||(Ue.constructor=pe)}var Ye=new fe(new pe(2)),Ve=fe[de].setInt8;Ye.setInt8(0,2147483648),Ye.setInt8(1,2147483649),(Ye.getInt8(0)||!Ye.getInt8(1))&&J(fe[de],{setInt8:function(Xe,Ke){Ve.call(this,Xe,Ke<<24>>24)},setUint8:function(Xe,Ke){Ve.call(this,Xe,Ke<<24>>24)}},!0)}oe(pe,se),oe(fe,le),$(fe[de],X.VIEW,!0),U[se]=pe,U[le]=fe},function(M,U,W){var H=W(2),Y=W(26),G=W(34),X=W(121),$=W(7).f;M.exports=function(J){var Z=Y.Symbol||(Y.Symbol=G?{}:H.Symbol||{});'_'==J.charAt(0)||J in Z||$(Z,J,{value:X.f(J)})}},function(M,U,W){var H=W(48),Y=W(5)('iterator'),G=W(45);M.exports=W(26).getIteratorMethod=function(X){if(X!=void 0)return X[Y]||X['@@iterator']||G[H(X)]}},function(M,U,W){'use strict';var H=W(43),Y=W(109),G=W(45),X=W(16);M.exports=W(76)(Array,'Array',function($,J){this._t=X($),this._i=0,this._k=J},function(){var $=this._t,J=this._k,Z=this._i++;return!$||Z>=$.length?(this._t=void 0,Y(1)):'keys'==J?Y(0,Z):'values'==J?Y(0,$[Z]):Y(0,[Z,$[Z]])},'values'),G.Arguments=G.Array,H('keys'),H('values'),H('entries')},function(M){var W=function(){return this}();try{W=W||Function('return this')()||(1,eval)('this')}catch(H){'object'==typeof window&&(W=window)}M.exports=W},function(M,U,W){'use strict';function H(oe){return oe&&oe.__esModule?oe:{default:oe}}function Y(oe,se){if(!(oe instanceof se))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function oe(se,le){for(var de=0,ue;de<le.length;de++)ue=le[de],ue.enumerable=ue.enumerable||!1,ue.configurable=!0,'value'in ue&&(ue.writable=!0),Object.defineProperty(se,ue.key,ue)}return function(se,le,de){return le&&oe(se.prototype,le),de&&oe(se,de),se}}(),X=W(42),$=H(X),J=W(8),Z=W(25),Q=H(Z),ee=W(94),te=H(ee),ne=W(64),ae=['keydown','keyup','keypressed','mouseup','mousedown','click','touchend','touchstart'],ie=function(){function oe(se,le,de){Y(this,oe),this.epubcfi=new Q.default,this.document=se,this.documentElement=this.document.documentElement,this.content=le||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.cfiBase=de||'',this.listeners()}return G(oe,[{key:'width',value:function(le){var de=this.content;return le&&(0,J.isNumber)(le)&&(le+='px'),le&&(de.style.width=le),this.window.getComputedStyle(de).width}},{key:'height',value:function(le){var de=this.content;return le&&(0,J.isNumber)(le)&&(le+='px'),le&&(de.style.height=le),this.window.getComputedStyle(de).height}},{key:'contentWidth',value:function(le){var de=this.content||this.document.body;return le&&(0,J.isNumber)(le)&&(le+='px'),le&&(de.style.width=le),this.window.getComputedStyle(de).width}},{key:'contentHeight',value:function(le){var de=this.content||this.document.body;return le&&(0,J.isNumber)(le)&&(le+='px'),le&&(de.style.height=le),this.window.getComputedStyle(de).height}},{key:'textWidth',value:function(){var de=this.document.createRange(),ue=this.content||this.document.body,le;return de.selectNodeContents(ue),le=de.getBoundingClientRect().width,le}},{key:'textHeight',value:function(){var de=this.document.createRange(),ue=this.content||this.document.body,le;return de.selectNodeContents(ue),le=de.getBoundingClientRect().height,le}},{key:'scrollWidth',value:function(){var le=this.documentElement.scrollWidth;return le}},{key:'scrollHeight',value:function(){var le=this.documentElement.scrollHeight;return le}},{key:'overflow',value:function(le){return le&&(this.documentElement.style.overflow=le),this.window.getComputedStyle(this.documentElement).overflow}},{key:'overflowX',value:function(le){return le&&(this.documentElement.style.overflowX=le),this.window.getComputedStyle(this.documentElement).overflowX}},{key:'overflowY',value:function(le){return le&&(this.documentElement.style.overflowY=le),this.window.getComputedStyle(this.documentElement).overflowY}},{key:'css',value:function(le,de,ue){var ce=this.content||this.document.body;return de&&ce.style.setProperty(le,de,ue?'important':''),this.window.getComputedStyle(ce)[le]}},{key:'viewport',value:function(le){var ke=this.document.querySelector('meta[name=\'viewport\']'),_e='',ge,ye,me,ve,be,xe;if(ke&&ke.hasAttribute('content')){var we=ke.getAttribute('content'),Se=we.match(/width\s*=\s*([^,]*)/g),Ee=we.match(/height\s*=\s*([^,]*)/g),Pe=we.match(/initial-scale\s*=\s*([^,]*)/g),Te=we.match(/minimum-scale\s*=\s*([^,]*)/g),Ce=we.match(/maximum-scale\s*=\s*([^,]*)/g),Re=we.match(/user-scalable\s*=\s*([^,]*)/g);Se[1]&&(ge=Se[1]),Ee[1]&&(ye=Ee[1]),Pe[1]&&(me=Pe[1]),Te[1]&&(ve=Te[1]),Ce[1]&&(be=Ce[1]),Re[1]&&(xe=Re[1])}return le&&(_e+='width='+(le.width||ge),_e+=', height='+(le.height||ye),(le.scale||me)&&(_e+=', initial-scale='+(le.scale||me)),(le.scalable||xe)&&(_e+=', minimum-scale='+(le.scale||ve),_e+=', maximum-scale='+(le.scale||be),_e+=', user-scalable='+(le.scalable||xe)),!ke&&(ke=this.document.createElement('meta'),ke.setAttribute('name','viewport'),this.document.querySelector('head').appendChild(ke)),ke.setAttribute('content',_e)),{width:parseInt(ge),height:parseInt(ye)}}},{key:'expand',value:function(){this.emit('expand')}},{key:'listeners',value:function(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),this.resizeListeners(),this.linksHandler()}},{key:'removeListeners',value:function(){this.removeEventListeners(),this.removeSelectionListeners()}},{key:'resizeListeners',value:function(){var le,de;clearTimeout(this.expanding),le=this.scrollWidth(),de=this.scrollHeight(),(le!=this._size.width||de!=this._size.height)&&(this._size={width:le,height:de},this.emit('resize',this._size)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}},{key:'mediaQueryListeners',value:function(){for(var le=this.document.styleSheets,de=function(he){he.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),ue=0;ue<le.length;ue+=1){var ce;try{ce=le[ue].cssRules}catch(he){return}if(!ce)return;for(var pe=0;pe<ce.length;pe+=1)if(ce[pe].media){var fe=this.window.matchMedia(ce[pe].media.mediaText);fe.addListener(de)}}}},{key:'observe',value:function(le){var de=this,ue=new MutationObserver(function(){de._expanding&&de.expand()});return ue.observe(le,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),ue}},{key:'imageLoadListeners',value:function(){for(var de=this.document.querySelectorAll('img'),ce=0,ue;ce<de.length;ce++)ue=de[ce],'undefined'!=typeof ue.naturalWidth&&0===ue.naturalWidth&&(ue.onload=this.expand.bind(this))}},{key:'fontLoadListeners',value:function(){this.document&&this.document.fonts&&this.document.fonts.ready.then(function(){this.expand()}.bind(this))}},{key:'root',value:function(){return this.document?this.document.documentElement:null}},{key:'locationOf',value:function(le,de){var ce={left:0,top:0},ue;if(this.document){if(this.epubcfi.isCfiString(le)){var pe=new Q.default(le).toRange(this.document,de);pe&&(pe.startContainer.nodeType===Node.ELEMENT_NODE?(ue=pe.startContainer.getBoundingClientRect(),ce.left=ue.left,ce.top=ue.top):pe.collapsed?ue=pe.getClientRects()[0]:ue=pe.getBoundingClientRect())}else if('string'==typeof le&&-1<le.indexOf('#')){var fe=le.substring(le.indexOf('#')+1),he=this.document.getElementById(fe);he&&(ue=he.getBoundingClientRect())}return ue&&(ce.left=ue.left,ce.top=ue.top),ce}}},{key:'addStylesheet',value:function(le){return new Promise(function(de){var pe=!1,ce;return this.document?(ce=this.document.querySelector('link[href=\''+le+'\']'),ce?void de(!0):void(ce=this.document.createElement('link'),ce.type='text/css',ce.rel='stylesheet',ce.href=le,ce.onload=ce.onreadystatechange=function(){pe||this.readyState&&'complete'!=this.readyState||(pe=!0,setTimeout(function(){de(!0)},1))},this.document.head.appendChild(ce))):void de(!1)}.bind(this))}},{key:'addStylesheetRules',value:function(le){var ce='epubjs-inserted-css',de,ue;if(this.document&&le&&0!==le.length)if(de=this.document.getElementById('#'+ce),de||(de=this.document.createElement('style'),de.id=ce),this.document.head.appendChild(de),ue=de.sheet,'[object Array]'===Object.prototype.toString.call(le))for(var pe=0,fe=le.length;pe<fe;pe++){var he=1,ge=le[pe],ye=le[pe][0],me='';'[object Array]'===Object.prototype.toString.call(ge[1][0])&&(ge=ge[1],he=0);for(var ve=ge.length,be;he<ve;he++)be=ge[he],me+=be[0]+':'+be[1]+(be[2]?' !important':'')+';\n';ue.insertRule(ye+'{'+me+'}',ue.cssRules.length)}else{var xe=Object.keys(le);xe.forEach(function(ke){var _e=le[ke],we=Object.keys(_e),Se=we.map(function(Ee){return Ee+':'+_e[Ee]}).join(';');ue.insertRule(ke+'{'+Se+'}',ue.cssRules.length)})}}},{key:'addScript',value:function(le){return new Promise(function(de){var pe=!1,ce;return this.document?void(ce=this.document.createElement('script'),ce.type='text/javascript',ce.async=!0,ce.src=le,ce.onload=ce.onreadystatechange=function(){pe||this.readyState&&'complete'!=this.readyState||(pe=!0,setTimeout(function(){de(!0)},1))},this.document.head.appendChild(ce)):void de(!1)}.bind(this))}},{key:'addClass',value:function(le){var de;this.document&&(de=this.content||this.document.body,de.classList.add(le))}},{key:'removeClass',value:function(le){var de;this.document&&(de=this.content||this.document.body,de.classList.remove(le))}},{key:'addEventListeners',value:function(){this.document&&ae.forEach(function(le){this.document.addEventListener(le,this.triggerEvent.bind(this),!1)},this)}},{key:'removeEventListeners',value:function(){this.document&&ae.forEach(function(le){this.document.removeEventListener(le,this.triggerEvent,!1)},this)}},{key:'triggerEvent',value:function(le){this.emit(le.type,le)}},{key:'addSelectionListeners',value:function(){this.document&&this.document.addEventListener('selectionchange',this.onSelectionChange.bind(this),!1)}},{key:'removeSelectionListeners',value:function(){this.document&&this.document.removeEventListener('selectionchange',this.onSelectionChange,!1)}},{key:'onSelectionChange',value:function(){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var de=this.window.getSelection();this.triggerSelectedEvent(de)}.bind(this),500)}},{key:'triggerSelectedEvent',value:function(le){var de,ue;le&&0<le.rangeCount&&(de=le.getRangeAt(0),!de.collapsed&&(ue=new Q.default(de,this.cfiBase).toString(),this.emit('selected',ue),this.emit('selectedRange',de)))}},{key:'range',value:function(le,de){var ue=new Q.default(le);return ue.toRange(this.document,de)}},{key:'cfiFromRange',value:function(le,de){return new Q.default(le,this.cfiBase,de).toString()}},{key:'cfiFromNode',value:function(le,de){return new Q.default(le,this.cfiBase,de).toString()}},{key:'map',value:function(le){var se=new te.default(le);return se.section()}},{key:'size',value:function(le,de){0<=le&&this.width(le),0<=de&&this.height(de),this.css('margin','0'),this.css('box-sizing','border-box')}},{key:'columns',value:function(le,de,ue,ce){var pe=(0,J.prefixed)('column-axis'),fe=(0,J.prefixed)('column-gap'),he=(0,J.prefixed)('column-width'),ge=(0,J.prefixed)('column-fill');this.width(le),this.height(de),this.viewport({width:le,height:de,scale:1,scalable:'no'}),this.css('overflow-y','hidden'),this.css('margin','0',!0),this.css('padding','0',!0),this.css('box-sizing','border-box'),this.css('max-width','inherit'),this.css(pe,'horizontal'),this.css(ge,'auto'),this.css(fe,ce+'px'),this.css(he,ue+'px')}},{key:'scaler',value:function(le,de,ue){var pe='';this.css('transform-origin','top left'),(0<=de||0<=ue)&&(pe=' translate('+(de||0)+'px, '+(ue||0)+'px )'),this.css('transform','scale('+le+')'+pe)}},{key:'fit',value:function(le,de){var ue=this.viewport(),ce=le/ue.width,pe=de/ue.height,fe=ce<pe?ce:pe,he=(de-ue.height*fe)/2;this.width(le),this.height(de),this.overflow('hidden'),this.viewport({scale:1}),this.scaler(fe,0,he),this.css('background-color','transparent')}},{key:'mapPage',value:function(le,de,ue,ce,pe){var fe=new te.default(de,pe);return fe.page(this,le,ue,ce)}},{key:'linksHandler',value:function(){var le=this;(0,ne.replaceLinks)(this.content,function(de){le.emit('link',de)})}},{key:'destroy',value:function(){this.observer&&this.observer.disconnect(),this.removeListeners()}}],[{key:'listenedEvents',get:function(){return ae}}]),oe}();(0,$.default)(ie.prototype),U.default=ie,M.exports=U['default']},function(M,U,W){'use strict';function Y(Z,Q){if(!(Z instanceof Q))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function Z(Q,ee){for(var te=0,ne;te<ee.length;te++)ne=ee[te],ne.enumerable=ne.enumerable||!1,ne.configurable=!0,'value'in ne&&(ne.writable=!0),Object.defineProperty(Q,ne.key,ne)}return function(Q,ee,te){return ee&&Z(Q.prototype,ee),te&&Z(Q,te),Q}}(),X=W(25),$=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(X),J=function(){function Z(Q,ee){Y(this,Z),this.layout=Q,this.horizontal='paginated'===this.layout.flow,this._dev=ee}return G(Z,[{key:'section',value:function(ee){var te=this.findRanges(ee),ne=this.rangeListToCfiList(ee.section.cfiBase,te);return ne}},{key:'page',value:function(ee,te,ne,ae){var ie=ee&&ee.document&&ee.document.body,oe;if(ie){if(oe=this.rangePairToCfiPair(te,{start:this.findStart(ie,ne,ae),end:this.findEnd(ie,ne,ae)}),!0===this._dev){var se=ee.document,le=new $.default(oe.start).toRange(se),de=new $.default(oe.end).toRange(se),ue=se.defaultView.getSelection(),ce=se.createRange();ue.removeAllRanges(),ce.setStart(le.startContainer,le.startOffset),ce.setEnd(de.endContainer,de.endOffset),ue.addRange(ce)}return oe}}},{key:'walk',value:function(ee,te){for(var ne=document.createTreeWalker(ee,NodeFilter.SHOW_TEXT,{acceptNode:function(se){return 0<se.data.trim().length?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1),ae,ie;(ae=ne.nextNode())&&(ie=te(ae),!ie););return ie}},{key:'findRanges',value:function(ee){for(var te=[],ne=ee.contents.scrollWidth(),ae=Math.ceil(ne/this.layout.spreadWidth),ie=ae*this.layout.divisor,oe=this.layout.columnWidth,se=this.layout.gap,ue=0,le,de;ue<ie.pages;ue++)le=(oe+se)*ue,de=oe*(ue+1)+se*ue,te.push({start:this.findStart(ee.document.body,le,de),end:this.findEnd(ee.document.body,le,de)});return te}},{key:'findStart',value:function(ee,te,ne){for(var ae=this,ie=[ee],le=ee,oe,se;ie.length;)if(oe=ie.shift(),se=this.walk(oe,function(de){var ue,ce,pe,fe;return(de.nodeType==Node.TEXT_NODE?(fe=document.createRange(),fe.selectNodeContents(de),pe=fe.getBoundingClientRect()):pe=de.getBoundingClientRect(),ue=ae.horizontal?pe.left:pe.top,ce=ae.horizontal?pe.right:pe.bottom,ue>=te&&ue<=ne)?de:ce>te?de:void(le=de,ie.push(de))}),se)return this.findTextStartRange(se,te,ne);return this.findTextStartRange(le,te,ne)}},{key:'findEnd',value:function(ee,te,ne){for(var ae=this,ie=[ee],se=ee,oe,le;ie.length;)if(oe=ie.shift(),le=this.walk(oe,function(de){var ue,ce,pe,fe;return(de.nodeType==Node.TEXT_NODE?(fe=document.createRange(),fe.selectNodeContents(de),pe=fe.getBoundingClientRect()):pe=de.getBoundingClientRect(),ue=ae.horizontal?pe.left:pe.top,ce=ae.horizontal?pe.right:pe.bottom,ue>ne&&se)?se:ce>ne?de:void(se=de,ie.push(de))}),le)return this.findTextEndRange(le,te,ne);return this.findTextEndRange(se,te,ne)}},{key:'findTextStartRange',value:function(ee,te){for(var ae=this.splitTextNodeIntoRanges(ee),le=0,ie,oe,se;le<ae.length;le++)if(ie=ae[le],oe=ie.getBoundingClientRect(),se=this.horizontal?oe.left:oe.top,se>=te)return ie;return ae[0]}},{key:'findTextEndRange',value:function(ee,te,ne){for(var ae=this.splitTextNodeIntoRanges(ee),ue=0,ie,oe,se,le,de;ue<ae.length;ue++){if(oe=ae[ue],se=oe.getBoundingClientRect(),le=this.horizontal?se.left:se.top,de=this.horizontal?se.right:se.bottom,le>ne&&ie)return ie;if(de>ne)return oe;ie=oe}return ae[ae.length-1]}},{key:'splitTextNodeIntoRanges',value:function(ee,te){var ne=[],ae=ee.textContent||'',ie=ae.trim(),se=ee.ownerDocument,le=te||' ',de=ie.indexOf(le),oe;if(-1===de||ee.nodeType!=Node.TEXT_NODE)return oe=se.createRange(),oe.selectNodeContents(ee),[oe];for(oe=se.createRange(),oe.setStart(ee,0),oe.setEnd(ee,de),ne.push(oe),oe=!1;-1!=de;)de=ie.indexOf(le,de+1),0<de&&(oe&&(oe.setEnd(ee,de),ne.push(oe)),oe=se.createRange(),oe.setStart(ee,de+1));return oe&&(oe.setEnd(ee,ie.length),ne.push(oe)),ne}},{key:'rangePairToCfiPair',value:function(ee,te){var ne=te.start,ae=te.end;ne.collapse(!0),ae.collapse(!1);var ie=new $.default(ne,ee).toString(),oe=new $.default(ae,ee).toString();return{start:ie,end:oe}}},{key:'rangeListToCfiList',value:function(ee,te){for(var ne=[],ie=0,ae;ie<te.length;ie++)ae=this.rangePairToCfiPair(ee,te[ie]),ne.push(ae);return ne}}]),Z}();U.default=J,M.exports=U['default']},function(M,U){'use strict';function H(X,$){if(!(X instanceof $))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function X($,J){for(var Z=0,Q;Z<J.length;Z++)Q=J[Z],Q.enumerable=Q.enumerable||!1,Q.configurable=!0,'value'in Q&&(Q.writable=!0),Object.defineProperty($,Q.key,Q)}return function($,J,Z){return J&&X($.prototype,J),Z&&X($,Z),$}}(),G=function(){function X($){H(this,X),this.context=$||this,this.hooks=[]}return Y(X,[{key:'register',value:function(){for(var J=0;J<arguments.length;++J)if('function'==typeof arguments[J])this.hooks.push(arguments[J]);else for(var Z=0;Z<arguments[J].length;++Z)this.hooks.push(arguments[J][Z])}},{key:'trigger',value:function(){var J=arguments,Z=this.context,Q=[];return this.hooks.forEach(function(ee){var te=ee.apply(Z,J);te&&'function'==typeof te.then&&Q.push(te)}),Promise.all(Q)}},{key:'list',value:function(){return this.hooks}},{key:'clear',value:function(){return this.hooks=[]}}]),X}();U.default=G,M.exports=U['default']},function(M,U,W){'use strict';function H(J,Z){if(!(J instanceof Z))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0}),U.Task=void 0;var Y=function(){function J(Z,Q){for(var ee=0,te;ee<Q.length;ee++)te=Q[ee],te.enumerable=te.enumerable||!1,te.configurable=!0,'value'in te&&(te.writable=!0),Object.defineProperty(Z,te.key,te)}return function(Z,Q,ee){return Q&&J(Z.prototype,Q),ee&&J(Z,ee),Z}}(),G=W(8),X=function(){function J(Z){H(this,J),this._q=[],this.context=Z,this.tick=G.requestAnimationFrame,this.running=!1,this.paused=!1}return Y(J,[{key:'enqueue',value:function(){var ne=[].shift.call(arguments),ae=arguments,Q,ee,te;if(!ne)throw new Error('No Task Provided');return'function'==typeof ne?(Q=new G.defer,ee=Q.promise,te={task:ne,args:ae,deferred:Q,promise:ee}):te={promise:ne},this._q.push(te),!1!=this.paused||this.running||this.run(),te.promise}},{key:'dequeue',value:function(){var Q,ee,te;if(this._q.length&&!this.paused){if(Q=this._q.shift(),ee=Q.task,ee)return te=ee.apply(this.context,Q.args),te&&'function'==typeof te.then?te.then(function(){Q.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){Q.deferred.reject.apply(this.context,arguments)}.bind(this)):(Q.deferred.resolve.apply(this.context,te),Q.promise);if(Q.promise)return Q.promise}else return Q=new G.defer,Q.deferred.resolve(),Q.promise}},{key:'dump',value:function(){for(;this._q.length;)this.dequeue()}},{key:'run',value:function(){var Q=this;return this.running||(this.running=!0,this.defered=new G.defer),this.tick.call(window,function(){Q._q.length?Q.dequeue().then(function(){this.run()}.bind(Q)):(Q.defered.resolve(),Q.running=void 0)}),!0==this.paused&&(this.paused=!1),this.defered.promise}},{key:'flush',value:function(){return this.running?this.running:this._q.length?(this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running):void 0}},{key:'clear',value:function(){this._q=[],this.running=!1,this.paused=!0}},{key:'length',value:function(){return this._q.length}},{key:'pause',value:function(){this.paused=!0}}]),J}();U.default=X,U.Task=function J(Z,Q,ee){return H(this,J),function(){var te=this,ne=arguments||[];return new Promise(function(ae,ie){ne.push(function(le,de){!le&&de?ie(de):ae(le)}),Z.apply(ee||te,ne)})}}},function(M,U,W){'use strict';Object.defineProperty(U,'__esModule',{value:!0});var G=W(8),X=W(51),$=function(J){return J&&J.__esModule?J:{default:J}}(X);U.default=function(J,Z,Q,ee){function te(ue){oe.reject(ue)}function ne(){if(this.readyState===XMLHttpRequest.DONE){var ue=!1;if((''===this.responseType||'document'===this.responseType)&&(ue=this.responseXML),200===this.status||ue){var ce;if(!this.response&&!ue)return oe.reject({status:this.status,message:'Empty Response',stack:new Error().stack}),oe.promise;if(403===this.status)return oe.reject({status:this.status,response:this.response,message:'Forbidden',stack:new Error().stack}),oe.promise;ce=ue?this.responseXML:(0,G.isXml)(Z)?(0,G.parse)(this.response,'text/xml'):'xhtml'==Z?(0,G.parse)(this.response,'application/xhtml+xml'):'html'==Z||'htm'==Z?(0,G.parse)(this.response,'text/html'):'json'==Z?JSON.parse(this.response):'blob'==Z?ae?this.response:new Blob([this.response]):this.response,oe.resolve(ce)}else oe.reject({status:this.status,message:this.response,stack:new Error().stack})}}var ae='undefined'!=typeof window&&window.URL,ie=ae?'blob':'arraybuffer',oe=new G.defer,se=new XMLHttpRequest,le=XMLHttpRequest.prototype,de;for(de in'overrideMimeType'in le||Object.defineProperty(le,'overrideMimeType',{value:function(){}}),Q&&(se.withCredentials=!0),se.onreadystatechange=ne,se.onerror=te,se.open('GET',J,!0),ee)se.setRequestHeader(de,ee[de]);return'json'==Z&&se.setRequestHeader('Accept','application/json'),Z||(Z=new $.default(J).extension),'blob'==Z&&(se.responseType=ie),(0,G.isXml)(Z)&&se.overrideMimeType('text/xml'),'xhtml'==Z,'html'!=Z&&'htm'!=Z,'binary'==Z&&(se.responseType='arraybuffer'),se.send(),oe.promise},M.exports=U['default']},function(M,U,W){var H=W(19);M.exports=function(Y,G){if('number'!=typeof Y&&'Number'!=H(Y))throw TypeError(G);return+Y}},function(M,U,W){'use strict';var H=W(10),Y=W(40),G=W(9);M.exports=[].copyWithin||function($,J){var Z=H(this),Q=G(Z.length),ee=Y($,Q),te=Y(J,Q),ne=2<arguments.length?arguments[2]:void 0,ae=Math.min((ne===void 0?Q:Y(ne,Q))-te,Q-ee),ie=1;for(te<ee&&ee<te+ae&&(ie=-1,te+=ae-1,ee+=ae-1);0<ae--;)te in Z?Z[ee]=Z[te]:delete Z[ee],ee+=ie,te+=ie;return Z}},function(M,U,W){var H=W(44);M.exports=function(Y,G){var X=[];return H(Y,!1,X.push,X,G),X}},function(M,U,W){var H=W(12),Y=W(10),G=W(49),X=W(9);M.exports=function($,J,Z,Q,ee){H(J);var te=Y($),ne=G(te),ae=X(te.length),ie=ee?ae-1:0,oe=ee?-1:1;if(2>Z)for(;;){if(ie in ne){Q=ne[ie],ie+=oe;break}if(ie+=oe,ee?0>ie:ae<=ie)throw TypeError('Reduce of empty array with no initial value')}for(;ee?0<=ie:ae>ie;ie+=oe)ie in ne&&(Q=J(Q,ne[ie],ie,te));return Q}},function(M,U,W){'use strict';var H=W(12),Y=W(4),G=W(57),X=[].slice,$={},J=function(Z,Q,ee){if(!(Q in $)){for(var te=[],ne=0;ne<Q;ne++)te[ne]='a['+ne+']';$[Q]=Function('F,a','return new F('+te.join(',')+')')}return $[Q](Z,ee)};M.exports=Function.bind||function(Q){var ee=H(this),te=X.call(arguments,1),ne=function(){var ae=te.concat(X.call(arguments));return this instanceof ne?J(ee,ae.length,ae):G(ee,ae,Q)};return Y(ee.prototype)&&(ne.prototype=ee.prototype),ne}},function(M,U,W){'use strict';var H=W(7).f,Y=W(35),G=W(38),X=W(27),$=W(33),J=W(20),Z=W(44),Q=W(76),ee=W(109),te=W(39),ne=W(6),ae=W(30).fastKey,ie=ne?'_s':'size',oe=function(se,le){var de=ae(le),ue;if('F'!==de)return se._i[de];for(ue=se._f;ue;ue=ue.n)if(ue.k==le)return ue};M.exports={getConstructor:function(se,le,de,ue){var ce=se(function(pe,fe){$(pe,ce,le,'_i'),pe._i=Y(null),pe._f=void 0,pe._l=void 0,pe[ie]=0,void 0!=fe&&Z(fe,de,pe[ue],pe)});return G(ce.prototype,{clear:function(){for(var fe=this,he=fe._i,ge=fe._f;ge;ge=ge.n)ge.r=!0,ge.p&&(ge.p=ge.p.n=void 0),delete he[ge.i];fe._f=fe._l=void 0,fe[ie]=0},'delete':function(pe){var fe=this,he=oe(fe,pe);if(he){var ge=he.n,ye=he.p;delete fe._i[he.i],he.r=!0,ye&&(ye.n=ge),ge&&(ge.p=ye),fe._f==he&&(fe._f=ge),fe._l==he&&(fe._l=ye),fe[ie]--}return!!he},forEach:function(fe){$(this,ce,'forEach');for(var he=X(fe,1<arguments.length?arguments[1]:void 0,3),ge;ge=ge?ge.n:this._f;)for(he(ge.v,ge.k,this);ge&&ge.r;)ge=ge.p},has:function(fe){return!!oe(this,fe)}}),ne&&H(ce.prototype,'size',{get:function(){return J(this[ie])}}),ce},def:function(se,le,de){var ue=oe(se,le),ce,pe;return ue?ue.v=de:(se._l=ue={i:pe=ae(le,!0),k:le,v:de,p:ce=se._l,n:void 0,r:!1},!se._f&&(se._f=ue),ce&&(ce.n=ue),se[ie]++,'F'!==pe&&(se._i[pe]=ue)),se},getEntry:oe,setStrong:function(se,le,de){Q(se,le,function(ue,ce){this._t=ue,this._k=ce,this._l=void 0},function(){for(var ue=this,ce=ue._k,pe=ue._l;pe&&pe.r;)pe=pe.p;return ue._t&&(ue._l=pe=pe?pe.n:ue._t._f)?'keys'==ce?ee(0,pe.k):'values'==ce?ee(0,pe.v):ee(0,[pe.k,pe.v]):(ue._t=void 0,ee(1))},de?'entries':'values',!de,!0),te(le)}}},function(M,U,W){var H=W(48),Y=W(100);M.exports=function(G){return function(){if(H(this)!=G)throw TypeError(G+'#toJSON isn\'t generic');return Y(this)}}},function(M,U,W){'use strict';var H=W(38),Y=W(30).getWeak,G=W(1),X=W(4),$=W(33),J=W(44),Z=W(22),Q=W(11),ee=Z(5),te=Z(6),ne=0,ae=function(se){return se._l||(se._l=new ie)},ie=function(){this.a=[]},oe=function(se,le){return ee(se.a,function(de){return de[0]===le})};ie.prototype={get:function(se){var le=oe(this,se);if(le)return le[1]},has:function(se){return!!oe(this,se)},set:function(se,le){var de=oe(this,se);de?de[1]=le:this.a.push([se,le])},'delete':function(se){var le=te(this.a,function(de){return de[0]===se});return~le&&this.a.splice(le,1),!!~le}},M.exports={getConstructor:function(se,le,de,ue){var ce=se(function(pe,fe){$(pe,ce,le,'_i'),pe._i=ne++,pe._l=void 0,void 0!=fe&&J(fe,de,pe[ue],pe)});return H(ce.prototype,{'delete':function(pe){if(!X(pe))return!1;var fe=Y(pe);return!0===fe?ae(this)['delete'](pe):fe&&Q(fe,this._i)&&delete fe[this._i]},has:function(fe){if(!X(fe))return!1;var he=Y(fe);return!0===he?ae(this).has(fe):he&&Q(he,this._i)}}),ce},def:function(se,le,de){var ue=Y(G(le),!0);return!0===ue?ae(se).set(le,de):ue[se._i]=de,se},ufstore:ae}},function(M,U,W){M.exports=!W(6)&&!W(3)(function(){return 7!=Object.defineProperty(W(68)('div'),'a',{get:function(){return 7}}).a})},function(M,U,W){var H=W(4),Y=Math.floor;M.exports=function(X){return!H(X)&&isFinite(X)&&Y(X)===X}},function(M,U,W){var H=W(1);M.exports=function(Y,G,X,$){try{return $?G(H(X)[0],X[1]):G(X)}catch(Z){var J=Y['return'];throw void 0!==J&&H(J.call(Y)),Z}}},function(M){M.exports=function(W,H){return{value:H,done:!!W}}},function(M){M.exports=Math.log1p||function(H){return-1e-8<(H=+H)&&1e-8>H?H-H*H/2:Math.log(1+H)}},function(M,U,W){'use strict';var H=W(37),Y=W(61),G=W(50),X=W(10),$=W(49),J=Object.assign;M.exports=!J||W(3)(function(){var Z={},Q={},ee=Symbol(),te='abcdefghijklmnopqrst';return Z[ee]=7,te.split('').forEach(function(ne){Q[ne]=ne}),7!=J({},Z)[ee]||Object.keys(J({},Q)).join('')!=te})?function(Q){for(var te=X(Q),ne=arguments.length,ae=1,ie=Y.f,oe=G.f;ne>ae;)for(var se=$(arguments[ae++]),le=ie?H(se).concat(ie(se)):H(se),de=le.length,ue=0,ce;de>ue;)oe.call(se,ce=le[ue++])&&(te[ce]=se[ce]);return te}:J},function(M,U,W){var H=W(7),Y=W(1),G=W(37);M.exports=W(6)?Object.defineProperties:function($,J){Y($);for(var Z=G(J),Q=Z.length,ee=0,te;Q>ee;)H.f($,te=Z[ee++],J[te]);return $}},function(M,U,W){var H=W(16),Y=W(36).f,G={}.toString,X='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],$=function(J){try{return Y(J)}catch(Z){return X.slice()}};M.exports.f=function(Z){return X&&'[object Window]'==G.call(Z)?$(Z):Y(H(Z))}},function(M,U,W){var H=W(11),Y=W(16),G=W(53)(!1),X=W(81)('IE_PROTO');M.exports=function($,J){var Z=Y($),Q=0,ee=[],te;for(te in Z)te!=X&&H(Z,te)&&ee.push(te);for(;J.length>Q;)H(Z,te=J[Q++])&&(~G(ee,te)||ee.push(te));return ee}},function(M,U,W){var H=W(37),Y=W(16),G=W(50).f;M.exports=function(X){return function($){for(var J=Y($),Z=H(J),Q=Z.length,ee=0,te=[],ne;Q>ee;)G.call(J,ne=Z[ee++])&&te.push(X?[ne,J[ne]]:J[ne]);return te}}},function(M,U,W){var H=W(36),Y=W(61),G=W(1),X=W(2).Reflect;M.exports=X&&X.ownKeys||function(J){var Z=H.f(G(J)),Q=Y.f;return Q?Z.concat(Q(J)):Z}},function(M,U,W){var H=W(2).parseFloat,Y=W(47).trim;M.exports=1/H(W(86)+'-0')==-Infinity?H:function(X){var $=Y(X+'',3),J=H($);return 0===J&&'-'==$.charAt(0)?-0:J}},function(M,U,W){var H=W(2).parseInt,Y=W(47).trim,G=W(86),X=/^[\-+]?0[xX]/;M.exports=8!==H(G+'08')||22!==H(G+'0x16')?function(J,Z){var Q=Y(J+'',3);return H(Q,Z>>>0||(X.test(Q)?16:10))}:H},function(M){M.exports=Object.is||function(H,Y){return H===Y?0!==H||1/H==1/Y:H!=H&&Y!=Y}},function(M,U,W){var H=W(9),Y=W(85),G=W(20);M.exports=function(X,$,J,Z){var Q=G(X)+'',ee=Q.length,te=void 0===J?' ':J+'',ne=H($);if(ne<=ee||''==te)return Q;var ae=ne-ee,ie=Y.call(te,Math.ceil(ae/te.length));return ie.length>ae&&(ie=ie.slice(0,ae)),Z?ie+Q:Q+ie}},function(M,U,W){U.f=W(5)},function(M,U,W){'use strict';var H=W(103);M.exports=W(54)('Map',function(Y){return function(){return Y(this,0<arguments.length?arguments[0]:void 0)}},{get:function(G){var X=H.getEntry(this,G);return X&&X.v},set:function(G,X){return H.def(this,0===G?0:G,X)}},H,!0)},function(M,U,W){W(6)&&'g'!=/./g.flags&&W(7).f(RegExp.prototype,'flags',{configurable:!0,get:W(56)})},function(M,U,W){'use strict';var H=W(103);M.exports=W(54)('Set',function(Y){return function(){return Y(this,0<arguments.length?arguments[0]:void 0)}},{add:function(G){return H.def(this,G=0===G?0:G,G)}},H)},function(M,U,W){'use strict';var H=W(22)(0),Y=W(14),G=W(30),X=W(111),$=W(105),J=W(4),Z=G.getWeak,Q=Object.isExtensible,ee=$.ufstore,te={},ne,ae=function(se){return function(){return se(this,0<arguments.length?arguments[0]:void 0)}},ie={get:function(le){if(J(le)){var de=Z(le);return!0===de?ee(this).get(le):de?de[this._i]:void 0}},set:function(le,de){return $.def(this,le,de)}},oe=M.exports=W(54)('WeakMap',ae,ie,$,!0,!0);7!=new oe().set((Object.freeze||Object)(te),7).get(te)&&(ne=$.getConstructor(ae),X(ne.prototype,ie),G.NEED=!0,H(['delete','has','get','set'],function(se){var le=oe.prototype,de=le[se];Y(le,se,function(ue,ce){if(J(ue)&&!Q(ue)){this._f||(this._f=new ne);var pe=this._f[se](ue,ce);return'set'==se?this:pe}return de.call(this,ue,ce)})}))},function(M){'use strict';var Y={application:{ecmascript:['es','ecma'],javascript:'js',ogg:'ogx',pdf:'pdf',postscript:['ps','ai','eps','epsi','epsf','eps2','eps3'],'rdf+xml':'rdf',smil:['smi','smil'],'xhtml+xml':['xhtml','xht'],xml:['xml','xsl','xsd','opf','ncx'],zip:'zip','x-httpd-eruby':'rhtml','x-latex':'latex','x-maker':['frm','maker','frame','fm','fb','book','fbdoc'],'x-object':'o','x-shockwave-flash':['swf','swfl'],'x-silverlight':'scr','epub+zip':'epub','font-tdpfr':'pfr','inkml+xml':['ink','inkml'],json:'json','jsonml+json':'jsonml','mathml+xml':'mathml','metalink+xml':'metalink',mp4:'mp4s','omdoc+xml':'omdoc',oxps:'oxps','vnd.amazon.ebook':'azw',widget:'wgt','x-dtbook+xml':'dtb','x-dtbresource+xml':'res','x-font-bdf':'bdf','x-font-ghostscript':'gsf','x-font-linux-psf':'psf','x-font-otf':'otf','x-font-pcf':'pcf','x-font-snf':'snf','x-font-ttf':['ttf','ttc'],'x-font-type1':['pfa','pfb','pfm','afm'],'x-font-woff':'woff','x-mobipocket-ebook':['prc','mobi'],'x-mspublisher':'pub','x-nzb':'nzb','x-tgif':'obj','xaml+xml':'xaml','xml-dtd':'dtd','xproc+xml':'xpl','xslt+xml':'xslt','internet-property-stream':'acx','x-compress':'z','x-compressed':'tgz','x-gzip':'gz'},audio:{flac:'flac',midi:['mid','midi','kar','rmi'],mpeg:['mpga','mpega','mp2','mp3','m4a','mp2a','m2a','m3a'],mpegurl:'m3u',ogg:['oga','ogg','spx'],'x-aiff':['aif','aiff','aifc'],'x-ms-wma':'wma','x-wav':'wav',adpcm:'adp',mp4:'mp4a',webm:'weba','x-aac':'aac','x-caf':'caf','x-matroska':'mka','x-pn-realaudio-plugin':'rmp',xm:'xm',mid:['mid','rmi']},image:{gif:'gif',ief:'ief',jpeg:['jpeg','jpg','jpe'],pcx:'pcx',png:'png','svg+xml':['svg','svgz'],tiff:['tiff','tif'],'x-icon':'ico',bmp:'bmp',webp:'webp','x-pict':['pic','pct'],'x-tga':'tga','cis-cod':'cod'},text:{'cache-manifest':['manifest','appcache'],css:'css',csv:'csv',html:['html','htm','shtml','stm'],mathml:'mml',plain:['txt','text','brf','conf','def','list','log','in','bas'],richtext:'rtx','tab-separated-values':'tsv','x-bibtex':'bib'},video:{mpeg:['mpeg','mpg','mpe','m1v','m2v','mp2','mpa','mpv2'],mp4:['mp4','mp4v','mpg4'],quicktime:['qt','mov'],ogg:'ogv','vnd.mpegurl':['mxu','m4u'],'x-flv':'flv','x-la-asf':['lsf','lsx'],'x-mng':'mng','x-ms-asf':['asf','asx','asr'],'x-ms-wm':'wm','x-ms-wmv':'wmv','x-ms-wmx':'wmx','x-ms-wvx':'wvx','x-msvideo':'avi','x-sgi-movie':'movie','x-matroska':['mpv','mkv','mk3d','mks'],'3gpp2':'3g2',h261:'h261',h263:'h263',h264:'h264',jpeg:'jpgv',jpm:['jpm','jpgm'],mj2:['mj2','mjp2'],'vnd.ms-playready.media.pyv':'pyv','vnd.uvvu.mp4':['uvu','uvvu'],'vnd.vivo':'viv',webm:'webm','x-f4v':'f4v','x-m4v':'m4v','x-ms-vob':'vob','x-smv':'smv'}},G=function(){var ee={},$,J,Z,Q;for($ in Y)if(Y.hasOwnProperty($))for(J in Y[$])if(Y[$].hasOwnProperty(J))if(Z=Y[$][J],'string'==typeof Z)ee[Z]=$+'/'+J;else for(Q=0;Q<Z.length;Q++)ee[Z[Q]]=$+'/'+J;return ee}();M.exports={lookup:function($){return $&&G[$.split('.').pop().toLowerCase()]||'text/plain'}}},function(M,U,W){'use strict';function H(le){return le&&le.__esModule?le:{default:le}}function Y(le,de){if(!(le instanceof de))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function le(de,ue){for(var ce=0,pe;ce<ue.length;ce++)pe=ue[ce],pe.enumerable=pe.enumerable||!1,pe.configurable=!0,'value'in pe&&(pe.writable=!0),Object.defineProperty(de,pe.key,pe)}return function(de,ue,ce){return ue&&le(de.prototype,ue),ce&&le(de,ce),de}}(),X=W(42),$=H(X),J=W(8),Z=W(94),Q=H(Z),ee=W(96),te=H(ee),ne=W(336),ae=H(ne),ie=W(337),oe=H(ie),se=function(){function le(de){Y(this,le),this.name='default',this.View=de.view,this.request=de.request,this.renditionQueue=de.queue,this.q=new te.default(this),this.settings=(0,J.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:'vertical',ignoreClass:''}),(0,J.extend)(this.settings,de.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,layout:this.layout,width:0,height:0}}return G(le,[{key:'render',value:function(ue,ce){this.stage=new ae.default({width:ce.width,height:ce.height,overflow:this.settings.overflow,hidden:this.settings.hidden,axis:this.settings.axis}),this.stage.attachTo(ue),this.container=this.stage.getContainer(),this.views=new oe.default(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout()}},{key:'addEventListeners',value:function(){var ue;window.addEventListener('unload',function(){this.destroy()}.bind(this)),ue=this.settings.height?this.container:window,ue.addEventListener('scroll',this.onScroll.bind(this))}},{key:'removeEventListeners',value:function(){var ue;ue=this.settings.height?this.container:window,ue.removeEventListener('scroll',this.onScroll.bind(this))}},{key:'destroy',value:function(){this.removeEventListeners(),this.views.each(function(ue){ue.destroy()}),this.stage.destroy()}},{key:'onResized',value:function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){this.resize()}.bind(this),150)}},{key:'resize',value:function(ue,ce){this.q.clear(),this._stageSize=this.stage.size(ue,ce),this._bounds=this.bounds(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.views.each(function(pe){pe.size(this._stageSize.width,this._stageSize.height)}.bind(this)),this.emit('resized',{width:this.stage.width,height:this.stage.height})}},{key:'createView',value:function(ue){return new this.View(ue,this.viewSettings)}},{key:'display',value:function(ue,ce){var pe=new J.defer,fe=pe.promise,he=this.views.find(ue);if(he&&ce){var ge=he.locationOf(ce);return this.moveTo(ge),pe.resolve(),fe}return this.clear(),this.add(ue).then(function(ye){if(ce){var me=ye.locationOf(ce);this.moveTo(me)}}.bind(this)).then(function(){var ye;if('pre-paginated'===this.layout.name&&1<this.layout.divisor&&(ye=ue.next(),ye))return this.add(ye)}.bind(this)).then(function(){this.views.show(),pe.resolve()}.bind(this)),fe}},{key:'afterDisplayed',value:function(ue){this.emit('added',ue)}},{key:'afterResized',value:function(ue){this.emit('resize',ue.section)}},{key:'moveTo',value:function(ue){var ce=0,pe=0;'vertical'===this.settings.axis?pe=ue.top:(ce=Math.floor(ue.left/this.layout.delta)*this.layout.delta,ce+this.layout.delta>this.container.scrollWidth&&(ce=this.container.scrollWidth-this.layout.delta)),this.scrollTo(ce,pe,!0)}},{key:'add',value:function(ue){var ce=this.createView(ue);return this.views.append(ce),ce.onDisplayed=this.afterDisplayed.bind(this),ce.onResize=this.afterResized.bind(this),ce.display(this.request)}},{key:'append',value:function(ue){var ce=this.createView(ue);return this.views.append(ce),ce.onDisplayed=this.afterDisplayed.bind(this),ce.onResize=this.afterResized.bind(this),ce.display(this.request)}},{key:'prepend',value:function(ue){var ce=this.createView(ue);return this.views.prepend(ce),ce.onDisplayed=this.afterDisplayed.bind(this),ce.onResize=this.afterResized.bind(this),ce.display(this.request)}},{key:'next',value:function(){var de,ue;if(this.views.length)return('horizontal'===this.settings.axis?(this.scrollLeft=this.container.scrollLeft,ue=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,ue<this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):ue-this.layout.columnWidth===this.container.scrollWidth?(this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0),de=this.views.last().section.next()):de=this.views.last().section.next()):de=this.views.last().section.next(),de)?(this.clear(),this.append(de).then(function(){var ce;if('pre-paginated'===this.layout.name&&1<this.layout.divisor&&(ce=de.next(),ce))return this.append(ce)}.bind(this)).then(function(){this.views.show()}.bind(this))):void 0}},{key:'prev',value:function(){var de,ue;if(this.views.length)return('horizontal'===this.settings.axis?(this.scrollLeft=this.container.scrollLeft,ue=this.container.scrollLeft,0<ue?this.scrollBy(-this.layout.delta,0,!0):de=this.views.first().section.prev()):de=this.views.first().section.prev(),de)?(this.clear(),this.prepend(de).then(function(){var ce;if('pre-paginated'===this.layout.name&&1<this.layout.divisor&&(ce=de.prev(),ce))return this.prepend(ce)}.bind(this)).then(function(){'horizontal'===this.settings.axis&&this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0),this.views.show()}.bind(this))):void 0}},{key:'current',value:function(){var ue=this.visible();return ue.length?ue[ue.length-1]:null}},{key:'clear',value:function(){this.views.hide(),this.scrollTo(0,0,!0),this.views.clear()}},{key:'currentLocation',value:function(){return this.location='vertical'===this.settings.axis?this.scrolledLocation():this.paginatedLocation(),this.location}},{key:'scrolledLocation',value:function(){var ue=this.visible(),ve=this.container.getBoundingClientRect(),be=ve.height<window.innerHeight?ve.height:window.innerHeight,xe=0,ce,pe,fe,he,ge,ye,me;return this.settings.height||(xe=window.scrollY),1===ue.length?(fe=ve.top-ue[0].position().top+xe,ge=fe+be,ce=this.mapping.page(ue[0].contents,ue[0].section.cfiBase,fe,ge),{index:ue[0].section.index,href:ue[0].section.href,start:ce.start,end:ce.end}):1<ue.length?(me=ue.length-1,fe=ve.top-ue[0].position().top+xe,ge=fe+(ve.top-ue[0].position().bottom),he=ve.top-ue[me].position().top+xe,ye=be-he,ce=this.mapping.page(ue[0].contents,ue[0].section.cfiBase,fe,ge),pe=this.mapping.page(ue[me].contents,ue[me].section.cfiBase,he,ye),{index:ue[me].section.index,href:ue[me].section.href,start:ce.start,end:pe.end}):void 0}},{key:'paginatedLocation',value:function(){var ue=this.visible(),me=this.container.getBoundingClientRect(),ce,pe,fe,he,ge,ye,ve;return 1===ue.length?(ce=me.left-ue[0].position().left,fe=ce+this.layout.spreadWidth+this.layout.gap,ge=this.mapping.page(ue[0].contents,ue[0].section.cfiBase,ce,fe),{index:ue[0].section.index,href:ue[0].section.href,start:ge.start,end:ge.end}):1<ue.length?(ve=ue.length-1,ce=me.left-ue[0].position().left,fe=ce+this.layout.columnWidth+this.layout.gap/2,pe=me.left+this.layout.spreadWidth-ue[ve].position().left,he=pe+this.layout.columnWidth+this.layout.gap/2,ge=this.mapping.page(ue[0].contents,ue[0].section.cfiBase,ce,fe),ye=this.mapping.page(ue[ve].contents,ue[ve].section.cfiBase,pe,he),{index:ue[ve].section.index,href:ue[ve].section.href,start:ge.start,end:ye.end}):void 0}},{key:'isVisible',value:function(ue,ce,pe,fe){var he=ue.position(),ge=fe||this.bounds();return'horizontal'===this.settings.axis&&he.right>ge.left-ce&&he.left<ge.right+pe||'vertical'===this.settings.axis&&he.bottom>ge.top-ce&&he.top<ge.bottom+pe}},{key:'visible',value:function(){for(var ue=this.bounds(),ce=this.views.displayed(),pe=ce.length,de=[],ge=0,fe,he;ge<pe;ge++)he=ce[ge],fe=this.isVisible(he,0,0,ue),!0===fe&&de.push(he);return de}},{key:'scrollBy',value:function(ue,ce,pe){pe&&(this.ignore=!0),this.settings.height?(ue&&(this.container.scrollLeft+=ue),ce&&(this.container.scrollTop+=ce)):window.scrollBy(ue,ce),this.scrolled=!0}},{key:'scrollTo',value:function(ue,ce,pe){pe&&(this.ignore=!0),this.settings.height?(this.container.scrollLeft=ue,this.container.scrollTop=ce):window.scrollTo(ue,ce),this.scrolled=!0}},{key:'onScroll',value:function(){var ue,ce;this.settings.height?(ue=this.container.scrollTop,ce=this.container.scrollLeft):(ue=window.scrollY,ce=window.scrollX),this.scrollTop=ue,this.scrollLeft=ce,this.ignore?this.ignore=!1:(console.log('scroll',ce,ue),this.emit('scroll',{top:ue,left:ce}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit('scrolled',{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}},{key:'bounds',value:function(){var de;return de=this.stage.bounds(),de}},{key:'applyLayout',value:function(ue){this.layout=ue,this.updateLayout(),this.mapping=new Q.default(this.layout.props)}},{key:'updateLayout',value:function(){this.stage&&(this._stageSize=this.stage.size(),'vertical'===this.settings.axis?this.layout.calculate(this._stageSize.width,this._stageSize.height):(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta,this.stage.addStyleRules('iframe',[{'margin-right':this.layout.gap+'px'}])),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}},{key:'setLayout',value:function(ue){this.viewSettings.layout=ue,this.views&&this.views.each(function(ce){ce.setLayout(ue)})}},{key:'updateFlow',value:function(ue){var ce='paginated'===ue?'horizontal':'vertical';this.settings.axis=ce,this.viewSettings.axis=ce,this.settings.overflow='paginated'===ue?'hidden':'auto'}},{key:'getContents',value:function(){var ue=[];return this.views.each(function(ce){ue.push(ce.contents)}),ue}}]),le}();(0,$.default)(se.prototype),U.default=se,M.exports=U['default']},function(M,U,W){'use strict';function H(ge){return ge&&ge.__esModule?ge:{default:ge}}function Y(ge,ye){if(!(ge instanceof ye))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(ge){return typeof ge}:function(ge){return ge&&'function'==typeof Symbol&&ge.constructor===Symbol&&ge!==Symbol.prototype?'symbol':typeof ge},X=function(){function ge(ye,me){for(var ve=0,be;ve<me.length;ve++)be=me[ve],be.enumerable=be.enumerable||!1,be.configurable=!0,'value'in be&&(be.writable=!0),Object.defineProperty(ye,be.key,be)}return function(ye,me,ve){return me&&ge(ye.prototype,me),ve&&ge(ye,ve),ye}}(),$=W(42),J=H($),Z=W(8),Q=W(95),ee=H(Q),te=W(25),ne=H(te),ae=W(96),ie=H(ae),oe=W(333),se=H(oe),le=W(94),de=H(le),ue=W(345),ce=H(ue),pe=W(93),fe=H(pe),he=function(){function ge(ye,me){Y(this,ge),this.settings=(0,Z.extend)(this.settings||{},{width:null,height:null,ignoreClass:'',manager:'default',view:'iframe',flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,script:null}),(0,Z.extend)(this.settings,me),'object'===G(this.settings.manager)&&(this.manager=this.settings.manager),this.viewSettings={ignoreClass:this.settings.ignoreClass},this.book=ye,this.views=null,this.hooks={},this.hooks.display=new ee.default(this),this.hooks.serialize=new ee.default(this),this.hooks.content=new ee.default(this),this.hooks.layout=new ee.default(this),this.hooks.render=new ee.default(this),this.hooks.show=new ee.default(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new ce.default(this),this.epubcfi=new ne.default,this.q=new ie.default(this),this.q.enqueue(this.book.opened),this.starting=new Z.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}return X(ge,[{key:'setManager',value:function(me){this.manager=me}},{key:'requireManager',value:function(me){var ve;return ve='string'==typeof me?'undefined'==typeof ePub?void 0:ePub.ViewManagers[me]:me,ve}},{key:'requireView',value:function(me){var ve;return ve='string'==typeof me?'undefined'==typeof ePub?void 0:ePub.Views[me]:me,ve}},{key:'start',value:function(){this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on('added',this.afterDisplayed.bind(this)),this.manager.on('resized',this.onResized.bind(this)),this.manager.on('scrolled',this.reportLocation.bind(this)),this.emit('started'),this.starting.resolve()}},{key:'attachTo',value:function(me){return this.q.enqueue(function(){this.manager.render(me,{width:this.settings.width,height:this.settings.height}),this.emit('attached')}.bind(this))}},{key:'display',value:function(me){return this.q.enqueue(this._display,me)}},{key:'_display',value:function(me){if(this.book){var ve=this.epubcfi.isCfiString(me),be=new Z.defer,xe=be.promise,ke;return this.book.locations.length&&(0,Z.isFloat)(me)&&(me=this.book.locations.cfiFromPercentage(me)),ke=this.book.spine.get(me),ke?this.manager.display(ke,me).then(function(){this.emit('displayed',ke),this.reportLocation()}.bind(this)):(be.reject(new Error('No Section Found')),xe)}}},{key:'afterDisplayed',value:function(me){this.hooks.content.trigger(me.contents,this),this.emit('rendered',me.section)}},{key:'onResized',value:function(me){this.location&&this.display(this.location.start),this.emit('resized',{width:me.width,height:me.height})}},{key:'moveTo',value:function(me){this.manager.moveTo(me)}},{key:'next',value:function(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}},{key:'prev',value:function(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}},{key:'determineLayoutProperties',value:function(me){var be=this.settings.layout||me.layout||'reflowable',xe=this.settings.spread||me.spread||'auto',ke=this.settings.orientation||me.orientation||'auto',_e=this.settings.flow||me.flow||'auto',we=me.viewport||'',Se=this.settings.minSpreadWidth||me.minSpreadWidth||800,ve;return 0<=this.settings.width&&0<=this.settings.height&&(we='width='+this.settings.width+', height='+this.settings.height+''),ve={layout:be,spread:xe,orientation:ke,flow:_e,viewport:we,minSpreadWidth:Se},ve}},{key:'flow',value:function(me){var ve=me;('scrolled-doc'===me||'scrolled-continuous'===me)&&(ve='scrolled'),('auto'===me||'paginated'===me)&&(ve='paginated'),this._layout&&this._layout.flow(ve),this.manager&&this.manager.updateFlow(ve)}},{key:'layout',value:function(me){return me&&(this._layout=new se.default(me),this._layout.spread(me.spread,this.settings.minSpreadWidth),this.mapping=new de.default(this._layout.props)),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}},{key:'spread',value:function(me,ve){this._layout.spread(me,ve),this.manager.isRendered()&&this.manager.updateLayout()}},{key:'reportLocation',value:function(){return this.q.enqueue(function(){var me=this.manager.currentLocation();me&&me.then&&'function'==typeof me.then?me.then(function(ve){this.location=ve,this.percentage=this.book.locations.percentageFromCfi(ve),null!=this.percentage&&(this.location.percentage=this.percentage),this.emit('locationChanged',this.location)}.bind(this)):me&&(this.location=me,this.percentage=this.book.locations.percentageFromCfi(me),null!=this.percentage&&(this.location.percentage=this.percentage),this.emit('locationChanged',this.location))}.bind(this))}},{key:'currentLocation',value:function(){var me=this.manager.currentLocation();if(me&&me.then&&'function'==typeof me.then)me.then(function(be){var xe=this.book.locations.percentageFromCfi(be);return null!=xe&&(be.percentage=xe),be}.bind(this));else if(me){var ve=this.book.locations.percentageFromCfi(me);return null!=ve&&(me.percentage=ve),me}}},{key:'destroy',value:function(){this.manager&&this.manager.destroy(),this.book=void 0,this.views=null}},{key:'passEvents',value:function(me){var ve=fe.default.listenedEvents;ve.forEach(function(be){me.on(be,this.triggerViewEvent.bind(this))}.bind(this)),me.on('selected',this.triggerSelectedEvent.bind(this))}},{key:'triggerViewEvent',value:function(me){this.emit(me.type,me)}},{key:'triggerSelectedEvent',value:function(me){this.emit('selected',me)}},{key:'getRange',value:function(me,ve){var be=new ne.default(me),xe=this.manager.visible().filter(function(ke){if(be.spinePos===ke.index)return!0});if(xe.length)return xe[0].contents.range(be,ve)}},{key:'adjustImages',value:function(me){return'pre-paginated'===this._layout.name?new Promise(function(ve){ve()}):(me.addStylesheetRules({img:{'max-width':this._layout.columnWidth+'px !important','max-height':this._layout.height+'px !important','object-fit':'contain','page-break-inside':'avoid'}}),new Promise(function(ve){setTimeout(function(){ve()},1)}))}},{key:'getContents',value:function(){return this.manager?this.manager.getContents():[]}},{key:'handleLinks',value:function(me){var ve=this;me.on('link',function(be){var xe=ve.book.path.relative(be);ve.display(xe)})}},{key:'injectStylesheet',value:function(me){var be=me.createElement('link');be.setAttribute('type','text/css'),be.setAttribute('rel','stylesheet'),be.setAttribute('href',this.settings.stylesheet),me.getElementsByTagName('head')[0].appendChild(be)}},{key:'injectScript',value:function(me){var be=me.createElement('script');be.setAttribute('type','text/javascript'),be.setAttribute('src',this.settings.script),be.textContent=' ',me.getElementsByTagName('head')[0].appendChild(be)}}]),ge}();(0,J.default)(he.prototype),U.default=he,M.exports=U['default']},function(M){M.exports=N},function(M,U,W){'use strict';(function(H){function Y(X,$,J){X[$]||Object[G](X,$,{writable:!0,configurable:!0,value:J})}if(W(329),W(146),W(149),H._babelPolyfill)throw new Error('only one instance of babel-polyfill is allowed');H._babelPolyfill=!0;var G='defineProperty';Y(String.prototype,'padLeft',''.padStart),Y(String.prototype,'padRight',''.padEnd),'pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill'.split(',').forEach(function(X){[][X]&&Y(Array,X,Function.call.bind([][X]))})}).call(U,W(92))},function(M,U){'use strict';var H,Y,G,X='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function($){return typeof $}:function($){return $&&'function'==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?'symbol':typeof $};(function($,J){Y=[],H=J,G='function'==typeof H?H.apply(U,Y):H,!(G!==void 0&&(M.exports=G))})(void 0,function($){function J(he){return void 0!==le[he]}function Z(){ae.call(this),this._isInvalid=!0}function Q(he){return''==he&&Z.call(this),he.toLowerCase()}function ee(he){var ge=he.charCodeAt(0);return 32<ge&&127>ge&&-1==[34,35,60,62,63,96].indexOf(ge)?he:encodeURIComponent(he)}function te(he){var ge=he.charCodeAt(0);return 32<ge&&127>ge&&-1==[34,35,60,62,96].indexOf(ge)?he:encodeURIComponent(he)}function ne(he,ge,ye){function me(Ne){we.push(Ne)}var ve=ge||'scheme start',be=0,xe='',ke=!1,_e=!1,we=[];loop:for(;(he[be-1]!=ue||0==be)&&!this._isInvalid;){var Se=he[be];switch(ve){case'scheme start':if(Se&&ce.test(Se))xe+=Se.toLowerCase(),ve='scheme';else if(!ge){xe='',ve='no scheme';continue}else{me('Invalid scheme.');break loop}break;case'scheme':if(Se&&pe.test(Se))xe+=Se.toLowerCase();else if(':'==Se){if(this._scheme=xe,xe='',ge)break loop;J(this._scheme)&&(this._isRelative=!0),ve='file'==this._scheme?'relative':this._isRelative&&ye&&ye._scheme==this._scheme?'relative or authority':this._isRelative?'authority first slash':'scheme data'}else if(!ge){xe='',be=0,ve='no scheme';continue}else if(ue==Se)break loop;else{me('Code point not allowed in scheme: '+Se);break loop}break;case'scheme data':'?'==Se?(this._query='?',ve='query'):'#'==Se?(this._fragment='#',ve='fragment'):ue!=Se&&'\t'!=Se&&'\n'!=Se&&'\r'!=Se&&(this._schemeData+=ee(Se));break;case'no scheme':if(!ye||!J(ye._scheme))me('Missing scheme.'),Z.call(this);else{ve='relative';continue}break;case'relative or authority':if('/'==Se&&'/'==he[be+1])ve='authority ignore slashes';else{me('Expected /, got: '+Se),ve='relative';continue}break;case'relative':if(this._isRelative=!0,'file'!=this._scheme&&(this._scheme=ye._scheme),ue==Se){this._host=ye._host,this._port=ye._port,this._path=ye._path.slice(),this._query=ye._query,this._username=ye._username,this._password=ye._password;break loop}else if('/'==Se||'\\'==Se)'\\'==Se&&me('\\ is an invalid code point.'),ve='relative slash';else if('?'==Se)this._host=ye._host,this._port=ye._port,this._path=ye._path.slice(),this._query='?',this._username=ye._username,this._password=ye._password,ve='query';else if('#'==Se)this._host=ye._host,this._port=ye._port,this._path=ye._path.slice(),this._query=ye._query,this._fragment='#',this._username=ye._username,this._password=ye._password,ve='fragment';else{var Ee=he[be+1],Pe=he[be+2];'file'==this._scheme&&ce.test(Se)&&(':'==Ee||'|'==Ee)&&(ue==Pe||'/'==Pe||'\\'==Pe||'?'==Pe||'#'==Pe)||(this._host=ye._host,this._port=ye._port,this._username=ye._username,this._password=ye._password,this._path=ye._path.slice(),this._path.pop()),ve='relative path';continue}break;case'relative slash':if('/'==Se||'\\'==Se)'\\'==Se&&me('\\ is an invalid code point.'),ve='file'==this._scheme?'file host':'authority ignore slashes';else{'file'!=this._scheme&&(this._host=ye._host,this._port=ye._port,this._username=ye._username,this._password=ye._password),ve='relative path';continue}break;case'authority first slash':if('/'==Se)ve='authority second slash';else{me('Expected \'/\', got: '+Se),ve='authority ignore slashes';continue}break;case'authority second slash':if(ve='authority ignore slashes','/'!=Se){me('Expected \'/\', got: '+Se);continue}break;case'authority ignore slashes':if('/'!=Se&&'\\'!=Se){ve='authority';continue}else me('Expected authority, got: '+Se);break;case'authority':if('@'==Se){ke&&(me('@ already seen.'),xe+='%40'),ke=!0;for(var Te=0,Ce;Te<xe.length;Te++){if(Ce=xe[Te],'\t'==Ce||'\n'==Ce||'\r'==Ce){me('Invalid whitespace in authority.');continue}if(':'==Ce&&null===this._password){this._password='';continue}var Re=ee(Ce);null===this._password?this._username+=Re:this._password+=Re}xe=''}else if(ue==Se||'/'==Se||'\\'==Se||'?'==Se||'#'==Se){be-=xe.length,xe='',ve='host';continue}else xe+=Se;break;case'file host':if(ue==Se||'/'==Se||'\\'==Se||'?'==Se||'#'==Se){2==xe.length&&ce.test(xe[0])&&(':'==xe[1]||'|'==xe[1])?ve='relative path':0==xe.length?ve='relative path start':(this._host=Q.call(this,xe),xe='',ve='relative path start');continue}else'\t'==Se||'\n'==Se||'\r'==Se?me('Invalid whitespace in file host.'):xe+=Se;break;case'host':case'hostname':if(':'==Se&&!_e){if(this._host=Q.call(this,xe),xe='',ve='port','hostname'==ge)break loop;}else if(ue==Se||'/'==Se||'\\'==Se||'?'==Se||'#'==Se){if(this._host=Q.call(this,xe),xe='',ve='relative path start',ge)break loop;continue}else'\t'!=Se&&'\n'!=Se&&'\r'!=Se?('['==Se?_e=!0:']'==Se&&(_e=!1),xe+=Se):me('Invalid code point in host/hostname: '+Se);break;case'port':if(/[0-9]/.test(Se))xe+=Se;else if(ue==Se||'/'==Se||'\\'==Se||'?'==Se||'#'==Se||ge){if(''!=xe){var Oe=parseInt(xe,10);Oe!=le[this._scheme]&&(this._port=Oe+''),xe=''}if(ge)break loop;ve='relative path start';continue}else'\t'==Se||'\n'==Se||'\r'==Se?me('Invalid code point in port: '+Se):Z.call(this);break;case'relative path start':if('\\'==Se&&me('\'\\\' not allowed in path.'),ve='relative path','/'!=Se&&'\\'!=Se)continue;break;case'relative path':if(ue==Se||'/'==Se||'\\'==Se||!ge&&('?'==Se||'#'==Se)){'\\'==Se&&me('\\ not allowed in relative path.');var Le;(Le=de[xe.toLowerCase()])&&(xe=Le),'..'==xe?(this._path.pop(),'/'!=Se&&'\\'!=Se&&this._path.push('')):'.'==xe&&'/'!=Se&&'\\'!=Se?this._path.push(''):'.'!=xe&&('file'==this._scheme&&0==this._path.length&&2==xe.length&&ce.test(xe[0])&&'|'==xe[1]&&(xe=xe[0]+':'),this._path.push(xe)),xe='','?'==Se?(this._query='?',ve='query'):'#'==Se&&(this._fragment='#',ve='fragment')}else'\t'!=Se&&'\n'!=Se&&'\r'!=Se&&(xe+=ee(Se));break;case'query':ge||'#'!=Se?ue!=Se&&'\t'!=Se&&'\n'!=Se&&'\r'!=Se&&(this._query+=te(Se)):(this._fragment='#',ve='fragment');break;case'fragment':ue!=Se&&'\t'!=Se&&'\n'!=Se&&'\r'!=Se&&(this._fragment+=Se);}be++}}function ae(){this._scheme='',this._schemeData='',this._username='',this._password=null,this._host='',this._port='',this._path=[],this._query='',this._fragment='',this._isInvalid=!1,this._isRelative=!1}function ie(he,ge){void 0===ge||ge instanceof ie||(ge=new ie(ge+'')),this._url=he,ae.call(this);var ye=he.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,'');ne.call(this,ye,null,ge)}var oe=!1;if(!$.forceJURL)try{var se=new URL('b','http://a');se.pathname='c%20d',oe='http://a/c%20d'===se.href}catch(he){}if(oe)return $.URL;var le=Object.create(null);le.ftp=21,le.file=0,le.gopher=70,le.http=80,le.https=443,le.ws=80,le.wss=443;var de=Object.create(null);de['%2e']='.',de['.%2e']='..',de['%2e.']='..',de['%2e%2e']='..';var ce=/[a-zA-Z]/,pe=/[a-zA-Z0-9\+\-\.]/,ue;ie.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var he='';return(''!=this._username||null!=this._password)&&(he=this._username+(null==this._password?'':':'+this._password)+'@'),this.protocol+(this._isRelative?'//'+he+this.host:'')+this.pathname+this._query+this._fragment},set href(he){ae.call(this),ne.call(this,he)},get protocol(){return this._scheme+':'},set protocol(he){this._isInvalid||ne.call(this,he+':','scheme start')},get host(){return this._isInvalid?'':this._port?this._host+':'+this._port:this._host},set host(he){this._isInvalid||!this._isRelative||ne.call(this,he,'host')},get hostname(){return this._host},set hostname(he){this._isInvalid||!this._isRelative||ne.call(this,he,'hostname')},get port(){return this._port},set port(he){this._isInvalid||!this._isRelative||ne.call(this,he,'port')},get pathname(){return this._isInvalid?'':this._isRelative?'/'+this._path.join('/'):this._schemeData},set pathname(he){this._isInvalid||!this._isRelative||(this._path=[],ne.call(this,he,'relative path start'))},get search(){return this._isInvalid||!this._query||'?'==this._query?'':this._query},set search(he){this._isInvalid||!this._isRelative||(this._query='?','?'==he[0]&&(he=he.slice(1)),ne.call(this,he,'query'))},get hash(){return this._isInvalid||!this._fragment||'#'==this._fragment?'':this._fragment},set hash(he){this._isInvalid||(this._fragment='#','#'==he[0]&&(he=he.slice(1)),ne.call(this,he,'fragment'))},get origin(){var he;if(this._isInvalid||!this._scheme)return'';switch(this._scheme){case'file':return'file://';case'data':case'javascript':case'mailto':return'null';}return he=this.host,he?this._scheme+'://'+he:''}};var fe=$.URL;return fe&&(ie.createObjectURL=function(){return fe.createObjectURL.apply(fe,arguments)},ie.revokeObjectURL=function(he){fe.revokeObjectURL(he)}),ie})},function(M,U,W){'use strict';(function(H){function Y(ae){return ae&&ae.__esModule?ae:{default:ae}}function G(ae,ie){return new $.default(ae,ie)}Object.defineProperty(U,'__esModule',{value:!0});var X=W(331),$=Y(X),J=W(25),Z=Y(J),Q=W(128),ee=Y(Q),te=W(93),ne=Y(te);G.VERSION='0.3','undefined'!=typeof H&&(H.EPUBJS_VERSION=G.VERSION),G.CFI=Z.default,G.Rendition=ee.default,G.Contents=ne.default,G.ViewManagers={},G.Views={},G.register={manager:function(ie,oe){return G.ViewManagers[ie]=oe},view:function(ie,oe){return G.Views[ie]=oe}},G.register.view('iframe',W(338)),G.register.manager('default',W(127)),G.register.manager('continuous',W(335)),U.default=G,M.exports=U['default']}).call(U,W(92))},function(M,U,W){'use strict';M.exports=W(134)()?Object.assign:W(135)},function(M){'use strict';M.exports=function(){var H=Object.assign,Y;return!('function'!=typeof H)&&(Y={foo:'raz'},H(Y,{bar:'dwa'},{trzy:'trzy'}),'razdwatrzy'===Y.foo+Y.bar+Y.trzy)}},function(M,U,W){'use strict';var H=W(137),Y=W(142),G=Math.max;M.exports=function(X,$){var Q=G(arguments.length,2),J,Z,ee;for(X=Object(Y(X)),ee=function(te){try{X[te]=$[te]}catch(ne){J||(J=ne)}},Z=1;Z<Q;++Z)$=arguments[Z],H($).forEach(ee);if(J!==void 0)throw J;return X}},function(M){'use strict';M.exports=function(H){return'function'==typeof H}},function(M,U,W){'use strict';M.exports=W(138)()?Object.keys:W(139)},function(M){'use strict';M.exports=function(){try{return Object.keys('primitive'),!0}catch(H){return!1}}},function(M){'use strict';var H=Object.keys;M.exports=function(Y){return H(null==Y?Y:Object(Y))}},function(M){'use strict';var H=Array.prototype.forEach,Y=Object.create,G=function(X,$){for(var J in X)$[J]=X[J]};M.exports=function(){var $=Y(null);return H.call(arguments,function(J){null==J||G(Object(J),$)}),$}},function(M){'use strict';M.exports=function(H){if('function'!=typeof H)throw new TypeError(H+' is not a function');return H}},function(M){'use strict';M.exports=function(H){if(null==H)throw new TypeError('Cannot use null or undefined');return H}},function(M,U,W){'use strict';M.exports=W(144)()?String.prototype.contains:W(145)},function(M){'use strict';var H='razdwatrzy';M.exports=function(){return!('function'!=typeof H.contains)&&!0===H.contains('dwa')&&!1===H.contains('foo')}},function(M){'use strict';var H=String.prototype.indexOf;M.exports=function(Y){return-1<H.call(this,Y,arguments[1])}},function(M,U,W){(function(H,Y){!function(G){'use strict';function X(Te,Ce,Re,Oe){var Le=Ce&&Ce.prototype instanceof J?Ce:J,Ne=Object.create(Le.prototype),Ae=new se(Oe||[]);return Ne._invoke=ne(Te,Re,Ae),Ne}function $(Te,Ce,Re){try{return{type:'normal',arg:Te.call(Ce,Re)}}catch(Oe){return{type:'throw',arg:Oe}}}function J(){}function Z(){}function Q(){}function ee(Te){['next','throw','return'].forEach(function(Ce){Te[Ce]=function(Re){return this._invoke(Ce,Re)}})}function te(Te){function Ce(Le,Ne,Ae,Ie){var Fe=$(Te[Le],Te,Ne);if('throw'===Fe.type)Ie(Fe.arg);else{var ze=Fe.arg,qe=ze.value;return qe&&'object'==typeof qe&&ce.call(qe,'__await')?Promise.resolve(qe.__await).then(function(je){Ce('next',je,Ae,Ie)},function(je){Ce('throw',je,Ae,Ie)}):Promise.resolve(qe).then(function(je){ze.value=je,Ae(ze)},Ie)}}'object'==typeof Y&&Y.domain&&(Ce=Y.domain.bind(Ce));var Oe;this._invoke=function(Le,Ne){function Ae(){return new Promise(function(Ie,Fe){Ce(Le,Ne,Ie,Fe)})}return Oe=Oe?Oe.then(Ae,Ae):Ae()}}function ne(Te,Ce,Re){var Oe=ve;return function(Ne,Ae){if(Oe==xe)throw new Error('Generator is already running');if(Oe==ke){if('throw'===Ne)throw Ae;return de()}for(Re.method=Ne,Re.arg=Ae;;){var Ie=Re.delegate;if(Ie){var Fe=ae(Ie,Re);if(Fe){if(Fe===_e)continue;return Fe}}if('next'===Re.method)Re.sent=Re._sent=Re.arg;else if('throw'===Re.method){if(Oe==ve)throw Oe=ke,Re.arg;Re.dispatchException(Re.arg)}else'return'===Re.method&&Re.abrupt('return',Re.arg);Oe=xe;var ze=$(Te,Ce,Re);if('normal'===ze.type){if(Oe=Re.done?ke:be,ze.arg===_e)continue;return{value:ze.arg,done:Re.done}}'throw'===ze.type&&(Oe=ke,Re.method='throw',Re.arg=ze.arg)}}}function ae(Te,Ce){var Re=Te.iterator[Ce.method];if(Re===pe){if(Ce.delegate=null,'throw'===Ce.method){if(Te.iterator.return&&(Ce.method='return',Ce.arg=pe,ae(Te,Ce),'throw'===Ce.method))return _e;Ce.method='throw',Ce.arg=new TypeError('The iterator does not provide a \'throw\' method')}return _e}var Oe=$(Re,Te.iterator,Ce.arg);if('throw'===Oe.type)return Ce.method='throw',Ce.arg=Oe.arg,Ce.delegate=null,_e;var Le=Oe.arg;if(!Le)return Ce.method='throw',Ce.arg=new TypeError('iterator result is not an object'),Ce.delegate=null,_e;if(Le.done)Ce[Te.resultName]=Le.value,Ce.next=Te.nextLoc,'return'!==Ce.method&&(Ce.method='next',Ce.arg=pe);else return Le;return Ce.delegate=null,_e}function ie(Te){var Ce={tryLoc:Te[0]};1 in Te&&(Ce.catchLoc=Te[1]),2 in Te&&(Ce.finallyLoc=Te[2],Ce.afterLoc=Te[3]),this.tryEntries.push(Ce)}function oe(Te){var Ce=Te.completion||{};Ce.type='normal',delete Ce.arg,Te.completion=Ce}function se(Te){this.tryEntries=[{tryLoc:'root'}],Te.forEach(ie,this),this.reset(!0)}function le(Te){if(Te){var Ce=Te[he];if(Ce)return Ce.call(Te);if('function'==typeof Te.next)return Te;if(!isNaN(Te.length)){var Re=-1,Oe=function Le(){for(;++Re<Te.length;)if(ce.call(Te,Re))return Le.value=Te[Re],Le.done=!1,Le;return Le.value=pe,Le.done=!0,Le};return Oe.next=Oe}}return{next:de}}function de(){return{value:pe,done:!0}}var ue=Object.prototype,ce=ue.hasOwnProperty,pe,fe='function'==typeof Symbol?Symbol:{},he=fe.iterator||'@@iterator',ge=fe.toStringTag||'@@toStringTag',ye='object'==typeof M,me=G.regeneratorRuntime;if(me)return void(ye&&(M.exports=me));me=G.regeneratorRuntime=ye?M.exports:{},me.wrap=X;var ve='suspendedStart',be='suspendedYield',xe='executing',ke='completed',_e={},we={};we[he]=function(){return this};var Se=Object.getPrototypeOf,Ee=Se&&Se(Se(le([])));Ee&&Ee!==ue&&ce.call(Ee,he)&&(we=Ee);var Pe=Q.prototype=J.prototype=Object.create(we);Z.prototype=Pe.constructor=Q,Q.constructor=Z,Q[ge]=Z.displayName='GeneratorFunction',me.isGeneratorFunction=function(Te){var Ce='function'==typeof Te&&Te.constructor;return!!Ce&&(Ce===Z||'GeneratorFunction'===(Ce.displayName||Ce.name))},me.mark=function(Te){return Object.setPrototypeOf?Object.setPrototypeOf(Te,Q):(Te.__proto__=Q,!(ge in Te)&&(Te[ge]='GeneratorFunction')),Te.prototype=Object.create(Pe),Te},me.awrap=function(Te){return{__await:Te}},ee(te.prototype),me.AsyncIterator=te,me.async=function(Te,Ce,Re,Oe){var Le=new te(X(Te,Ce,Re,Oe));return me.isGeneratorFunction(Ce)?Le:Le.next().then(function(Ne){return Ne.done?Ne.value:Le.next()})},ee(Pe),Pe[ge]='Generator',Pe.toString=function(){return'[object Generator]'},me.keys=function(Te){var Ce=[];for(var Re in Te)Ce.push(Re);return Ce.reverse(),function Oe(){for(;Ce.length;){var Le=Ce.pop();if(Le in Te)return Oe.value=Le,Oe.done=!1,Oe}return Oe.done=!0,Oe}},me.values=le,se.prototype={constructor:se,reset:function(Te){if(this.prev=0,this.next=0,this.sent=this._sent=pe,this.done=!1,this.delegate=null,this.method='next',this.arg=pe,this.tryEntries.forEach(oe),!Te)for(var Ce in this)'t'===Ce.charAt(0)&&ce.call(this,Ce)&&!isNaN(+Ce.slice(1))&&(this[Ce]=pe)},stop:function(){this.done=!0;var Te=this.tryEntries[0],Ce=Te.completion;if('throw'===Ce.type)throw Ce.arg;return this.rval},dispatchException:function(Te){function Ce(Fe,ze){return Ne.type='throw',Ne.arg=Te,Re.next=Fe,ze&&(Re.method='next',Re.arg=pe),!!ze}if(this.done)throw Te;for(var Re=this,Oe=this.tryEntries.length-1;0<=Oe;--Oe){var Le=this.tryEntries[Oe],Ne=Le.completion;if('root'===Le.tryLoc)return Ce('end');if(Le.tryLoc<=this.prev){var Ae=ce.call(Le,'catchLoc'),Ie=ce.call(Le,'finallyLoc');if(Ae&&Ie){if(this.prev<Le.catchLoc)return Ce(Le.catchLoc,!0);if(this.prev<Le.finallyLoc)return Ce(Le.finallyLoc)}else if(Ae){if(this.prev<Le.catchLoc)return Ce(Le.catchLoc,!0);}else if(!Ie)throw new Error('try statement without catch or finally');else if(this.prev<Le.finallyLoc)return Ce(Le.finallyLoc)}}},abrupt:function(Te,Ce){for(var Re=this.tryEntries.length-1,Oe;0<=Re;--Re)if(Oe=this.tryEntries[Re],Oe.tryLoc<=this.prev&&ce.call(Oe,'finallyLoc')&&this.prev<Oe.finallyLoc){var Le=Oe;break}Le&&('break'===Te||'continue'===Te)&&Le.tryLoc<=Ce&&Ce<=Le.finallyLoc&&(Le=null);var Ne=Le?Le.completion:{};return Ne.type=Te,Ne.arg=Ce,Le?(this.method='next',this.next=Le.finallyLoc,_e):this.complete(Ne)},complete:function(Te,Ce){if('throw'===Te.type)throw Te.arg;return'break'===Te.type||'continue'===Te.type?this.next=Te.arg:'return'===Te.type?(this.rval=this.arg=Te.arg,this.method='return',this.next='end'):'normal'===Te.type&&Ce&&(this.next=Ce),_e},finish:function(Te){for(var Ce=this.tryEntries.length-1,Re;0<=Ce;--Ce)if(Re=this.tryEntries[Ce],Re.finallyLoc===Te)return this.complete(Re.completion,Re.afterLoc),oe(Re),_e},'catch':function(Te){for(var Ce=this.tryEntries.length-1,Re;0<=Ce;--Ce)if(Re=this.tryEntries[Ce],Re.tryLoc===Te){var Oe=Re.completion;if('throw'===Oe.type){var Le=Oe.arg;oe(Re)}return Le}throw new Error('illegal catch attempt')},delegateYield:function(Te,Ce,Re){return this.delegate={iterator:le(Te),resultName:Ce,nextLoc:Re},'next'===this.method&&(this.arg=pe),_e}}}('object'==typeof H?H:'object'==typeof window?window:'object'==typeof self?self:this)}).call(U,W(92),W(147))},function(M){function W(){throw new Error('setTimeout has not been defined')}function H(){throw new Error('clearTimeout has not been defined')}function Y(se){if(ee===setTimeout)return setTimeout(se,0);if((ee===W||!ee)&&setTimeout)return ee=setTimeout,setTimeout(se,0);try{return ee(se,0)}catch(le){try{return ee.call(null,se,0)}catch(de){return ee.call(this,se,0)}}}function G(se){if(te===clearTimeout)return clearTimeout(se);if((te===H||!te)&&clearTimeout)return te=clearTimeout,clearTimeout(se);try{return te(se)}catch(le){try{return te.call(null,se)}catch(de){return te.call(this,se)}}}function X(){ae&&ie&&(ae=!1,ie.length?ne=ie.concat(ne):oe=-1,ne.length&&$())}function $(){if(!ae){var se=Y(X);ae=!0;for(var le=ne.length;le;){for(ie=ne,ne=[];++oe<le;)ie&&ie[oe].run();oe=-1,le=ne.length}ie=null,ae=!1,G(se)}}function J(se,le){this.fun=se,this.array=le}function Z(){}var Q=M.exports={},ee,te;(function(){try{ee='function'==typeof setTimeout?setTimeout:W}catch(se){ee=W}try{te='function'==typeof clearTimeout?clearTimeout:H}catch(se){te=H}})();var ne=[],ae=!1,ie,oe=-1;Q.nextTick=function(se){var le=Array(arguments.length-1);if(1<arguments.length)for(var de=1;de<arguments.length;de++)le[de-1]=arguments[de];ne.push(new J(se,le)),1!==ne.length||ae||Y($)},J.prototype.run=function(){this.fun.apply(null,this.array)},Q.title='browser',Q.browser=!0,Q.env={},Q.argv=[],Q.version='',Q.versions={},Q.on=Z,Q.addListener=Z,Q.once=Z,Q.off=Z,Q.removeListener=Z,Q.removeAllListeners=Z,Q.emit=Z,Q.binding=function(){throw new Error('process.binding is not supported')},Q.cwd=function(){return'/'},Q.chdir=function(){throw new Error('process.chdir is not supported')},Q.umask=function(){return 0}},function(M,U,W){'use strict';var H=W(133),Y=W(140),G=W(136),X=W(143),$;$=M.exports=function(J,Z){var Q,ee,te,ne,ae;return 2>arguments.length||'string'!=typeof J?(ne=Z,Z=J,J=null):ne=arguments[2],null==J?(Q=te=!0,ee=!1):(Q=X.call(J,'c'),ee=X.call(J,'e'),te=X.call(J,'w')),ae={value:Z,configurable:Q,enumerable:ee,writable:te},ne?H(Y(ne),ae):ae},$.gs=function(J,Z,Q){var ee,te,ne,ae;return'string'==typeof J?ne=arguments[3]:(ne=Q,Q=Z,Z=J,J=null),null==Z?Z=void 0:G(Z)?null==Q?Q=void 0:!G(Q)&&(ne=Q,Q=void 0):(ne=Z,Z=Q=void 0),null==J?(ee=!0,te=!1):(ee=X.call(J,'c'),te=X.call(J,'e')),ae={get:Z,set:Q,configurable:ee,enumerable:te},ne?H(Y(ne),ae):ae}},function(M,U,W){W(158),M.exports=W(26).RegExp.escape},function(M,U,W){var H=W(4),Y=W(74),G=W(5)('species');M.exports=function(X){var $;return Y(X)&&($=X.constructor,'function'==typeof $&&($===Array||Y($.prototype))&&($=void 0),H($)&&($=$[G],null===$&&($=void 0))),void 0===$?Array:$}},function(M,U,W){var H=W(150);M.exports=function(Y,G){return new(H(Y))(G)}},function(M,U,W){'use strict';var H=W(1),Y=W(24),G='number';M.exports=function(X){if('string'!==X&&X!==G&&'default'!==X)throw TypeError('Incorrect hint');return Y(H(this),X!=G)}},function(M,U,W){var H=W(37),Y=W(61),G=W(50);M.exports=function(X){var $=H(X),J=Y.f;if(J)for(var Z=J(X),Q=G.f,ee=0,te;Z.length>ee;)Q.call(X,te=Z[ee++])&&$.push(te);return $}},function(M,U,W){var H=W(37),Y=W(16);M.exports=function(G,X){for(var $=Y(G),J=H($),Z=J.length,Q=0,ee;Z>Q;)if($[ee=J[Q++]]===X)return ee}},function(M,U,W){'use strict';var H=W(156),Y=W(57),G=W(12);M.exports=function(){for(var X=G(this),$=arguments.length,J=Array($),Z=0,Q=H._,ee=!1;$>Z;)(J[Z]=arguments[Z++])===Q&&(ee=!0);return function(){var te=this,ne=arguments.length,ae=0,ie=0,oe;if(!ee&&!ne)return Y(X,J,te);if(oe=J.slice(),ee)for(;$>ae;ae++)oe[ae]===Q&&(oe[ae]=arguments[ie++]);for(;ne>ie;)oe.push(arguments[ie++]);return Y(X,oe,te)}}},function(M,U,W){M.exports=W(2)},function(M){M.exports=function(W,H){var Y=H===Object(H)?function(G){return H[G]}:H;return function(G){return(G+'').replace(W,Y)}}},function(M,U,W){var H=W(0),Y=W(157)(/[\\^$*+?.()|[\]{}]/g,'\\$&');H(H.S,'RegExp',{escape:function(X){return Y(X)}})},function(M,U,W){var H=W(0);H(H.P,'Array',{copyWithin:W(99)}),W(43)('copyWithin')},function(M,U,W){'use strict';var H=W(0),Y=W(22)(4);H(H.P+H.F*!W(21)([].every,!0),'Array',{every:function(X){return Y(this,X,arguments[1])}})},function(M,U,W){var H=W(0);H(H.P,'Array',{fill:W(66)}),W(43)('fill')},function(M,U,W){'use strict';var H=W(0),Y=W(22)(2);H(H.P+H.F*!W(21)([].filter,!0),'Array',{filter:function(X){return Y(this,X,arguments[1])}})},function(M,U,W){'use strict';var H=W(0),Y=W(22)(6),G='findIndex',X=!0;G in[]&&[,][G](function(){X=!1}),H(H.P+H.F*X,'Array',{findIndex:function(J){return Y(this,J,1<arguments.length?arguments[1]:void 0)}}),W(43)(G)},function(M,U,W){'use strict';var H=W(0),Y=W(22)(5),G='find',X=!0;G in[]&&[,][G](function(){X=!1}),H(H.P+H.F*X,'Array',{find:function(J){return Y(this,J,1<arguments.length?arguments[1]:void 0)}}),W(43)(G)},function(M,U,W){'use strict';var H=W(0),Y=W(22)(0),G=W(21)([].forEach,!0);H(H.P+H.F*!G,'Array',{forEach:function($){return Y(this,$,arguments[1])}})},function(M,U,W){'use strict';var H=W(27),Y=W(0),G=W(10),X=W(108),$=W(73),J=W(9),Z=W(67),Q=W(90);Y(Y.S+Y.F*!W(59)(function(ee){Array.from(ee)}),'Array',{from:function(te){var ne=G(te),ae='function'==typeof this?this:Array,ie=arguments.length,oe=1<ie?arguments[1]:void 0,se=void 0!==oe,le=0,de=Q(ne),ue,ce,pe,fe;if(se&&(oe=H(oe,2<ie?arguments[2]:void 0,2)),void 0!=de&&!(ae==Array&&$(de)))for(fe=de.call(ne),ce=new ae;!(pe=fe.next()).done;le++)Z(ce,le,se?X(fe,oe,[pe.value,le],!0):pe.value);else for(ue=J(ne.length),ce=new ae(ue);ue>le;le++)Z(ce,le,se?oe(ne[le],le):ne[le]);return ce.length=le,ce}})},function(M,U,W){'use strict';var H=W(0),Y=W(53)(!1),G=[].indexOf,X=!!G&&0>1/[1].indexOf(1,-0);H(H.P+H.F*(X||!W(21)(G)),'Array',{indexOf:function(J){return X?G.apply(this,arguments)||0:Y(this,J,arguments[1])}})},function(M,U,W){var H=W(0);H(H.S,'Array',{isArray:W(74)})},function(M,U,W){'use strict';var H=W(0),Y=W(16),G=[].join;H(H.P+H.F*(W(49)!=Object||!W(21)(G)),'Array',{join:function($){return G.call(Y(this),$===void 0?',':$)}})},function(M,U,W){'use strict';var H=W(0),Y=W(16),G=W(32),X=W(9),$=[].lastIndexOf,J=!!$&&0>1/[1].lastIndexOf(1,-0);H(H.P+H.F*(J||!W(21)($)),'Array',{lastIndexOf:function(Q){if(J)return $.apply(this,arguments)||0;var ee=Y(this),te=X(ee.length),ne=te-1;for(1<arguments.length&&(ne=Math.min(ne,G(arguments[1]))),0>ne&&(ne=te+ne);0<=ne;ne--)if(ne in ee&&ee[ne]===Q)return ne||0;return-1}})},function(M,U,W){'use strict';var H=W(0),Y=W(22)(1);H(H.P+H.F*!W(21)([].map,!0),'Array',{map:function(X){return Y(this,X,arguments[1])}})},function(M,U,W){'use strict';var H=W(0),Y=W(67);H(H.S+H.F*W(3)(function(){function G(){}return!(Array.of.call(G)instanceof G)}),'Array',{of:function(){for(var X=0,$=arguments.length,J=new('function'==typeof this?this:Array)($);$>X;)Y(J,X,arguments[X++]);return J.length=$,J}})},function(M,U,W){'use strict';var H=W(0),Y=W(101);H(H.P+H.F*!W(21)([].reduceRight,!0),'Array',{reduceRight:function(X){return Y(this,X,arguments.length,arguments[1],!0)}})},function(M,U,W){'use strict';var H=W(0),Y=W(101);H(H.P+H.F*!W(21)([].reduce,!0),'Array',{reduce:function(X){return Y(this,X,arguments.length,arguments[1],!1)}})},function(M,U,W){'use strict';var H=W(0),Y=W(71),G=W(19),X=W(40),$=W(9),J=[].slice;H(H.P+H.F*W(3)(function(){Y&&J.call(Y)}),'Array',{slice:function(Q,ee){var te=$(this.length),ne=G(this);if(ee=void 0===ee?te:ee,'Array'==ne)return J.call(this,Q,ee);for(var ae=X(Q,te),ie=X(ee,te),oe=$(ie-ae),se=Array(oe),le=0;le<oe;le++)se[le]='String'==ne?this.charAt(ae+le):this[ae+le];return se}})},function(M,U,W){'use strict';var H=W(0),Y=W(22)(3);H(H.P+H.F*!W(21)([].some,!0),'Array',{some:function(X){return Y(this,X,arguments[1])}})},function(M,U,W){'use strict';var H=W(0),Y=W(12),G=W(10),X=W(3),$=[].sort,J=[1,2,3];H(H.P+H.F*(X(function(){J.sort(void 0)})||!X(function(){J.sort(null)})||!W(21)($)),'Array',{sort:function(Q){return Q===void 0?$.call(G(this)):$.call(G(this),Y(Q))}})},function(M,U,W){W(39)('Array')},function(M,U,W){var H=W(0);H(H.S,'Date',{now:function(){return new Date().getTime()}})},function(M,U,W){'use strict';var H=W(0),Y=W(3),G=Date.prototype.getTime,X=function($){return 9<$?$:'0'+$};H(H.P+H.F*(Y(function(){return'0385-07-25T07:06:39.999Z'!=new Date(-50000000000001).toISOString()})||!Y(function(){new Date(NaN).toISOString()})),'Date',{toISOString:function(){if(!isFinite(G.call(this)))throw RangeError('Invalid time value');var J=this,Z=J.getUTCFullYear(),Q=J.getUTCMilliseconds(),ee=0>Z?'-':9999<Z?'+':'';return ee+('00000'+Math.abs(Z)).slice(ee?-6:-4)+'-'+X(J.getUTCMonth()+1)+'-'+X(J.getUTCDate())+'T'+X(J.getUTCHours())+':'+X(J.getUTCMinutes())+':'+X(J.getUTCSeconds())+'.'+(99<Q?Q:'0'+X(Q))+'Z'}})},function(M,U,W){'use strict';var H=W(0),Y=W(10),G=W(24);H(H.P+H.F*W(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),'Date',{toJSON:function(){var J=Y(this),Z=G(J);return'number'!=typeof Z||isFinite(Z)?J.toISOString():null}})},function(M,U,W){var H=W(5)('toPrimitive'),Y=Date.prototype;H in Y||W(13)(Y,H,W(152))},function(M,U,W){var H=Date.prototype,Y='Invalid Date',G='toString',X=H[G],$=H.getTime;new Date(NaN)+''!=Y&&W(14)(H,G,function(){var Z=$.call(this);return Z===Z?X.call(this):Y})},function(M,U,W){var H=W(0);H(H.P,'Function',{bind:W(102)})},function(M,U,W){'use strict';var H=W(4),Y=W(18),G=W(5)('hasInstance'),X=Function.prototype;G in X||W(7).f(X,G,{value:function($){if('function'!=typeof this||!H($))return!1;if(!H(this.prototype))return $ instanceof this;for(;$=Y($);)if(this.prototype===$)return!0;return!1}})},function(M,U,W){var H=W(7).f,Y=W(31),G=W(11),X=Function.prototype,$=/^\s*function ([^ (]*)/,J='name',Z=Object.isExtensible||function(){return!0};J in X||W(6)&&H(X,J,{configurable:!0,get:function(){try{var Q=this,ee=(''+Q).match($)[1];return G(Q,J)||!Z(Q)||H(Q,J,Y(5,ee)),ee}catch(te){return''}}})},function(M,U,W){var H=W(0),Y=W(110),G=Math.sqrt,X=Math.acosh;H(H.S+H.F*!(X&&710==Math.floor(X(Number.MAX_VALUE))&&X(Infinity)==Infinity),'Math',{acosh:function(J){return 1>(J=+J)?NaN:94906265.62425156<J?Math.log(J)+Math.LN2:Y(J-1+G(J-1)*G(J+1))}})},function(M,U,W){function H(X){return isFinite(X=+X)&&0!=X?0>X?-H(-X):Math.log(X+Math.sqrt(X*X+1)):X}var Y=W(0),G=Math.asinh;Y(Y.S+Y.F*!(G&&0<1/G(0)),'Math',{asinh:H})},function(M,U,W){var H=W(0),Y=Math.atanh;H(H.S+H.F*!(Y&&0>1/Y(-0)),'Math',{atanh:function(X){return 0==(X=+X)?X:Math.log((1+X)/(1-X))/2}})},function(M,U,W){var H=W(0),Y=W(78);H(H.S,'Math',{cbrt:function(X){return Y(X=+X)*Math.pow(Math.abs(X),1/3)}})},function(M,U,W){var H=W(0);H(H.S,'Math',{clz32:function(G){return(G>>>=0)?31-Math.floor(Math.log(G+0.5)*Math.LOG2E):32}})},function(M,U,W){var H=W(0),Y=Math.exp;H(H.S,'Math',{cosh:function(X){return(Y(X=+X)+Y(-X))/2}})},function(M,U,W){var H=W(0),Y=W(77);H(H.S+H.F*(Y!=Math.expm1),'Math',{expm1:Y})},function(M,U,W){var H=W(0),Y=W(78),G=Math.pow,X=G(2,-52),$=G(2,-23),J=G(2,127)*(2-$),Z=G(2,-126),Q=function(ee){return ee+1/X-1/X};H(H.S,'Math',{fround:function(te){var ne=Math.abs(te),ae=Y(te),ie,oe;return ne<Z?ae*Q(ne/Z/$)*Z*$:(ie=(1+$/X)*ne,oe=ie-(ie-ne),oe>J||oe!=oe?ae*Infinity:ae*oe)}})},function(M,U,W){var H=W(0),Y=Math.abs;H(H.S,'Math',{hypot:function(){for(var J=0,Z=0,Q=arguments.length,ee=0,te,ne;Z<Q;)te=Y(arguments[Z++]),ee<te?(ne=ee/te,J=J*ne*ne+1,ee=te):0<te?(ne=te/ee,J+=ne*ne):J+=te;return ee==Infinity?Infinity:ee*Math.sqrt(J)}})},function(M,U,W){var H=W(0),Y=Math.imul;H(H.S+H.F*W(3)(function(){return-5!=Y(4294967295,5)||2!=Y.length}),'Math',{imul:function(X,$){var J=65535,Z=+X,Q=+$,ee=J&Z,te=J&Q;return 0|ee*te+((J&Z>>>16)*te+ee*(J&Q>>>16)<<16>>>0)}})},function(M,U,W){var H=W(0);H(H.S,'Math',{log10:function(G){return Math.log(G)/Math.LN10}})},function(M,U,W){var H=W(0);H(H.S,'Math',{log1p:W(110)})},function(M,U,W){var H=W(0);H(H.S,'Math',{log2:function(G){return Math.log(G)/Math.LN2}})},function(M,U,W){var H=W(0);H(H.S,'Math',{sign:W(78)})},function(M,U,W){var H=W(0),Y=W(77),G=Math.exp;H(H.S+H.F*W(3)(function(){return-2e-17!=!Math.sinh(-2e-17)}),'Math',{sinh:function($){return 1>Math.abs($=+$)?(Y($)-Y(-$))/2:(G($-1)-G(-$-1))*(Math.E/2)}})},function(M,U,W){var H=W(0),Y=W(77),G=Math.exp;H(H.S,'Math',{tanh:function($){var J=Y($=+$),Z=Y(-$);return J==Infinity?1:Z==Infinity?-1:(J-Z)/(G($)+G(-$))}})},function(M,U,W){var H=W(0);H(H.S,'Math',{trunc:function(G){return(0<G?Math.floor:Math.ceil)(G)}})},function(M,U,W){'use strict';var H=W(2),Y=W(11),G=W(19),X=W(72),$=W(24),J=W(3),Z=W(36).f,Q=W(17).f,ee=W(7).f,te=W(47).trim,ne='Number',ae=H[ne],ie=ae,oe=ae.prototype,se=G(W(35)(oe))==ne,le='trim'in String.prototype,de=function(fe){var he=$(fe,!1);if('string'==typeof he&&2<he.length){he=le?he.trim():te(he,3);var ge=he.charCodeAt(0),ye,me,ve;if(43===ge||45===ge){if(ye=he.charCodeAt(2),88===ye||120===ye)return NaN;}else if(48===ge){switch(he.charCodeAt(1)){case 66:case 98:me=2,ve=49;break;case 79:case 111:me=8,ve=55;break;default:return+he;}for(var be=he.slice(2),xe=0,ke=be.length,_e;xe<ke;xe++)if(_e=be.charCodeAt(xe),48>_e||_e>ve)return NaN;return parseInt(be,me)}}return+he};if(!ae(' 0o1')||!ae('0b1')||ae('+0x1')){ae=function(he){var ge=1>arguments.length?0:he,ye=this;return ye instanceof ae&&(se?J(function(){oe.valueOf.call(ye)}):G(ye)!=ne)?X(new ie(de(ge)),ye,ae):de(ge)};for(var ue=W(6)?Z(ie):'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'.split(','),ce=0,pe;ue.length>ce;ce++)Y(ie,pe=ue[ce])&&!Y(ae,pe)&&ee(ae,pe,Q(ie,pe));ae.prototype=oe,oe.constructor=ae,W(14)(H,ne,ae)}},function(M,U,W){var H=W(0);H(H.S,'Number',{EPSILON:Math.pow(2,-52)})},function(M,U,W){var H=W(0),Y=W(2).isFinite;H(H.S,'Number',{isFinite:function(X){return'number'==typeof X&&Y(X)}})},function(M,U,W){var H=W(0);H(H.S,'Number',{isInteger:W(107)})},function(M,U,W){var H=W(0);H(H.S,'Number',{isNaN:function(G){return G!=G}})},function(M,U,W){var H=W(0),Y=W(107),G=Math.abs;H(H.S,'Number',{isSafeInteger:function($){return Y($)&&9007199254740991>=G($)}})},function(M,U,W){var H=W(0);H(H.S,'Number',{MAX_SAFE_INTEGER:9007199254740991})},function(M,U,W){var H=W(0);H(H.S,'Number',{MIN_SAFE_INTEGER:-9007199254740991})},function(M,U,W){var H=W(0),Y=W(117);H(H.S+H.F*(Number.parseFloat!=Y),'Number',{parseFloat:Y})},function(M,U,W){var H=W(0),Y=W(118);H(H.S+H.F*(Number.parseInt!=Y),'Number',{parseInt:Y})},function(M,U,W){'use strict';var H=W(0),Y=W(32),G=W(98),X=W(85),$=1 .toFixed,J=Math.floor,Z=[0,0,0,0,0,0],Q='Number.toFixed: incorrect invocation!',ee='0',te=function(se,le){for(var de=-1,ue=le;6>++de;)ue+=se*Z[de],Z[de]=ue%1e7,ue=J(ue/1e7)},ne=function(se){for(var le=6,de=0;0<=--le;)de+=Z[le],Z[le]=J(de/se),de=1e7*(de%se)},ae=function(){for(var se=6,le='';0<=--se;)if(''!=le||0==se||0!==Z[se]){var de=Z[se]+'';le=''==le?de:le+X.call(ee,7-de.length)+de}return le},ie=function(se,le,de){return 0===le?de:1==le%2?ie(se,le-1,de*se):ie(se*se,le/2,de)},oe=function(se){for(var le=0,de=se;4096<=de;)le+=12,de/=4096;for(;2<=de;)le+=1,de/=2;return le};H(H.P+H.F*('0.000'!==8e-5.toFixed(3)||'1'!==0.9.toFixed(0)||'1.25'!==1.255.toFixed(2)||'1000000000000000128'!==1000000000000000100 .toFixed(0)||!W(3)(function(){$.call({})})),'Number',{toFixed:function(le){var de=G(this,Q),ue=Y(le),ce='',pe=ee,fe,he,ge,ye;if(0>ue||20<ue)throw RangeError(Q);if(de!=de)return'NaN';if(-1e21>=de||1e21<=de)return de+'';if(0>de&&(ce='-',de=-de),1e-21<de)if(fe=oe(de*ie(2,69,1))-69,he=0>fe?de*ie(2,-fe,1):de/ie(2,fe,1),he*=4503599627370496,fe=52-fe,0<fe){for(te(0,he),ge=ue;7<=ge;)te(1e7,0),ge-=7;for(te(ie(10,ge,1),0),ge=fe-1;23<=ge;)ne(8388608),ge-=23;ne(1<<ge),te(1,1),ne(2),pe=ae()}else te(0,he),te(1<<-fe,0),pe=ae()+X.call(ee,ue);return 0<ue?(ye=pe.length,pe=ce+(ye<=ue?'0.'+X.call(ee,ue-ye)+pe:pe.slice(0,ye-ue)+'.'+pe.slice(ye-ue))):pe=ce+pe,pe}})},function(M,U,W){'use strict';var H=W(0),Y=W(3),G=W(98),X=1 .toPrecision;H(H.P+H.F*(Y(function(){return'1'!==X.call(1,void 0)})||!Y(function(){X.call({})})),'Number',{toPrecision:function(J){var Z=G(this,'Number#toPrecision: incorrect invocation!');return J===void 0?X.call(Z):X.call(Z,J)}})},function(M,U,W){var H=W(0);H(H.S+H.F,'Object',{assign:W(111)})},function(M,U,W){var H=W(0);H(H.S,'Object',{create:W(35)})},function(M,U,W){var H=W(0);H(H.S+H.F*!W(6),'Object',{defineProperties:W(112)})},function(M,U,W){var H=W(0);H(H.S+H.F*!W(6),'Object',{defineProperty:W(7).f})},function(M,U,W){var H=W(4),Y=W(30).onFreeze;W(23)('freeze',function(G){return function($){return G&&H($)?G(Y($)):$}})},function(M,U,W){var H=W(16),Y=W(17).f;W(23)('getOwnPropertyDescriptor',function(){return function(X,$){return Y(H(X),$)}})},function(M,U,W){W(23)('getOwnPropertyNames',function(){return W(113).f})},function(M,U,W){var H=W(10),Y=W(18);W(23)('getPrototypeOf',function(){return function(X){return Y(H(X))}})},function(M,U,W){var H=W(4);W(23)('isExtensible',function(Y){return function(X){return!!H(X)&&(!Y||Y(X))}})},function(M,U,W){var H=W(4);W(23)('isFrozen',function(Y){return function(X){return!H(X)||!!Y&&Y(X)}})},function(M,U,W){var H=W(4);W(23)('isSealed',function(Y){return function(X){return!H(X)||!!Y&&Y(X)}})},function(M,U,W){var H=W(0);H(H.S,'Object',{is:W(119)})},function(M,U,W){var H=W(10),Y=W(37);W(23)('keys',function(){return function(X){return Y(H(X))}})},function(M,U,W){var H=W(4),Y=W(30).onFreeze;W(23)('preventExtensions',function(G){return function($){return G&&H($)?G(Y($)):$}})},function(M,U,W){var H=W(4),Y=W(30).onFreeze;W(23)('seal',function(G){return function($){return G&&H($)?G(Y($)):$}})},function(M,U,W){var H=W(0);H(H.S,'Object',{setPrototypeOf:W(80).set})},function(M,U,W){'use strict';var H=W(48);({})[W(5)('toStringTag')]='z',W(14)(Object.prototype,'toString',function(){return'[object '+H(this)+']'},!0)},function(M,U,W){var H=W(0),Y=W(117);H(H.G+H.F*(parseFloat!=Y),{parseFloat:Y})},function(M,U,W){var H=W(0),Y=W(118);H(H.G+H.F*(parseInt!=Y),{parseInt:Y})},function(M,U,W){'use strict';var H=W(34),Y=W(2),G=W(27),X=W(48),$=W(0),J=W(4),Z=W(12),Q=W(33),ee=W(44),te=W(82),ne=W(87).set,ae=W(79)(),ie='Promise',oe=Y.TypeError,se=Y.process,le=Y[ie],se=Y.process,de='process'==X(se),ue=function(){},ce,pe,fe,he=!!function(){try{var Pe=le.resolve(1),Te=(Pe.constructor={})[W(5)('species')]=function(Ce){Ce(ue,ue)};return(de||'function'==typeof PromiseRejectionEvent)&&Pe.then(ue)instanceof Te}catch(Ce){}}(),ge=function(Pe,Te){return Pe===Te||Pe===le&&Te===fe},ye=function(Pe){var Te;return J(Pe)&&'function'==typeof(Te=Pe.then)&&Te},me=function(Pe){return ge(le,Pe)?new ve(Pe):new pe(Pe)},ve=pe=function(Pe){var Te,Ce;this.promise=new Pe(function(Re,Oe){if(Te!=void 0||Ce!=void 0)throw oe('Bad Promise constructor');Te=Re,Ce=Oe}),this.resolve=Z(Te),this.reject=Z(Ce)},be=function(Pe){try{Pe()}catch(Te){return{error:Te}}},xe=function(Pe,Te){if(!Pe._n){Pe._n=!0;var Ce=Pe._c;ae(function(){for(var Re=Pe._v,Oe=1==Pe._s,Le=0,Ne=function(Ae){var Ie=Oe?Ae.ok:Ae.fail,Fe=Ae.resolve,ze=Ae.reject,qe=Ae.domain,je,Me;try{Ie?(!Oe&&(2==Pe._h&&we(Pe),Pe._h=1),!0===Ie?je=Re:(qe&&qe.enter(),je=Ie(Re),qe&&qe.exit()),je===Ae.promise?ze(oe('Promise-chain cycle')):(Me=ye(je))?Me.call(je,Fe,ze):Fe(je)):ze(Re)}catch(Be){ze(Be)}};Ce.length>Le;)Ne(Ce[Le++]);Pe._c=[],Pe._n=!1,Te&&!Pe._h&&ke(Pe)})}},ke=function(Pe){ne.call(Y,function(){var Te=Pe._v,Ce,Re,Oe;if(_e(Pe)&&(Ce=be(function(){de?se.emit('unhandledRejection',Te,Pe):(Re=Y.onunhandledrejection)?Re({promise:Pe,reason:Te}):(Oe=Y.console)&&Oe.error&&Oe.error('Unhandled promise rejection',Te)}),Pe._h=de||_e(Pe)?2:1),Pe._a=void 0,Ce)throw Ce.error})},_e=function(Pe){if(1==Pe._h)return!1;for(var Te=Pe._a||Pe._c,Ce=0,Re;Te.length>Ce;)if(Re=Te[Ce++],Re.fail||!_e(Re.promise))return!1;return!0},we=function(Pe){ne.call(Y,function(){var Te;de?se.emit('rejectionHandled',Pe):(Te=Y.onrejectionhandled)&&Te({promise:Pe,reason:Pe._v})})},Se=function(Pe){var Te=this;Te._d||(Te._d=!0,Te=Te._w||Te,Te._v=Pe,Te._s=2,!Te._a&&(Te._a=Te._c.slice()),xe(Te,!0))},Ee=function(Pe){var Te=this,Ce;if(!Te._d){Te._d=!0,Te=Te._w||Te;try{if(Te===Pe)throw oe('Promise can\'t be resolved itself');(Ce=ye(Pe))?ae(function(){var Re={_w:Te,_d:!1};try{Ce.call(Pe,G(Ee,Re,1),G(Se,Re,1))}catch(Oe){Se.call(Re,Oe)}}):(Te._v=Pe,Te._s=1,xe(Te,!1))}catch(Re){Se.call({_w:Te,_d:!1},Re)}}};he||(le=function(Te){Q(this,le,ie,'_h'),Z(Te),ce.call(this);try{Te(G(Ee,this,1),G(Se,this,1))}catch(Ce){Se.call(this,Ce)}},ce=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},ce.prototype=W(38)(le.prototype,{then:function(Te,Ce){var Re=me(te(this,le));return Re.ok='function'!=typeof Te||Te,Re.fail='function'==typeof Ce&&Ce,Re.domain=de?se.domain:void 0,this._c.push(Re),this._a&&this._a.push(Re),this._s&&xe(this,!1),Re.promise},'catch':function(Pe){return this.then(void 0,Pe)}}),ve=function(){var Pe=new ce;this.promise=Pe,this.resolve=G(Ee,Pe,1),this.reject=G(Se,Pe,1)}),$($.G+$.W+$.F*!he,{Promise:le}),W(46)(le,ie),W(39)(ie),fe=W(26)[ie],$($.S+$.F*!he,ie,{reject:function(Te){var Ce=me(this),Re=Ce.reject;return Re(Te),Ce.promise}}),$($.S+$.F*(H||!he),ie,{resolve:function(Te){if(Te instanceof le&&ge(Te.constructor,this))return Te;var Ce=me(this),Re=Ce.resolve;return Re(Te),Ce.promise}}),$($.S+$.F*!(he&&W(59)(function(Pe){le.all(Pe)['catch'](ue)})),ie,{all:function(Te){var Ce=this,Re=me(Ce),Oe=Re.resolve,Le=Re.reject,Ne=be(function(){var Ae=[],Ie=0,Fe=1;ee(Te,!1,function(ze){var qe=Ie++,je=!1;Ae.push(void 0),Fe++,Ce.resolve(ze).then(function(Me){je||(je=!0,Ae[qe]=Me,--Fe||Oe(Ae))},Le)}),--Fe||Oe(Ae)});return Ne&&Le(Ne.error),Re.promise},race:function(Te){var Ce=this,Re=me(Ce),Oe=Re.reject,Le=be(function(){ee(Te,!1,function(Ne){Ce.resolve(Ne).then(Re.resolve,Oe)})});return Le&&Oe(Le.error),Re.promise}})},function(M,U,W){var H=W(0),Y=W(12),G=W(1),X=(W(2).Reflect||{}).apply,$=Function.apply;H(H.S+H.F*!W(3)(function(){X(function(){})}),'Reflect',{apply:function(Z,Q,ee){var te=Y(Z),ne=G(ee);return X?X(te,Q,ne):$.call(te,Q,ne)}})},function(M,U,W){var H=W(0),Y=W(35),G=W(12),X=W(1),$=W(4),J=W(3),Z=W(102),Q=(W(2).Reflect||{}).construct,ee=J(function(){function ne(){}return!(Q(function(){},[],ne)instanceof ne)}),te=!J(function(){Q(function(){})});H(H.S+H.F*(ee||te),'Reflect',{construct:function(ae,ie){G(ae),X(ie);var oe=3>arguments.length?ae:G(arguments[2]);if(te&&!ee)return Q(ae,ie,oe);if(ae==oe){switch(ie.length){case 0:return new ae;case 1:return new ae(ie[0]);case 2:return new ae(ie[0],ie[1]);case 3:return new ae(ie[0],ie[1],ie[2]);case 4:return new ae(ie[0],ie[1],ie[2],ie[3]);}var se=[null];return se.push.apply(se,ie),new(Z.apply(ae,se))}var le=oe.prototype,de=Y($(le)?le:Object.prototype),ue=Function.apply.call(ae,de,ie);return $(ue)?ue:de}})},function(M,U,W){var H=W(7),Y=W(0),G=W(1),X=W(24);Y(Y.S+Y.F*W(3)(function(){Reflect.defineProperty(H.f({},1,{value:1}),1,{value:2})}),'Reflect',{defineProperty:function(J,Z,Q){G(J),Z=X(Z,!0),G(Q);try{return H.f(J,Z,Q),!0}catch(ee){return!1}}})},function(M,U,W){var H=W(0),Y=W(17).f,G=W(1);H(H.S,'Reflect',{deleteProperty:function($,J){var Z=Y(G($),J);return Z&&!Z.configurable?!1:delete $[J]}})},function(M,U,W){'use strict';var H=W(0),Y=W(1),G=function(X){this._t=Y(X),this._i=0;var $=this._k=[],J;for(J in X)$.push(J)};W(75)(G,'Object',function(){var X=this,$=X._k,J;do if(X._i>=$.length)return{value:void 0,done:!0};while(!((J=$[X._i++])in X._t));return{value:J,done:!1}}),H(H.S,'Reflect',{enumerate:function($){return new G($)}})},function(M,U,W){var H=W(17),Y=W(0),G=W(1);Y(Y.S,'Reflect',{getOwnPropertyDescriptor:function($,J){return H.f(G($),J)}})},function(M,U,W){var H=W(0),Y=W(18),G=W(1);H(H.S,'Reflect',{getPrototypeOf:function($){return Y(G($))}})},function(M,U,W){function H(Q,ee){var te=3>arguments.length?Q:arguments[2],ne,ae;return Z(Q)===te?Q[ee]:(ne=Y.f(Q,ee))?X(ne,'value')?ne.value:void 0===ne.get?void 0:ne.get.call(te):J(ae=G(Q))?H(ae,ee,te):void 0}var Y=W(17),G=W(18),X=W(11),$=W(0),J=W(4),Z=W(1);$($.S,'Reflect',{get:H})},function(M,U,W){var H=W(0);H(H.S,'Reflect',{has:function(G,X){return X in G}})},function(M,U,W){var H=W(0),Y=W(1),G=Object.isExtensible;H(H.S,'Reflect',{isExtensible:function($){return Y($),!G||G($)}})},function(M,U,W){var H=W(0);H(H.S,'Reflect',{ownKeys:W(116)})},function(M,U,W){var H=W(0),Y=W(1),G=Object.preventExtensions;H(H.S,'Reflect',{preventExtensions:function($){Y($);try{return G&&G($),!0}catch(J){return!1}}})},function(M,U,W){var H=W(0),Y=W(80);Y&&H(H.S,'Reflect',{setPrototypeOf:function(X,$){Y.check(X,$);try{return Y.set(X,$),!0}catch(J){return!1}}})},function(M,U,W){function H(te,ne,ae){var ie=4>arguments.length?te:arguments[3],oe=G.f(Q(te),ne),se,le;if(!oe){if(ee(le=X(te)))return H(le,ne,ae,ie);oe=Z(0)}return $(oe,'value')?!1!==oe.writable&&ee(ie)&&(se=G.f(ie,ne)||Z(0),se.value=ae,Y.f(ie,ne,se),!0):void 0!==oe.set&&(oe.set.call(ie,ae),!0)}var Y=W(7),G=W(17),X=W(18),$=W(11),J=W(0),Z=W(31),Q=W(1),ee=W(4);J(J.S,'Reflect',{set:H})},function(M,U,W){var H=W(2),Y=W(72),G=W(7).f,X=W(36).f,$=W(58),J=W(56),Z=H.RegExp,Q=Z,ee=Z.prototype,te=/a/g,ne=/a/g,ae=new Z(te)!==te;if(W(6)&&(!ae||W(3)(function(){return ne[W(5)('match')]=!1,Z(te)!=te||Z(ne)==ne||'/a/i'!=Z(te,'i')}))){Z=function(de,ue){var ce=this instanceof Z,pe=$(de),fe=ue===void 0;return!ce&&pe&&de.constructor===Z&&fe?de:Y(ae?new Q(pe&&!fe?de.source:de,ue):Q((pe=de instanceof Z)?de.source:de,pe&&fe?J.call(de):ue),ce?this:ee,Z)};for(var ie=function(le){(le in Z)||G(Z,le,{configurable:!0,get:function(){return Q[le]},set:function(de){Q[le]=de}})},oe=X(Q),se=0;oe.length>se;)ie(oe[se++]);ee.constructor=Z,Z.prototype=ee,W(14)(H,'RegExp',Z)}W(39)('RegExp')},function(M,U,W){W(55)('match',1,function(H,Y,G){return[function($){'use strict';var J=H(this),Z=$==void 0?void 0:$[Y];return Z===void 0?new RegExp($)[Y](J+''):Z.call($,J)},G]})},function(M,U,W){W(55)('replace',2,function(H,Y,G){return[function($,J){'use strict';var Z=H(this),Q=$==void 0?void 0:$[Y];return Q===void 0?G.call(Z+'',$,J):Q.call($,Z,J)},G]})},function(M,U,W){W(55)('search',1,function(H,Y,G){return[function($){'use strict';var J=H(this),Z=$==void 0?void 0:$[Y];return Z===void 0?new RegExp($)[Y](J+''):Z.call($,J)},G]})},function(M,U,W){W(55)('split',2,function(H,Y,G){'use strict';var X=W(58),$=G,J=[].push,Z='split',Q='length',ee='lastIndex';if('c'=='abbc'[Z](/(b)*/)[1]||4!='test'[Z](/(?:)/,-1)[Q]||2!='ab'[Z](/(?:ab)*/)[Q]||4!='.'[Z](/(.?)(.?)/)[Q]||1<'.'[Z](/()()/)[Q]||''[Z](/.?/)[Q]){var te=/()??/.exec('')[1]===void 0;G=function(ne,ae){var ie=this+'';if(void 0===ne&&0===ae)return[];if(!X(ne))return $.call(ie,ne,ae);var oe=[],se=(ne.ignoreCase?'i':'')+(ne.multiline?'m':'')+(ne.unicode?'u':'')+(ne.sticky?'y':''),le=0,de=void 0===ae?4294967295:ae>>>0,ue=new RegExp(ne.source,se+'g'),ce,pe,fe,he,ge;for(te||(ce=new RegExp('^'+ue.source+'$(?!\\s)',se));(pe=ue.exec(ie))&&(fe=pe.index+pe[0][Q],!(fe>le&&(oe.push(ie.slice(le,pe.index)),!te&&1<pe[Q]&&pe[0].replace(ce,function(){for(ge=1;ge<arguments[Q]-2;ge++)void 0===arguments[ge]&&(pe[ge]=void 0)}),1<pe[Q]&&pe.index<ie[Q]&&J.apply(oe,pe.slice(1)),he=pe[0][Q],le=fe,oe[Q]>=de)));)ue[ee]===pe.index&&ue[ee]++;return le===ie[Q]?(he||!ue.test(''))&&oe.push(''):oe.push(ie.slice(le)),oe[Q]>de?oe.slice(0,de):oe}}else'0'[Z](void 0,0)[Q]&&(G=function(ne,ae){return void 0===ne&&0===ae?[]:$.call(this,ne,ae)});return[function(ae,ie){var oe=H(this),se=ae==void 0?void 0:ae[Y];return se===void 0?G.call(oe+'',ae,ie):se.call(ae,oe,ie)},G]})},function(M,U,W){'use strict';W(123);var H=W(1),Y=W(56),G=W(6),X='toString',$=/./[X],J=function(Z){W(14)(RegExp.prototype,X,Z,!0)};W(3)(function(){return'/a/b'!=$.call({source:'a',flags:'b'})})?J(function(){var Q=H(this);return'/'.concat(Q.source,'/','flags'in Q?Q.flags:!G&&Q instanceof RegExp?Y.call(Q):void 0)}):$.name!=X&&J(function(){return $.call(this)})},function(M,U,W){'use strict';W(15)('anchor',function(H){return function(G){return H(this,'a','name',G)}})},function(M,U,W){'use strict';W(15)('big',function(H){return function(){return H(this,'big','','')}})},function(M,U,W){'use strict';W(15)('blink',function(H){return function(){return H(this,'blink','','')}})},function(M,U,W){'use strict';W(15)('bold',function(H){return function(){return H(this,'b','','')}})},function(M,U,W){'use strict';var H=W(0),Y=W(83)(!1);H(H.P,'String',{codePointAt:function(X){return Y(this,X)}})},function(M,U,W){'use strict';var H=W(0),Y=W(9),G=W(84),X='endsWith',$=''[X];H(H.P+H.F*W(70)(X),'String',{endsWith:function(Z){var Q=G(this,Z,X),ee=1<arguments.length?arguments[1]:void 0,te=Y(Q.length),ne=ee===void 0?te:Math.min(Y(ee),te),ae=Z+'';return Q.slice(ne-ae.length,ne)===ae}})},function(M,U,W){'use strict';W(15)('fixed',function(H){return function(){return H(this,'tt','','')}})},function(M,U,W){'use strict';W(15)('fontcolor',function(H){return function(G){return H(this,'font','color',G)}})},function(M,U,W){'use strict';W(15)('fontsize',function(H){return function(G){return H(this,'font','size',G)}})},function(M,U,W){var H=W(0),Y=W(40),G=String.fromCharCode,X=String.fromCodePoint;H(H.S+H.F*(!!X&&1!=X.length),'String',{fromCodePoint:function(){for(var Z=[],Q=arguments.length,ee=0,te;Q>ee;){if(te=+arguments[ee++],Y(te,1114111)!==te)throw RangeError(te+' is not a valid code point');Z.push(65536>te?G(te):G(((te-=65536)>>10)+55296,te%1024+56320))}return Z.join('')}})},function(M,U,W){'use strict';var H=W(0),Y=W(84),G='includes';H(H.P+H.F*W(70)(G),'String',{includes:function($){return!!~Y(this,$,G).indexOf($,1<arguments.length?arguments[1]:void 0)}})},function(M,U,W){'use strict';W(15)('italics',function(H){return function(){return H(this,'i','','')}})},function(M,U,W){'use strict';var H=W(83)(!0);W(76)(String,'String',function(Y){this._t=Y+'',this._i=0},function(){var Y=this._t,G=this._i,X;return G>=Y.length?{value:void 0,done:!0}:(X=H(Y,G),this._i+=X.length,{value:X,done:!1})})},function(M,U,W){'use strict';W(15)('link',function(H){return function(G){return H(this,'a','href',G)}})},function(M,U,W){var H=W(0),Y=W(16),G=W(9);H(H.S,'String',{raw:function($){for(var J=Y($.raw),Z=G(J.length),Q=arguments.length,ee=[],te=0;Z>te;)ee.push(J[te++]+''),te<Q&&ee.push(arguments[te]+'');return ee.join('')}})},function(M,U,W){var H=W(0);H(H.P,'String',{repeat:W(85)})},function(M,U,W){'use strict';W(15)('small',function(H){return function(){return H(this,'small','','')}})},function(M,U,W){'use strict';var H=W(0),Y=W(9),G=W(84),X='startsWith',$=''[X];H(H.P+H.F*W(70)(X),'String',{startsWith:function(Z){var Q=G(this,Z,X),ee=Y(Math.min(1<arguments.length?arguments[1]:void 0,Q.length)),te=Z+'';return Q.slice(ee,ee+te.length)===te}})},function(M,U,W){'use strict';W(15)('strike',function(H){return function(){return H(this,'strike','','')}})},function(M,U,W){'use strict';W(15)('sub',function(H){return function(){return H(this,'sub','','')}})},function(M,U,W){'use strict';W(15)('sup',function(H){return function(){return H(this,'sup','','')}})},function(M,U,W){'use strict';W(47)('trim',function(H){return function(){return H(this,3)}})},function(M,U,W){'use strict';var H=W(2),Y=W(11),G=W(6),X=W(0),$=W(14),J=W(30).KEY,Z=W(3),Q=W(62),ee=W(46),te=W(41),ne=W(5),ae=W(121),ie=W(89),oe=W(154),se=W(153),le=W(74),de=W(1),ue=W(16),ce=W(24),pe=W(31),fe=W(35),he=W(113),ge=W(17),ye=W(7),me=W(37),ve=ge.f,be=ye.f,xe=he.f,ke=H.Symbol,_e=H.JSON,we=_e&&_e.stringify,Se='prototype',Ee=ne('_hidden'),Pe=ne('toPrimitive'),Te={}.propertyIsEnumerable,Ce=Q('symbol-registry'),Re=Q('symbols'),Oe=Q('op-symbols'),Le=Object[Se],Ne='function'==typeof ke,Ae=H.QObject,Ie=!Ae||!Ae[Se]||!Ae[Se].findChild,Fe=G&&Z(function(){return 7!=fe(be({},'a',{get:function(){return be(this,'a',{value:7}).a}})).a})?function(Ge,Xe,Ke){var $e=ve(Le,Xe);$e&&delete Le[Xe],be(Ge,Xe,Ke),$e&&Ge!==Le&&be(Le,Xe,$e)}:be,ze=function(Ge){var Xe=Re[Ge]=fe(ke[Se]);return Xe._k=Ge,Xe},qe=Ne&&'symbol'==typeof ke.iterator?function(Ge){return'symbol'==typeof Ge}:function(Ge){return Ge instanceof ke},je=function(Xe,Ke,$e){return Xe===Le&&je(Oe,Ke,$e),de(Xe),Ke=ce(Ke,!0),de($e),Y(Re,Ke)?($e.enumerable?(Y(Xe,Ee)&&Xe[Ee][Ke]&&(Xe[Ee][Ke]=!1),$e=fe($e,{enumerable:pe(0,!1)})):(!Y(Xe,Ee)&&be(Xe,Ee,pe(1,{})),Xe[Ee][Ke]=!0),Fe(Xe,Ke,$e)):be(Xe,Ke,$e)},Me=function(Xe,Ke){de(Xe);for(var $e=se(Ke=ue(Ke)),Je=0,Ze=$e.length,Qe;Ze>Je;)je(Xe,Qe=$e[Je++],Ke[Qe]);return Xe},Ue=function(Xe){var Ke=Te.call(this,Xe=ce(Xe,!0));return this===Le&&Y(Re,Xe)&&!Y(Oe,Xe)?!1:Ke||!Y(this,Xe)||!Y(Re,Xe)||Y(this,Ee)&&this[Ee][Xe]?Ke:!0},De=function(Xe,Ke){if(Xe=ue(Xe),Ke=ce(Ke,!0),Xe!==Le||!Y(Re,Ke)||Y(Oe,Ke)){var $e=ve(Xe,Ke);return $e&&Y(Re,Ke)&&!(Y(Xe,Ee)&&Xe[Ee][Ke])&&($e.enumerable=!0),$e}},We=function(Xe){for(var Ke=xe(ue(Xe)),$e=[],Je=0,Ze;Ke.length>Je;)Y(Re,Ze=Ke[Je++])||Ze==Ee||Ze==J||$e.push(Ze);return $e},He=function(Xe){for(var Ke=Xe===Le,$e=xe(Ke?Oe:ue(Xe)),Je=[],Ze=0,Qe;$e.length>Ze;)Y(Re,Qe=$e[Ze++])&&(!Ke||Y(Le,Qe))&&Je.push(Re[Qe]);return Je};Ne||(ke=function(){if(this instanceof ke)throw TypeError('Symbol is not a constructor!');var Xe=te(0<arguments.length?arguments[0]:void 0),Ke=function($e){this===Le&&Ke.call(Oe,$e),Y(this,Ee)&&Y(this[Ee],Xe)&&(this[Ee][Xe]=!1),Fe(this,Xe,pe(1,$e))};return G&&Ie&&Fe(Le,Xe,{configurable:!0,set:Ke}),ze(Xe)},$(ke[Se],'toString',function(){return this._k}),ge.f=De,ye.f=je,W(36).f=he.f=We,W(50).f=Ue,W(61).f=He,G&&!W(34)&&$(Le,'propertyIsEnumerable',Ue,!0),ae.f=function(Ge){return ze(ne(Ge))}),X(X.G+X.W+X.F*!Ne,{Symbol:ke});for(var Ye='hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'.split(','),Ve=0;Ye.length>Ve;)ne(Ye[Ve++]);for(var Ye=me(ne.store),Ve=0;Ye.length>Ve;)ie(Ye[Ve++]);X(X.S+X.F*!Ne,'Symbol',{'for':function(Ge){return Y(Ce,Ge+='')?Ce[Ge]:Ce[Ge]=ke(Ge)},keyFor:function(Xe){if(qe(Xe))return oe(Ce,Xe);throw TypeError(Xe+' is not a symbol!')},useSetter:function(){Ie=!0},useSimple:function(){Ie=!1}}),X(X.S+X.F*!Ne,'Object',{create:function(Xe,Ke){return Ke===void 0?fe(Xe):Me(fe(Xe),Ke)},defineProperty:je,defineProperties:Me,getOwnPropertyDescriptor:De,getOwnPropertyNames:We,getOwnPropertySymbols:He}),_e&&X(X.S+X.F*(!Ne||Z(function(){var Ge=ke();return'[null]'!=we([Ge])||'{}'!=we({a:Ge})||'{}'!=we(Object(Ge))})),'JSON',{stringify:function(Xe){if(!(void 0===Xe||qe(Xe))){for(var Ke=[Xe],$e=1,Je,Ze;arguments.length>$e;)Ke.push(arguments[$e++]);return Je=Ke[1],'function'==typeof Je&&(Ze=Je),(Ze||!le(Je))&&(Je=function(Qe,et){if(Ze&&(et=Ze.call(this,Qe,et)),!qe(et))return et}),Ke[1]=Je,we.apply(_e,Ke)}}}),ke[Se][Pe]||W(13)(ke[Se],Pe,ke[Se].valueOf),ee(ke,'Symbol'),ee(Math,'Math',!0),ee(H.JSON,'JSON',!0)},function(M,U,W){'use strict';var H=W(0),Y=W(63),G=W(88),X=W(1),$=W(40),J=W(9),Z=W(4),Q=W(2).ArrayBuffer,ee=W(82),te=G.ArrayBuffer,ne=G.DataView,ae=Y.ABV&&Q.isView,ie=te.prototype.slice,oe=Y.VIEW,se='ArrayBuffer';H(H.G+H.W+H.F*(Q!==te),{ArrayBuffer:te}),H(H.S+H.F*!Y.CONSTR,se,{isView:function(de){return ae&&ae(de)||Z(de)&&oe in de}}),H(H.P+H.U+H.F*W(3)(function(){return!new te(2).slice(1,void 0).byteLength}),se,{slice:function(de,ue){if(ie!==void 0&&ue===void 0)return ie.call(X(this),de);for(var ce=X(this).byteLength,pe=$(de,ce),fe=$(void 0===ue?ce:ue,ce),he=new(ee(this,te))(J(fe-pe)),ge=new ne(this),ye=new ne(he),me=0;pe<fe;)ye.setUint8(me++,ge.getUint8(pe++));return he}}),W(39)(se)},function(M,U,W){var H=W(0);H(H.G+H.W+H.F*!W(63).ABV,{DataView:W(88).DataView})},function(M,U,W){W(29)('Float32',4,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Float64',8,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Int16',2,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Int32',4,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Int8',1,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Uint16',2,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Uint32',4,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Uint8',1,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Uint8',1,function(H){return function(G,X,$){return H(this,G,X,$)}},!0)},function(M,U,W){'use strict';var H=W(105);W(54)('WeakSet',function(Y){return function(){return Y(this,0<arguments.length?arguments[0]:void 0)}},{add:function(G){return H.def(this,G,!0)}},H,!1,!0)},function(M,U,W){'use strict';var H=W(0),Y=W(53)(!0);H(H.P,'Array',{includes:function(X){return Y(this,X,1<arguments.length?arguments[1]:void 0)}}),W(43)('includes')},function(M,U,W){var H=W(0),Y=W(79)(),G=W(2).process,X='process'==W(19)(G);H(H.G,{asap:function(J){var Z=X&&G.domain;Y(Z?Z.bind(J):J)}})},function(M,U,W){var H=W(0),Y=W(19);H(H.S,'Error',{isError:function(X){return'Error'===Y(X)}})},function(M,U,W){var H=W(0);H(H.P+H.R,'Map',{toJSON:W(104)('Map')})},function(M,U,W){var H=W(0);H(H.S,'Math',{iaddh:function(G,X,$,J){var Z=G>>>0,ee=$>>>0;return 0|(X>>>0)+(J>>>0)+((Z&ee|(Z|ee)&~(Z+ee>>>0))>>>31)}})},function(M,U,W){var H=W(0);H(H.S,'Math',{imulh:function(G,X){var $=65535,J=+G,Z=+X,Q=J&$,ee=Z&$,te=J>>16,ne=Z>>16,ae=(te*ee>>>0)+(Q*ee>>>16);return te*ne+(ae>>16)+((Q*ne>>>0)+(ae&$)>>16)}})},function(M,U,W){var H=W(0);H(H.S,'Math',{isubh:function(G,X,$,J){var Z=G>>>0,ee=$>>>0;return 0|(X>>>0)-(J>>>0)-((~Z&ee|~(Z^ee)&Z-ee>>>0)>>>31)}})},function(M,U,W){var H=W(0);H(H.S,'Math',{umulh:function(G,X){var $=65535,J=+G,Z=+X,Q=J&$,ee=Z&$,te=J>>>16,ne=Z>>>16,ae=(te*ee>>>0)+(Q*ee>>>16);return te*ne+(ae>>>16)+((Q*ne>>>0)+(ae&$)>>>16)}})},function(M,U,W){'use strict';var H=W(0),Y=W(10),G=W(12),X=W(7);W(6)&&H(H.P+W(60),'Object',{__defineGetter__:function(J,Z){X.f(Y(this),J,{get:G(Z),enumerable:!0,configurable:!0})}})},function(M,U,W){'use strict';var H=W(0),Y=W(10),G=W(12),X=W(7);W(6)&&H(H.P+W(60),'Object',{__defineSetter__:function(J,Z){X.f(Y(this),J,{set:G(Z),enumerable:!0,configurable:!0})}})},function(M,U,W){var H=W(0),Y=W(115)(!0);H(H.S,'Object',{entries:function(X){return Y(X)}})},function(M,U,W){var H=W(0),Y=W(116),G=W(16),X=W(17),$=W(67);H(H.S,'Object',{getOwnPropertyDescriptors:function(Z){for(var Q=G(Z),ee=X.f,te=Y(Q),ne={},ae=0,ie;te.length>ae;)$(ne,ie=te[ae++],ee(Q,ie));return ne}})},function(M,U,W){'use strict';var H=W(0),Y=W(10),G=W(24),X=W(18),$=W(17).f;W(6)&&H(H.P+W(60),'Object',{__lookupGetter__:function(Z){var Q=Y(this),ee=G(Z,!0),te;do if(te=$(Q,ee))return te.get;while(Q=X(Q))}})},function(M,U,W){'use strict';var H=W(0),Y=W(10),G=W(24),X=W(18),$=W(17).f;W(6)&&H(H.P+W(60),'Object',{__lookupSetter__:function(Z){var Q=Y(this),ee=G(Z,!0),te;do if(te=$(Q,ee))return te.set;while(Q=X(Q))}})},function(M,U,W){var H=W(0),Y=W(115)(!1);H(H.S,'Object',{values:function(X){return Y(X)}})},function(M,U,W){'use strict';var H=W(0),Y=W(2),G=W(26),X=W(79)(),$=W(5)('observable'),J=W(12),Z=W(1),Q=W(33),ee=W(38),te=W(13),ne=W(44),ae=ne.RETURN,ie=function(pe){return null==pe?void 0:J(pe)},oe=function(pe){var fe=pe._c;fe&&(pe._c=void 0,fe())},se=function(pe){return pe._o===void 0},le=function(pe){se(pe)||(pe._o=void 0,oe(pe))},de=function(pe,fe){Z(pe),this._c=void 0,this._o=pe,pe=new ue(this);try{var he=fe(pe),ge=he;null!=he&&('function'==typeof he.unsubscribe?he=function(){ge.unsubscribe()}:J(he),this._c=he)}catch(ye){return void pe.error(ye)}se(this)&&oe(this)};de.prototype=ee({},{unsubscribe:function(){le(this)}});var ue=function(pe){this._s=pe};ue.prototype=ee({},{next:function(fe){var he=this._s;if(!se(he)){var ge=he._o;try{var ye=ie(ge.next);if(ye)return ye.call(ge,fe)}catch(me){try{le(he)}finally{throw me}}}},error:function(fe){var he=this._s;if(se(he))throw fe;var ge=he._o;he._o=void 0;try{var ye=ie(ge.error);if(!ye)throw fe;fe=ye.call(ge,fe)}catch(me){try{oe(he)}finally{throw me}}return oe(he),fe},complete:function(fe){var he=this._s;if(!se(he)){var ge=he._o;he._o=void 0;try{var ye=ie(ge.complete);fe=ye?ye.call(ge,fe):void 0}catch(me){try{oe(he)}finally{throw me}}return oe(he),fe}}});var ce=function(fe){Q(this,ce,'Observable','_f')._f=J(fe)};ee(ce.prototype,{subscribe:function(fe){return new de(fe,this._f)},forEach:function(fe){var he=this;return new(G.Promise||Y.Promise)(function(ge,ye){J(fe);var me=he.subscribe({next:function(ve){try{return fe(ve)}catch(be){ye(be),me.unsubscribe()}},error:ye,complete:ge})})}}),ee(ce,{from:function(fe){var he='function'==typeof this?this:ce,ge=ie(Z(fe)[$]);if(ge){var ye=Z(ge.call(fe));return ye.constructor===he?ye:new he(function(me){return ye.subscribe(me)})}return new he(function(me){var ve=!1;return X(function(){if(!ve){try{if(ne(fe,!1,function(be){if(me.next(be),ve)return ae})===ae)return}catch(be){if(ve)throw be;return void me.error(be)}me.complete()}}),function(){ve=!0}})},of:function(){for(var fe=0,he=arguments.length,ge=Array(he);fe<he;)ge[fe]=arguments[fe++];return new('function'==typeof this?this:ce)(function(ye){var me=!1;return X(function(){if(!me){for(var ve=0;ve<ge.length;++ve)if(ye.next(ge[ve]),me)return;ye.complete()}}),function(){me=!0}})}}),te(ce.prototype,$,function(){return this}),H(H.G,{Observable:ce}),W(39)('Observable')},function(M,U,W){var H=W(28),Y=W(1),G=H.key,X=H.set;H.exp({defineMetadata:function(J,Z,Q,ee){X(J,Z,Y(Q),G(ee))}})},function(M,U,W){var H=W(28),Y=W(1),G=H.key,X=H.map,$=H.store;H.exp({deleteMetadata:function(Z,Q){var ee=3>arguments.length?void 0:G(arguments[2]),te=X(Y(Q),ee,!1);if(void 0===te||!te['delete'](Z))return!1;if(te.size)return!0;var ne=$.get(Q);return ne['delete'](ee),!!ne.size||$['delete'](Q)}})},function(M,U,W){var H=W(124),Y=W(100),G=W(28),X=W(1),$=W(18),J=G.keys,Z=G.key,Q=function(ee,te){var ne=J(ee,te),ae=$(ee);if(null===ae)return ne;var ie=Q(ae,te);return ie.length?ne.length?Y(new H(ne.concat(ie))):ie:ne};G.exp({getMetadataKeys:function(te){return Q(X(te),2>arguments.length?void 0:Z(arguments[1]))}})},function(M,U,W){var H=W(28),Y=W(1),G=W(18),X=H.has,$=H.get,J=H.key,Z=function(Q,ee,te){var ne=X(Q,ee,te);if(ne)return $(Q,ee,te);var ae=G(ee);return null===ae?void 0:Z(Q,ae,te)};H.exp({getMetadata:function(ee,te){return Z(ee,Y(te),3>arguments.length?void 0:J(arguments[2]))}})},function(M,U,W){var H=W(28),Y=W(1),G=H.keys,X=H.key;H.exp({getOwnMetadataKeys:function(J){return G(Y(J),2>arguments.length?void 0:X(arguments[1]))}})},function(M,U,W){var H=W(28),Y=W(1),G=H.get,X=H.key;H.exp({getOwnMetadata:function(J,Z){return G(J,Y(Z),3>arguments.length?void 0:X(arguments[2]))}})},function(M,U,W){var H=W(28),Y=W(1),G=W(18),X=H.has,$=H.key,J=function(Z,Q,ee){var te=X(Z,Q,ee);if(te)return!0;var ne=G(Q);return null!==ne&&J(Z,ne,ee)};H.exp({hasMetadata:function(Q,ee){return J(Q,Y(ee),3>arguments.length?void 0:$(arguments[2]))}})},function(M,U,W){var H=W(28),Y=W(1),G=H.has,X=H.key;H.exp({hasOwnMetadata:function(J,Z){return G(J,Y(Z),3>arguments.length?void 0:X(arguments[2]))}})},function(M,U,W){var H=W(28),Y=W(1),G=W(12),X=H.key,$=H.set;H.exp({metadata:function(Z,Q){return function(te,ne){$(Z,Q,(ne===void 0?G:Y)(te),X(ne))}}})},function(M,U,W){var H=W(0);H(H.P+H.R,'Set',{toJSON:W(104)('Set')})},function(M,U,W){'use strict';var H=W(0),Y=W(83)(!0);H(H.P,'String',{at:function(X){return Y(this,X)}})},function(M,U,W){'use strict';var H=W(0),Y=W(20),G=W(9),X=W(58),$=W(56),J=RegExp.prototype,Z=function(Q,ee){this._r=Q,this._s=ee};W(75)(Z,'RegExp String',function(){var ee=this._r.exec(this._s);return{value:ee,done:null===ee}}),H(H.P,'String',{matchAll:function(ee){if(Y(this),!X(ee))throw TypeError(ee+' is not a regexp!');var te=this+'',ne='flags'in J?ee.flags+'':$.call(ee),ae=new RegExp(ee.source,~ne.indexOf('g')?ne:'g'+ne);return ae.lastIndex=G(ee.lastIndex),new Z(ae,te)}})},function(M,U,W){'use strict';var H=W(0),Y=W(120);H(H.P,'String',{padEnd:function(X){return Y(this,X,1<arguments.length?arguments[1]:void 0,!1)}})},function(M,U,W){'use strict';var H=W(0),Y=W(120);H(H.P,'String',{padStart:function(X){return Y(this,X,1<arguments.length?arguments[1]:void 0,!0)}})},function(M,U,W){'use strict';W(47)('trimLeft',function(H){return function(){return H(this,1)}},'trimStart')},function(M,U,W){'use strict';W(47)('trimRight',function(H){return function(){return H(this,2)}},'trimEnd')},function(M,U,W){W(89)('asyncIterator')},function(M,U,W){W(89)('observable')},function(M,U,W){var H=W(0);H(H.S,'System',{global:W(2)})},function(M,U,W){for(var H=W(91),Y=W(14),G=W(2),X=W(13),$=W(45),J=W(5),Z=J('iterator'),Q=J('toStringTag'),ee=$.Array,te=['NodeList','DOMTokenList','MediaList','StyleSheetList','CSSRuleList'],ne=0;5>ne;ne++){var ae=te[ne],ie=G[ae],oe=ie&&ie.prototype,se;if(oe)for(se in oe[Z]||X(oe,Z,ee),oe[Q]||X(oe,Q,ae),$[ae]=ee,H)oe[se]||Y(oe,se,H[se],!0)}},function(M,U,W){var H=W(0),Y=W(87);H(H.G+H.B,{setImmediate:Y.set,clearImmediate:Y.clear})},function(M,U,W){var H=W(2),Y=W(0),G=W(57),X=W(155),$=H.navigator,J=!!$&&/MSIE .\./.test($.userAgent),Z=function(Q){return J?function(ee,te){return Q(G(X,[].slice.call(arguments,2),'function'==typeof ee?ee:Function(ee)),te)}:Q};Y(Y.G+Y.B+Y.F*J,{setTimeout:Z(H.setTimeout),setInterval:Z(H.setInterval)})},function(M,U,W){W(278),W(217),W(219),W(218),W(221),W(223),W(228),W(222),W(220),W(230),W(229),W(225),W(226),W(224),W(216),W(227),W(231),W(232),W(184),W(186),W(185),W(234),W(233),W(204),W(214),W(215),W(205),W(206),W(207),W(208),W(209),W(210),W(211),W(212),W(213),W(187),W(188),W(189),W(190),W(191),W(192),W(193),W(194),W(195),W(196),W(197),W(198),W(199),W(200),W(201),W(202),W(203),W(265),W(270),W(277),W(268),W(260),W(261),W(266),W(271),W(273),W(256),W(257),W(258),W(259),W(262),W(263),W(264),W(267),W(269),W(272),W(274),W(275),W(276),W(179),W(181),W(180),W(183),W(182),W(168),W(166),W(172),W(169),W(175),W(177),W(165),W(171),W(162),W(176),W(160),W(174),W(173),W(167),W(170),W(159),W(161),W(164),W(163),W(178),W(91),W(250),W(255),W(123),W(251),W(252),W(253),W(254),W(235),W(122),W(124),W(125),W(290),W(279),W(280),W(285),W(288),W(289),W(283),W(286),W(284),W(287),W(281),W(282),W(236),W(237),W(238),W(239),W(240),W(243),W(241),W(242),W(244),W(245),W(246),W(247),W(249),W(248),W(291),W(317),W(320),W(319),W(321),W(322),W(318),W(323),W(324),W(302),W(305),W(301),W(299),W(300),W(303),W(304),W(294),W(316),W(325),W(293),W(295),W(297),W(296),W(298),W(307),W(308),W(310),W(309),W(312),W(311),W(313),W(314),W(315),W(292),W(306),W(328),W(327),W(326),M.exports=W(26)},function(M,U,W){'use strict';function H(ae){return ae&&ae.__esModule?ae:{default:ae}}function Y(ae,ie){if(!(ae instanceof ie))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ae(ie,oe){for(var se=0,le;se<oe.length;se++)le=oe[se],le.enumerable=le.enumerable||!1,le.configurable=!0,'value'in le&&(le.writable=!0),Object.defineProperty(ie,le.key,le)}return function(ie,oe,se){return oe&&ae(ie.prototype,oe),se&&ae(ie,se),ie}}(),X=W(8),$=W(97),J=H($),Z=W(126),Q=H(Z),ee=W(51),te=H(ee),ne=function(){function ae(){Y(this,ae),this.zip=void 0,this.urlCache={},this.checkRequirements()}return G(ae,[{key:'checkRequirements',value:function(){try{if('undefined'==typeof JSZip){var oe=W(346);this.zip=new oe}else this.zip=new JSZip}catch(se){throw new Error('JSZip lib not loaded')}}},{key:'open',value:function(oe,se){return this.zip.loadAsync(oe,{base64:se})}},{key:'openUrl',value:function(oe,se){return(0,J.default)(oe,'binary').then(function(le){return this.zip.loadAsync(le,{base64:se})}.bind(this))}},{key:'request',value:function(oe,se){var le=new X.defer,ue=new te.default(oe),de;return se||(se=ue.extension),de='blob'==se?this.getBlob(oe):this.getText(oe),de?de.then(function(ce){var pe=this.handleResponse(ce,se);le.resolve(pe)}.bind(this)):le.reject({message:'File not found in the epub: '+oe,stack:new Error().stack}),le.promise}},{key:'handleResponse',value:function(oe,se){var le;return le='json'==se?JSON.parse(oe):(0,X.isXml)(se)?(0,X.parse)(oe,'text/xml'):'xhtml'==se?(0,X.parse)(oe,'application/xhtml+xml'):'html'==se||'htm'==se?(0,X.parse)(oe,'text/html'):oe,le}},{key:'getBlob',value:function(oe,se){var le=window.decodeURIComponent(oe.substr(1)),de=this.zip.file(le);if(de)return se=se||Q.default.lookup(de.name),de.async('uint8array').then(function(ue){return new Blob([ue],{type:se})})}},{key:'getText',value:function(oe){var le=window.decodeURIComponent(oe.substr(1)),de=this.zip.file(le);if(de)return de.async('string').then(function(ue){return ue})}},{key:'getBase64',value:function(oe,se){var le=window.decodeURIComponent(oe.substr(1)),de=this.zip.file(le);if(de)return se=se||Q.default.lookup(de.name),de.async('base64').then(function(ue){return'data:'+se+';base64,'+ue})}},{key:'createUrl',value:function(oe,se){var le=new X.defer,de=window.URL||window.webkitURL||window.mozURL,pe=se&&se.base64,ue,ce;return oe in this.urlCache?(le.resolve(this.urlCache[oe]),le.promise):(pe?(ce=this.getBase64(oe),ce&&ce.then(function(fe){this.urlCache[oe]=fe,le.resolve(fe)}.bind(this))):(ce=this.getBlob(oe),ce&&ce.then(function(fe){ue=de.createObjectURL(fe),this.urlCache[oe]=ue,le.resolve(ue)}.bind(this))),ce||le.reject({message:'File not found in the epub: '+oe,stack:new Error().stack}),le.promise)}},{key:'revokeUrl',value:function(oe){var se=window.URL||window.webkitURL||window.mozURL,le=this.urlCache[oe];le&&se.revokeObjectURL(le)}},{key:'destroy',value:function(){var oe=window.URL||window.webkitURL||window.mozURL;for(var se in this.urlCache)oe.revokeObjectURL(se);this.zip=void 0,this.urlCache={}}}]),ae}();U.default=ne,M.exports=U['default']},function(M,U,W){'use strict';function H(Re){return Re&&Re.__esModule?Re:{default:Re}}function Y(Re,Oe){if(!(Re instanceof Oe))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(Re){return typeof Re}:function(Re){return Re&&'function'==typeof Symbol&&Re.constructor===Symbol&&Re!==Symbol.prototype?'symbol':typeof Re},X=function(){function Re(Oe,Le){for(var Ne=0,Ae;Ne<Le.length;Ne++)Ae=Le[Ne],Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,'value'in Ae&&(Ae.writable=!0),Object.defineProperty(Oe,Ae.key,Ae)}return function(Oe,Le,Ne){return Le&&Re(Oe.prototype,Le),Ne&&Re(Oe,Ne),Oe}}(),$=W(42),J=H($),Z=W(8),Q=W(65),ee=H(Q),te=W(51),ne=H(te),ae=W(344),ie=H(ae),oe=W(334),se=H(oe),le=W(332),de=H(le),ue=W(340),ce=H(ue),pe=W(339),fe=H(pe),he=W(342),ge=H(he),ye=W(341),me=H(ye),ve=W(128),be=H(ve),xe=W(330),ke=H(xe),_e=W(97),we=H(_e),Se=W(25),Ee=H(Se),Pe='META-INF/container.xml',Ce=function(){function Re(Oe,Le){var Ne=this;Y(this,Re),'undefined'==typeof Le&&'object'===('undefined'==typeof Oe?'undefined':G(Oe))&&(Le=Oe,Oe=void 0),this.settings=(0,Z.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0}),(0,Z.extend)(this.settings,Le),this.opening=new Z.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new Z.defer,spine:new Z.defer,metadata:new Z.defer,cover:new Z.defer,navigation:new Z.defer,pageList:new Z.defer,resources:new Z.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources]),this.isRendered=!1,this.request=this.settings.requestMethod||we.default,this.spine=new ie.default,this.locations=new se.default(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=new me.default,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.toc=void 0,Oe&&this.open(Oe).catch(function(){var Ie=new Error('Cannot load book at '+Oe);Ne.emit('openFailed',Ie)})}return X(Re,[{key:'open',value:function(Le,Ne){var Ie=Ne||this.determineType(Le),Ae;return'binary'===Ie?(this.archived=!0,this.url=new ee.default('/',''),Ae=this.openEpub(Le)):'base64'===Ie?(this.archived=!0,this.url=new ee.default('/',''),Ae=this.openEpub(Le,Ie)):'epub'===Ie?(this.archived=!0,this.url=new ee.default('/',''),Ae=this.request(Le,'binary').then(this.openEpub.bind(this))):'opf'==Ie?(this.url=new ee.default(Le),Ae=this.openPackaging(this.url.Path.toString())):'json'==Ie?(this.url=new ee.default(Le),Ae=this.openManifest(this.url.Path.toString())):(this.url=new ee.default(Le),Ae=this.openContainer(Pe).then(this.openPackaging.bind(this))),Ae}},{key:'openEpub',value:function(Le,Ne){var Ae=this;return this.unarchive(Le,Ne||this.settings.encoding).then(function(){return Ae.openContainer(Pe)}).then(function(Ie){return Ae.openPackaging(Ie)})}},{key:'openContainer',value:function(Le){var Ne=this;return this.load(Le).then(function(Ae){return Ne.container=new de.default(Ae),Ne.resolve(Ne.container.packagePath)})}},{key:'openPackaging',value:function(Le){var Ne=this;return this.path=new ne.default(Le),this.load(Le).then(function(Ae){return Ne.packaging=new ce.default(Ae),Ne.unpack(Ne.packaging)})}},{key:'openManifest',value:function(Le){var Ne=this;return this.path=new ne.default(Le),this.load(Le).then(function(Ae){return Ne.packaging=new ce.default,Ne.packaging.load(Ae),Ne.unpack(Ne.packaging)})}},{key:'load',value:function(Le){var Ne;return this.archived?(Ne=this.resolve(Le),this.archive.request(Ne)):(Ne=this.resolve(Le),this.request(Ne,null,this.settings.requestCredentials,this.settings.requestHeaders))}},{key:'resolve',value:function(Le,Ne){if(Le){var Ae=Le,Ie=-1<Le.indexOf('://');return Ie?Le:(this.path&&(Ae=this.path.resolve(Le)),!1!=Ne&&this.url&&(Ae=this.url.resolve(Ae)),Ae)}}},{key:'determineType',value:function(Le){var Ne,Ae,Ie;return'base64'===this.settings.encoding?'base64':'string'==typeof Le?(Ne=new ee.default(Le),Ae=Ne.path(),Ie=Ae.extension,Ie?'epub'===Ie?'epub':'opf'===Ie?'opf':'json'===Ie?'json':void 0:'directory'):'binary'}},{key:'unpack',value:function(Le){var Ne=this;this.package=Le,this.spine.unpack(this.package,this.resolve.bind(this)),this.resources=new ge.default(this.package.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||'base64'}),this.loadNavigation(this.package).then(function(){Ne.toc=Ne.navigation.toc,Ne.loading.navigation.resolve(Ne.navigation)}),this.package.coverPath&&(this.cover=this.resolve(this.package.coverPath)),this.loading.manifest.resolve(this.package.manifest),this.loading.metadata.resolve(this.package.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&'none'!=this.settings.replacements?this.replacements().then(function(){Ne.opening.resolve(Ne)}).catch(function(Ae){console.error(Ae)}):this.opening.resolve(this)}},{key:'loadNavigation',value:function(Le){var Ne=this,Ae=Le.navPath||Le.ncxPath,Ie=Le.toc;return Ie?new Promise(function(Fe){Ne.navigation=new fe.default(Ie),Ne.pageList=new me.default,Fe(Ne.navigation)}):Ae?this.load(Ae,'xml').then(function(Fe){return Ne.navigation=new fe.default(Fe),Ne.pageList=new me.default(Fe),Ne.navigation}):new Promise(function(Fe){Ne.navigation=new fe.default,Ne.pageList=new me.default,Fe(Ne.navigation)})}},{key:'section',value:function(Le){return this.spine.get(Le)}},{key:'renderTo',value:function(Le,Ne){return this.rendition=new be.default(this,Ne),this.rendition.attachTo(Le),this.rendition}},{key:'setRequestCredentials',value:function(Le){this.settings.requestCredentials=Le}},{key:'setRequestHeaders',value:function(Le){this.settings.requestHeaders=Le}},{key:'unarchive',value:function(Le,Ne){return this.archive=new ke.default,this.archive.open(Le,Ne)}},{key:'coverUrl',value:function(){var Le=this,Ne=this.loaded.cover.then(function(){return Le.archived?Le.resources.get(Le.cover):Le.cover});return Ne}},{key:'replacements',value:function(){var Le=this;return this.spine.hooks.serialize.register(function(Ne,Ae){Ae.output=Le.resources.substitute(Ne,Ae.url)}),this.resources.replacements().then(function(){return Le.resources.replaceCss()})}},{key:'getRange',value:function(Le){var Ne=new Ee.default(Le),Ae=this.spine.get(Ne.spinePos),Ie=this.load.bind(this);return Ae.load(Ie).then(function(){var ze=Ne.toRange(Ae.document);return ze})}},{key:'key',value:function(Le){var Ne=Le||this.package.metadata.identifier||this.url.filename;return'epubjs:'+'0.3'+':'+Ne}},{key:'destroy',value:function(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.toc=void 0}}]),Re}();(0,J.default)(Ce.prototype),U.default=Ce,M.exports=U['default']},function(M,U,W){'use strict';function Y(Q,ee){if(!(Q instanceof ee))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function Q(ee,te){for(var ne=0,ae;ne<te.length;ne++)ae=te[ne],ae.enumerable=ae.enumerable||!1,ae.configurable=!0,'value'in ae&&(ae.writable=!0),Object.defineProperty(ee,ae.key,ae)}return function(ee,te,ne){return te&&Q(ee.prototype,te),ne&&Q(ee,ne),ee}}(),X=W(52),$=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(X),J=W(8),Z=function(){function Q(ee){Y(this,Q),this.packagePath='',this.directory='',this.encoding='',ee&&this.parse(ee)}return G(Q,[{key:'parse',value:function(te){var ne;if(!te)throw new Error('Container File Not Found');if(ne=(0,J.qs)(te,'rootfile'),!ne)throw new Error('No RootFile Found');this.packagePath=ne.getAttribute('full-path'),this.directory=$.default.dirname(this.packagePath),this.encoding=te.xmlEncoding}},{key:'destroy',value:function(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}]),Q}();U.default=Z,M.exports=U['default']},function(M,U){'use strict';function H(X,$){if(!(X instanceof $))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function X($,J){for(var Z=0,Q;Z<J.length;Z++)Q=J[Z],Q.enumerable=Q.enumerable||!1,Q.configurable=!0,'value'in Q&&(Q.writable=!0),Object.defineProperty($,Q.key,Q)}return function($,J,Z){return J&&X($.prototype,J),Z&&X($,Z),$}}(),G=function(){function X($){H(this,X),this.settings=$,this.name=$.layout||'reflowable',this._spread='none'!==$.spread,this._minSpreadWidth=$.minSpreadWidth||800,this._evenSpreads=$.evenSpreads||!1,this._flow='scrolled-continuous'===$.flow||'scrolled-doc'===$.flow?'scrolled':'paginated',this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}return Y(X,[{key:'flow',value:function(J){return'undefined'!=typeof J&&(this._flow='scrolled-continuous'===J||'scrolled-doc'===J?'scrolled':'paginated',this.props.flow=this._flow),this._flow}},{key:'spread',value:function(J,Z){return J&&(this._spread='none'!==J,this.props.spread=this._spread),0<=Z&&(this._minSpreadWidth=Z),this._spread}},{key:'calculate',value:function(J,Z,Q){var ee=1,te=Q||0,ne=J,ae=Math.floor(ne/8),ie,oe,se;ee=this._spread&&ne>=this._minSpreadWidth?2:1,'reflowable'!==this.name||'paginated'!==this._flow||0<=Q||(te=0==ae%2?ae:ae-1),'pre-paginated'===this.name&&(te=0),ie=1<ee?(ne-te)/ee:ne,'pre-paginated'===this.name&&1<ee&&(ne=ie),oe=ie*ee,se=(ie+te)*ee,this.width=ne,this.height=Z,this.spreadWidth=oe,this.delta=se,this.columnWidth=ie,this.gap=te,this.divisor=ee,this.props.width=ne,this.props.height=Z,this.props.spreadWidth=oe,this.props.delta=se,this.props.columnWidth=ie,this.props.gap=te,this.props.divisor=ee}},{key:'format',value:function(J){var Z;return Z='pre-paginated'===this.name?J.fit(this.columnWidth,this.height):'paginated'===this._flow?J.columns(this.width,this.height,this.columnWidth,this.gap):J.size(this.width,null),Z}},{key:'count',value:function(J){var Z=Math.ceil(J/this.spreadWidth);return{spreads:Z,pages:Z*this.divisor}}}]),X}();U.default=G,M.exports=U['default']},function(M,U,W){'use strict';function H(ae){return ae&&ae.__esModule?ae:{default:ae}}function Y(ae,ie){if(!(ae instanceof ie))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ae(ie,oe){for(var se=0,le;se<oe.length;se++)le=oe[se],le.enumerable=le.enumerable||!1,le.configurable=!0,'value'in le&&(le.writable=!0),Object.defineProperty(ie,le.key,le)}return function(ie,oe,se){return oe&&ae(ie.prototype,oe),se&&ae(ie,se),ie}}(),X=W(8),$=W(96),J=H($),Z=W(25),Q=H(Z),ee=W(42),te=H(ee),ne=function(){function ae(ie,oe,se){Y(this,ae),this.spine=ie,this.request=oe,this.pause=se||100,this.q=new J.default(this),this.epubcfi=new Q.default,this._locations=[],this.total=0,this.break=150,this._current=0,this.currentLocation='',this._currentCfi='',this.processingTimeout=void 0}return G(ae,[{key:'generate',value:function(oe){return oe&&(this.break=oe),this.q.pause(),this.spine.each(function(se){this.q.enqueue(this.process.bind(this),se)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}},{key:'createRange',value:function(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}},{key:'process',value:function(oe){return oe.load(this.request).then(function(se){var le=new X.defer,de=this.parse(se,oe.cfiBase);return this._locations=this._locations.concat(de),oe.unload(),this.processingTimeout=setTimeout(function(){return le.resolve(de)},this.pause),le.promise}.bind(this))}},{key:'parse',value:function(oe,se,le){var de=[],ce=oe.ownerDocument,pe=(0,X.qs)(ce,'body'),fe=0,ge=le||this.break,ue,he;if((0,X.sprint)(pe,function(be){var xe=be.length,_e=0,ke;if(0===be.textContent.trim().length)return!1;for(0==fe&&(ue=this.createRange(),ue.startContainer=be,ue.startOffset=0),ke=ge-fe,ke>xe&&(fe+=xe,_e=xe);_e<xe;)if(_e+=ke,_e>=xe)fe=xe-(_e-ge);else{ue.endContainer=be,ue.endOffset=_e;var we=new Q.default(ue,se).toString();de.push(we),fe=0,_e+=1,ue=this.createRange(),ue.startContainer=be,ue.startOffset=_e,ke=ge}he=be}.bind(this)),ue&&ue.startContainer&&he){ue.endContainer=he,ue.endOffset=he.length;var me=new Q.default(ue,se).toString();de.push(me),fe=0}return de}},{key:'locationFromCfi',value:function(oe){return 0===this._locations.length?-1:(0,X.locationOf)(oe.start,this._locations,this.epubcfi.compare)}},{key:'percentageFromCfi',value:function(oe){if(0===this._locations.length)return null;var se=this.locationFromCfi(oe);return this.percentageFromLocation(se)}},{key:'percentageFromLocation',value:function(oe){return oe&&this.total?oe/this.total:0}},{key:'cfiFromLocation',value:function(oe){var se=-1;return'number'!=typeof oe&&(oe=parseInt(oe)),0<=oe&&oe<this._locations.length&&(se=this._locations[oe]),se}},{key:'cfiFromPercentage',value:function(oe){var se=1<oe?oe/100:oe,le=Math.ceil(this.total*se);return this.cfiFromLocation(le)}},{key:'load',value:function(oe){return this._locations=JSON.parse(oe),this.total=this._locations.length-1,this._locations}},{key:'save',value:function(){return JSON.stringify(this._locations)}},{key:'getCurrent',value:function(){return this._current}},{key:'setCurrent',value:function(oe){var se;if('string'==typeof oe)this._currentCfi=oe;else if('number'==typeof oe)this._current=oe;else return;0===this._locations.length||('string'==typeof oe?(se=this.locationFromCfi(oe),this._current=se):se=oe,this.emit('changed',{percentage:this.percentageFromLocation(se)}))}},{key:'length',value:function(){return this._locations.length}},{key:'destroy',value:function(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.clear(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}},{key:'currentLocation',get:function(){return this._current},set:function(oe){this.setCurrent(oe)}}]),ae}();(0,te.default)(ne.prototype),U.default=ne,M.exports=U['default']},function(M,U,W){'use strict';function Y(te,ne){if(!(te instanceof ne))throw new TypeError('Cannot call a class as a function')}function G(te,ne){if(!te)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return ne&&('object'==typeof ne||'function'==typeof ne)?ne:te}function X(te,ne){if('function'!=typeof ne&&null!==ne)throw new TypeError('Super expression must either be null or a function, not '+typeof ne);te.prototype=Object.create(ne&&ne.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),ne&&(Object.setPrototypeOf?Object.setPrototypeOf(te,ne):te.__proto__=ne)}Object.defineProperty(U,'__esModule',{value:!0});var $=function(){function te(ne,ae){for(var ie=0,oe;ie<ae.length;ie++)oe=ae[ie],oe.enumerable=oe.enumerable||!1,oe.configurable=!0,'value'in oe&&(oe.writable=!0),Object.defineProperty(ne,oe.key,oe)}return function(ne,ae,ie){return ae&&te(ne.prototype,ae),ie&&te(ne,ie),ne}}(),J=W(8),Z=W(127),Q=function(te){return te&&te.__esModule?te:{default:te}}(Z),ee=function(te){function ne(ae){Y(this,ne);var ie=G(this,(ne.__proto__||Object.getPrototypeOf(ne)).call(this,ae));return ie.name='continuous',ie.settings=(0,J.extend)(ie.settings||{},{infinite:!0,overflow:'auto',axis:'vertical',offset:500,offsetDelta:250,width:void 0,height:void 0}),(0,J.extend)(ie.settings,ae.settings||{}),'undefined'!=ae.settings.gap&&0===ae.settings.gap&&(ie.settings.gap=ae.settings.gap),ie.viewSettings={ignoreClass:ie.settings.ignoreClass,axis:ie.settings.axis,layout:ie.layout,width:0,height:0},ie.scrollTop=0,ie.scrollLeft=0,ie}return X(ne,te),$(ne,[{key:'display',value:function(ie,oe){return Q.default.prototype.display.call(this,ie,oe).then(function(){return this.fill()}.bind(this))}},{key:'fill',value:function(ie){var oe=ie||new J.defer;return this.check().then(function(se){se?this.fill(oe):oe.resolve()}.bind(this)),oe.promise}},{key:'moveTo',value:function(ie){var oe=0,se=0,le=0,de=0;return'vertical'===this.settings.axis?(se=ie.top,de=ie.top+this.settings.offset):(oe=Math.floor(ie.left/this.layout.delta)*this.layout.delta,le=oe+this.settings.offset),this.check(le,de).then(function(){this.scrollBy(oe,se,!0)}.bind(this))}},{key:'resize',value:function(ie,oe){this.q.clear(),this._stageSize=this.stage.size(ie,oe),this._bounds=this.bounds(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.views.each(function(se){se.size(this._stageSize.width,this._stageSize.height)}.bind(this)),this.updateLayout(),this.emit('resized',{width:this.stage.width,height:this.stage.height})}},{key:'onResized',value:function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){this.resize()}.bind(this),150)}},{key:'afterResized',value:function(ie){this.emit('resize',ie.section)}},{key:'removeShownListeners',value:function(ie){ie.onDisplayed=function(){}}},{key:'append',value:function(ie){var oe=this.createView(ie);return this.views.append(oe),oe.onDisplayed=this.afterDisplayed.bind(this),oe}},{key:'prepend',value:function(ie){var oe=this.createView(ie);return oe.on('resized',this.counter.bind(this)),this.views.prepend(oe),oe.onDisplayed=this.afterDisplayed.bind(this),oe}},{key:'counter',value:function(ie){'vertical'===this.settings.axis?this.scrollBy(0,ie.heightDelta,!0):this.scrollBy(ie.widthDelta,0,!0)}},{key:'update',value:function(ie){for(var oe=this.bounds(),se=this.views.all(),le=se.length,de=[],ue='undefined'==typeof ie?this.settings.offset||0:ie,fe=new J.defer,he=[],ge=0,ce,pe;ge<le;ge++)pe=se[ge],ce=this.isVisible(pe,ue,ue,oe),!0===ce?(!pe.displayed&&he.push(pe.display(this.request).then(function(ye){ye.show()})),de.push(pe)):(this.q.enqueue(pe.destroy.bind(pe)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250));return he.length?Promise.all(he):(fe.resolve(),fe.promise)}},{key:'check',value:function(ie,oe){var ce=new J.defer,pe=[],fe='horizontal'===this.settings.axis,he=this.settings.offset||0,se,le,de,ue;ie&&fe&&(he=ie),oe&&!fe&&(he=oe);var ge=this._bounds,ye=fe?this.scrollLeft:this.scrollTop,me=fe?ge.width:ge.height,ve=fe?this.container.scrollWidth:this.container.scrollHeight;return ye+me+he>=ve&&(se=this.views.last(),de=se&&se.section.next(),de&&pe.push(this.append(de))),0>ye-he&&(le=this.views.first(),ue=le&&le.section.prev(),ue&&pe.push(this.prepend(ue))),pe.length?this.q.enqueue(function(){return this.update(he)}.bind(this)):(ce.resolve(!1),ce.promise)}},{key:'trim',value:function(){for(var ie=new J.defer,oe=this.views.displayed(),se=oe[0],le=oe[oe.length-1],de=this.views.indexOf(se),ue=this.views.indexOf(le),ce=this.views.slice(0,de),pe=this.views.slice(ue+1),fe=0;fe<ce.length-1;fe++)this.erase(ce[fe],ce);for(var he=1;he<pe.length;he++)this.erase(pe[he]);return ie.resolve(),ie.promise}},{key:'erase',value:function(ie,oe){var se,le;this.settings.height?(se=this.container.scrollTop,le=this.container.scrollLeft):(se=window.scrollY,le=window.scrollX);var de=ie.bounds();this.views.remove(ie),oe&&('vertical'===this.settings.axis?this.scrollTo(0,se-de.height,!0):this.scrollTo(le-de.width,0,!0))}},{key:'addEventListeners',value:function(){window.addEventListener('unload',function(){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners()}},{key:'addScrollListeners',value:function(){var ie;this.tick=J.requestAnimationFrame,this.settings.height?(this.prevScrollTop=this.container.scrollTop,this.prevScrollLeft=this.container.scrollLeft):(this.prevScrollTop=window.scrollY,this.prevScrollLeft=window.scrollX),this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.height?(ie=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft):(ie=window,this.scrollTop=window.scrollY,this.scrollLeft=window.scrollX),ie.addEventListener('scroll',this.onScroll.bind(this)),this.scrolled=!1}},{key:'removeEventListeners',value:function(){var ie;ie=this.settings.height?this.container:window,ie.removeEventListener('scroll',this.onScroll.bind(this))}},{key:'onScroll',value:function(){var ie,oe;this.settings.height?(ie=this.container.scrollTop,oe=this.container.scrollLeft):(ie=window.scrollY,oe=window.scrollX),this.scrollTop=ie,this.scrollLeft=oe,this.ignore?this.ignore=!1:(0===this.scrollDeltaVert&&0===this.scrollDeltaHorz||this.scrollDeltaVert>this.settings.offsetDelta||this.scrollDeltaHorz>this.settings.offsetDelta)&&(this.q.enqueue(function(){this.check()}.bind(this)),this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.emit('scroll',{top:ie,left:oe}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit('scrolled',{top:this.scrollTop,left:this.scrollLeft})}.bind(this))),this.scrollDeltaVert+=Math.abs(ie-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(oe-this.prevScrollLeft),this.prevScrollTop=ie,this.prevScrollLeft=oe,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),this.scrolled=!1}},{key:'updateLayout',value:function(){this.stage&&('vertical'===this.settings.axis?this.layout.calculate(this._stageSize.width,this._stageSize.height):(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta,this.stage.addStyleRules('iframe',[{'margin-right':this.layout.gap+'px'}])),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}},{key:'next',value:function(){'horizontal'===this.settings.axis?(this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft+this.container.offsetWidth+this.layout.delta<this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){this.check()}.bind(this))}},{key:'prev',value:function(){'horizontal'===this.settings.axis?this.scrollBy(-this.layout.delta,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){this.check()}.bind(this))}},{key:'updateFlow',value:function(ie){var oe='paginated'===ie?'horizontal':'vertical';this.settings.axis=oe,this.viewSettings.axis=oe,this.settings.overflow='paginated'===ie?'hidden':'auto',this.settings.infinite='vertical'===this.settings.axis}}]),ne}(Q.default);U.default=ee,M.exports=U['default']},function(M,U,W){'use strict';function H($,J){if(!($ instanceof J))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function $(J,Z){for(var Q=0,ee;Q<Z.length;Q++)ee=Z[Q],ee.enumerable=ee.enumerable||!1,ee.configurable=!0,'value'in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}return function(J,Z,Q){return Z&&$(J.prototype,Z),Q&&$(J,Q),J}}(),G=W(8),X=function(){function $(J){H(this,$),this.settings=J||{},this.id='epubjs-container-'+(0,G.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}return Y($,[{key:'create',value:function(Z){var Q=Z.height,ee=Z.width,te=Z.overflow||!1,ne=Z.axis||'vertical';Z.height&&(0,G.isNumber)(Z.height)&&(Q=Z.height+'px'),Z.width&&(0,G.isNumber)(Z.width)&&(ee=Z.width+'px');var ae=document.createElement('div');return ae.id=this.id,ae.classList.add('epub-container'),ae.style.wordSpacing='0',ae.style.lineHeight='0',ae.style.verticalAlign='top','horizontal'===ne&&(ae.style.whiteSpace='nowrap'),ee&&(ae.style.width=ee),Q&&(ae.style.height=Q),te&&(ae.style.overflow=te),ae}},{key:'wrap',value:function(Z){var Q=document.createElement('div');return Q.style.visibility='hidden',Q.style.overflow='hidden',Q.style.width='0',Q.style.height='0',Q.appendChild(Z),Q}},{key:'getElement',value:function(Z){var Q;if((0,G.isElement)(Z)?Q=Z:'string'==typeof Z&&(Q=document.getElementById(Z)),!Q)throw new Error('Not an Element');return Q}},{key:'attachTo',value:function(Z){var Q=this.getElement(Z),ee;if(Q)return ee=this.settings.hidden?this.wrapper:this.container,Q.appendChild(ee),this.element=Q,Q}},{key:'getContainer',value:function(){return this.container}},{key:'onResize',value:function(Z){(0,G.isNumber)(this.settings.width)&&(0,G.isNumber)(this.settings.height)||window.addEventListener('resize',Z,!1)}},{key:'size',value:function(Z,Q){var ee;return null===Z&&(ee=this.element.getBoundingClientRect(),ee.width&&(Z=ee.width,this.container.style.width=ee.width+'px')),null===Q&&(ee=ee||this.element.getBoundingClientRect(),ee.height&&(Q=ee.height,this.container.style.height=ee.height+'px')),(0,G.isNumber)(Z)||(ee=this.container.getBoundingClientRect(),Z=ee.width),(0,G.isNumber)(Q)||(ee=ee||this.container.getBoundingClientRect(),Q=ee.height),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles['padding-left'])||0,right:parseFloat(this.containerStyles['padding-right'])||0,top:parseFloat(this.containerStyles['padding-top'])||0,bottom:parseFloat(this.containerStyles['padding-bottom'])||0},{width:Z-this.containerPadding.left-this.containerPadding.right,height:Q-this.containerPadding.top-this.containerPadding.bottom}}},{key:'bounds',value:function(){return this.container?this.container.getBoundingClientRect():(0,G.windowBounds)()}},{key:'getSheet',value:function(){var Z=document.createElement('style');return Z.appendChild(document.createTextNode('')),document.head.appendChild(Z),Z.sheet}},{key:'addStyleRules',value:function(Z,Q){var ee='#'+this.id+' ',te='';this.sheet||(this.sheet=this.getSheet()),Q.forEach(function(ne){for(var ae in ne)ne.hasOwnProperty(ae)&&(te+=ae+':'+ne[ae]+';')}),this.sheet.insertRule(ee+Z+' {'+te+'}',0)}},{key:'destroy',value:function(){var Z;this.element&&(Z=this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container))}}]),$}();U.default=X,M.exports=U['default']},function(M,U){'use strict';function H(X,$){if(!(X instanceof $))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function X($,J){for(var Z=0,Q;Z<J.length;Z++)Q=J[Z],Q.enumerable=Q.enumerable||!1,Q.configurable=!0,'value'in Q&&(Q.writable=!0),Object.defineProperty($,Q.key,Q)}return function($,J,Z){return J&&X($.prototype,J),Z&&X($,Z),$}}(),G=function(){function X($){H(this,X),this.container=$,this._views=[],this.length=0,this.hidden=!1}return Y(X,[{key:'all',value:function(){return this._views}},{key:'first',value:function(){return this._views[0]}},{key:'last',value:function(){return this._views[this._views.length-1]}},{key:'indexOf',value:function(J){return this._views.indexOf(J)}},{key:'slice',value:function(){return this._views.slice.apply(this._views,arguments)}},{key:'get',value:function(J){return this._views[J]}},{key:'append',value:function(J){return this._views.push(J),this.container&&this.container.appendChild(J.element),this.length++,J}},{key:'prepend',value:function(J){return this._views.unshift(J),this.container&&this.container.insertBefore(J.element,this.container.firstChild),this.length++,J}},{key:'insert',value:function(J,Z){return this._views.splice(Z,0,J),this.container&&(Z<this.container.children.length?this.container.insertBefore(J.element,this.container.children[Z]):this.container.appendChild(J.element)),this.length++,J}},{key:'remove',value:function(J){var Z=this._views.indexOf(J);-1<Z&&this._views.splice(Z,1),this.destroy(J),this.length--}},{key:'destroy',value:function(J){J.displayed&&J.destroy(),this.container&&this.container.removeChild(J.element),J=null}},{key:'each',value:function(){return this._views.forEach.apply(this._views,arguments)}},{key:'clear',value:function(){var Z=this.length,J;if(this.length){for(var Q=0;Q<Z;Q++)J=this._views[Q],this.destroy(J);this._views=[],this.length=0}}},{key:'find',value:function(J){for(var Q=this.length,ee=0,Z;ee<Q;ee++)if(Z=this._views[ee],Z.displayed&&Z.section.index==J.index)return Z}},{key:'displayed',value:function(){for(var $=[],Z=this.length,Q=0,J;Q<Z;Q++)J=this._views[Q],J.displayed&&$.push(J);return $}},{key:'show',value:function(){for(var Z=this.length,Q=0,J;Q<Z;Q++)J=this._views[Q],J.displayed&&J.show();this.hidden=!1}},{key:'hide',value:function(){for(var Z=this.length,Q=0,J;Q<Z;Q++)J=this._views[Q],J.displayed&&J.hide();this.hidden=!0}}]),X}();U.default=G,M.exports=U['default']},function(M,U,W){'use strict';function H(ae){return ae&&ae.__esModule?ae:{default:ae}}function Y(ae,ie){if(!(ae instanceof ie))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ae(ie,oe){for(var se=0,le;se<oe.length;se++)le=oe[se],le.enumerable=le.enumerable||!1,le.configurable=!0,'value'in le&&(le.writable=!0),Object.defineProperty(ie,le.key,le)}return function(ie,oe,se){return oe&&ae(ie.prototype,oe),se&&ae(ie,se),ie}}(),X=W(42),$=H(X),J=W(8),Z=W(25),Q=H(Z),ee=W(93),te=H(ee),ne=function(){function ae(ie,oe){Y(this,ae),this.settings=(0,J.extend)({ignoreClass:'',axis:'vertical',width:0,height:0,layout:void 0,globalLayoutProperties:{}},oe||{}),this.id='epubjs-view-'+(0,J.uuid)(),this.section=ie,this.index=ie.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.width=this.settings.width,this.height=this.settings.height,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new Q.default,this.layout=this.settings.layout}return G(ae,[{key:'container',value:function(oe){var se=document.createElement('div');return se.classList.add('epub-view'),se.style.height='0px',se.style.width='0px',se.style.overflow='hidden',se.style.display=oe&&'horizontal'==oe?'inline-block':'block',se}},{key:'create',value:function(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement('iframe'),this.iframe.id=this.id,this.iframe.scrolling='no',this.iframe.style.overflow='hidden',this.iframe.seamless='seamless',this.iframe.style.border='none',this.resizing=!0,this.element.style.visibility='hidden',this.iframe.style.visibility='hidden',this.iframe.style.width='0',this.iframe.style.height='0',this._width=0,this._height=0,this.element.appendChild(this.iframe),this.added=!0,this.elementBounds=(0,J.bounds)(this.element),this.supportsSrcdoc=!!('srcdoc'in this.iframe),this.iframe)}},{key:'render',value:function(oe,se){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(oe)),this.sectionRender.then(function(le){return this.load(le)}.bind(this)).then(function(){}.bind(this)).then(function(){this.settings.layout.format(this.contents),this.expand(),this.addListeners(),!1!==se,this.emit('rendered',this.section)}.bind(this)).catch(function(le){this.emit('loaderror',le)}.bind(this))}},{key:'size',value:function(oe,se){var le=oe||this.settings.width,de=se||this.settings.height;'pre-paginated'===this.layout.name?this.lock('both',le,de):'horizontal'===this.settings.axis?this.lock('height',le,de):this.lock('width',le,de)}},{key:'lock',value:function(oe,se,le){var de=(0,J.borders)(this.element),ue;ue=this.iframe?(0,J.borders)(this.iframe):{width:0,height:0},'width'==oe&&(0,J.isNumber)(se)&&(this.lockedWidth=se-de.width-ue.width,this.resize(this.lockedWidth,se)),'height'==oe&&(0,J.isNumber)(le)&&(this.lockedHeight=le-de.height-ue.height,this.resize(se,this.lockedHeight)),'both'===oe&&(0,J.isNumber)(se)&&(0,J.isNumber)(le)&&(this.lockedWidth=se-de.width-ue.width,this.lockedHeight=le-de.height-ue.height,this.resize(this.lockedWidth,this.lockedHeight)),this.displayed&&this.iframe&&this.expand()}},{key:'expand',value:function(){var se=this.lockedWidth,le=this.lockedHeight,de,ue,ce;!this.iframe||this._expanding||'pre-paginated'===this.layout.name||(this._expanding=!0,'horizontal'===this.settings.axis?(ue=this.contents.textWidth(),se=this.contentWidth(ue),se==this._width?se=this._contentWidth:(de=Math.ceil(se/(this.settings.layout.columnWidth+this.settings.layout.gap)),1<this.settings.layout.divisor&&'reflowable'===this.settings.layout.name&&0<de%2&&(se+=this.settings.layout.gap+this.settings.layout.columnWidth),this._textWidth=ue,this._contentWidth=se)):'vertical'===this.settings.axis&&(ce=this.contents.textHeight(),ce==this._textHeight?le=this._contentHeight:(le=this.contentHeight(ce),this._textHeight=ce,this._contentHeight=le)),(this._needsReframe||se!=this._width||le!=this._height)&&this.resize(se,le),this._expanding=!1)}},{key:'contentWidth',value:function(oe){var se,le;return se=this.iframe.style.width,this.iframe.style.width=(oe||0)+'px',le=this.contents.scrollWidth(),this.iframe.style.width=se,le}},{key:'contentHeight',value:function(oe){var se,le;return se=this.iframe.style.height,this.iframe.style.height=(oe||0)+'px',le=this.contents.scrollHeight(),this.iframe.style.height=se,le}},{key:'resize',value:function(oe,se){this.iframe&&((0,J.isNumber)(oe)&&(this.iframe.style.width=oe+'px',this._width=oe),(0,J.isNumber)(se)&&(this.iframe.style.height=se+'px',this._height=se),this.iframeBounds=(0,J.bounds)(this.iframe),this.reframe(this.iframeBounds.width,this.iframeBounds.height))}},{key:'reframe',value:function(oe,se){var le;(0,J.isNumber)(oe)&&(this.element.style.width=oe+'px'),(0,J.isNumber)(se)&&(this.element.style.height=se+'px'),this.prevBounds=this.elementBounds,this.elementBounds=(0,J.bounds)(this.element),le={width:this.elementBounds.width,height:this.elementBounds.height,widthDelta:this.elementBounds.width-this.prevBounds.width,heightDelta:this.elementBounds.height-this.prevBounds.height},this.onResize(this,le),this.contents&&this.settings.layout.format(this.contents),this.emit('resized',le)}},{key:'load',value:function(oe){var se=new J.defer,le=se.promise;if(!this.iframe)return se.reject(new Error('No Iframe Available')),le;if(this.iframe.onload=function(de){this.onLoad(de,se)}.bind(this),this.supportsSrcdoc)this.iframe.srcdoc=oe;else{if(this.document=this.iframe.contentDocument,!this.document)return se.reject(new Error('No Document Available')),le;this.iframe.contentDocument.open(),this.iframe.contentDocument.write(oe),this.iframe.contentDocument.close()}return le}},{key:'onLoad',value:function(oe,se){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new te.default(this.document,this.document.body,this.section.cfiBase),this.rendering=!1;var le=this.document.querySelector('link[rel=\'canonical\']');le?le.setAttribute('href',this.section.url):(le=this.document.createElement('link'),le.setAttribute('rel','canonical'),le.setAttribute('href',this.section.url),this.document.querySelector('head').appendChild(le)),this.contents.on('expand',function(){this.displayed&&this.iframe&&this.expand()}),se.resolve(this.contents)}},{key:'setLayout',value:function(oe){this.layout=oe}},{key:'setAxis',value:function(oe){this.settings.axis=oe}},{key:'resizeListenters',value:function(){clearTimeout(this.expanding),this.expanding=setTimeout(this.expand.bind(this),350)}},{key:'addListeners',value:function(){}},{key:'removeListeners',value:function(){}},{key:'display',value:function(oe){var se=new J.defer;return this.displayed?se.resolve(this):this.render(oe).then(function(){this.emit('displayed',this),this.onDisplayed(this),this.displayed=!0,se.resolve(this)}.bind(this)),se.promise}},{key:'show',value:function(){this.element.style.visibility='visible',this.iframe&&(this.iframe.style.visibility='visible'),this.emit('shown',this)}},{key:'hide',value:function(){this.element.style.visibility='hidden',this.iframe.style.visibility='hidden',this.stopExpanding=!0,this.emit('hidden',this)}},{key:'position',value:function(){return this.element.getBoundingClientRect()}},{key:'locationOf',value:function(oe){var se=this.iframe.getBoundingClientRect(),le=this.contents.locationOf(oe,this.settings.ignoreClass);return{left:window.scrollX+se.left+le.left,top:window.scrollY+se.top+le.top}}},{key:'onDisplayed',value:function(){}},{key:'onResize',value:function(){}},{key:'bounds',value:function(){return this.elementBounds||(this.elementBounds=(0,J.bounds)(this.element)),this.elementBounds}},{key:'destroy',value:function(){this.displayed&&(this.displayed=!1,this.removeListeners(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.displayed=!1,this.iframe=null,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}]),ae}();(0,$.default)(ne.prototype),U.default=ne,M.exports=U['default']},function(M,U,W){'use strict';function H($,J){if(!($ instanceof J))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function $(J,Z){for(var Q=0,ee;Q<Z.length;Q++)ee=Z[Q],ee.enumerable=ee.enumerable||!1,ee.configurable=!0,'value'in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}return function(J,Z,Q){return Z&&$(J.prototype,Z),Q&&$(J,Q),J}}(),G=W(8),X=function(){function $(J){H(this,$),this.toc=[],this.tocByHref={},this.tocById={},J&&this.parse(J)}return Y($,[{key:'parse',value:function(Z){var Q=Z.nodeType,ee,te;Q&&(ee=(0,G.qs)(Z,'html'),te=(0,G.qs)(Z,'ncx')),Q?ee?this.toc=this.parseNav(Z):te&&(this.toc=this.parseNcx(Z)):this.toc=this.load(Z),this.unpack(this.toc)}},{key:'unpack',value:function(Z){for(var ee=0,Q;ee<Z.length;ee++)Q=Z[ee],this.tocByHref[Q.href]=ee,this.tocById[Q.id]=ee}},{key:'get',value:function(Z){var Q;return Z?(0===Z.indexOf('#')?Q=this.tocById[Z.substring(1)]:Z in this.tocByHref&&(Q=this.tocByHref[Z]),this.toc[Q]):this.toc}},{key:'createTocItem',value:function(Z,Q){var ee=this,te=[],ne=Z.childNodes,ae=Array.prototype.slice.call(ne),ie=Q?Q:0;return ae.forEach(function(oe){if('li'===oe.nodeName){var se=(0,G.qs)(oe,'a'),le={id:-1,href:se.getAttribute('href'),label:se.textContent,parent:null},de=(0,G.qs)(oe,'ol');if(ie++,le.id=ie,Q&&(le.parent=Q),te.push(le),de){var ue=ee.createTocItem(de,ie);ue&&0<ue.length&&(ie+=ue.length,te=te.concat(ue))}}}),te}},{key:'parseNav',value:function(Z){var Q=(0,G.querySelectorByType)(Z,'nav','toc'),ee=(0,G.qs)(Q,'ol');return this.createTocItem(ee)}},{key:'navItem',value:function(Z){var Q=Z.getAttribute('id')||!1,ee=(0,G.qs)(Z,'a'),te=ee.getAttribute('href')||'',ne=ee.textContent||'',ie=Z.parentNode,oe;return ie&&'navPoint'===ie.nodeName&&(oe=ie.getAttribute('id')),{id:Q,href:te,label:ne,subitems:[],parent:oe}}},{key:'parseNcx',value:function(Z){var Q=(0,G.qsa)(Z,'navPoint'),ee=Q.length,ne={},ae=[],te,ie,oe;if(!Q||0===ee)return ae;for(te=0;te<ee;++te)ie=this.ncxItem(Q[te]),ne[ie.id]=ie,ie.parent?(oe=ne[ie.parent],oe.subitems.push(ie)):ae.push(ie);return ae}},{key:'ncxItem',value:function(Z){var Q=Z.getAttribute('id')||!1,ee=(0,G.qs)(Z,'content'),te=ee.getAttribute('src'),ne=(0,G.qs)(Z,'navLabel'),ae=ne.textContent?ne.textContent:'',oe=Z.parentNode,se;return oe&&'navPoint'===oe.nodeName&&(se=oe.getAttribute('id')),{id:Q,href:te,label:ae,subitems:[],parent:se}}},{key:'load',value:function(Z){var Q=this;return Z.map(function(ee){return ee.label=ee.title,ee.children&&(ee.subitems=Q.load(ee.children)),ee})}},{key:'forEach',value:function(Z){return this.toc.forEach(Z)}}]),$}();U.default=X,M.exports=U['default']},function(M,U,W){'use strict';function H($,J){if(!($ instanceof J))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function $(J,Z){for(var Q=0,ee;Q<Z.length;Q++)ee=Z[Q],ee.enumerable=ee.enumerable||!1,ee.configurable=!0,'value'in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}return function(J,Z,Q){return Z&&$(J.prototype,Z),Q&&$(J,Q),J}}(),G=W(8),X=function(){function $(J){H(this,$),this.manifest={},this.navPath='',this.ncxPath='',this.coverPath='',this.spineNodeIndex=0,this.spine=[],this.metadata={},J&&this.parse(J)}return Y($,[{key:'parse',value:function(Z){var Q,ee,te;if(!Z)throw new Error('Package File Not Found');if(Q=(0,G.qs)(Z,'metadata'),!Q)throw new Error('No Metadata Found');if(ee=(0,G.qs)(Z,'manifest'),!ee)throw new Error('No Manifest Found');if(te=(0,G.qs)(Z,'spine'),!te)throw new Error('No Spine Found');return this.manifest=this.parseManifest(ee),this.navPath=this.findNavPath(ee),this.ncxPath=this.findNcxPath(ee,te),this.coverPath=this.findCoverPath(Z),this.spineNodeIndex=(0,G.indexOfElementNode)(te),this.spine=this.parseSpine(te,this.manifest),this.metadata=this.parseMetadata(Q),this.metadata.direction=te.getAttribute('page-progression-direction'),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}},{key:'parseMetadata',value:function(Z){var Q={title:this.getElementText(Z,'title'),creator:this.getElementText(Z,'creator'),description:this.getElementText(Z,'description'),pubdate:this.getElementText(Z,'date'),publisher:this.getElementText(Z,'publisher'),identifier:this.getElementText(Z,'identifier'),language:this.getElementText(Z,'language'),rights:this.getElementText(Z,'rights'),modified_date:this.getPropertyText(Z,'dcterms:modified'),layout:this.getPropertyText(Z,'rendition:layout'),orientation:this.getPropertyText(Z,'rendition:orientation'),flow:this.getPropertyText(Z,'rendition:flow'),viewport:this.getPropertyText(Z,'rendition:viewport')};return Q}},{key:'parseManifest',value:function(Z){var Q={},ee=(0,G.qsa)(Z,'item'),te=Array.prototype.slice.call(ee);return te.forEach(function(ne){var ae=ne.getAttribute('id'),ie=ne.getAttribute('href')||'',oe=ne.getAttribute('media-type')||'',se=ne.getAttribute('properties')||'';Q[ae]={href:ie,type:oe,properties:se.length?se.split(' '):[]}}),Q}},{key:'parseSpine',value:function(Z){var ee=[],te=Z.getElementsByTagName('itemref'),ne=Array.prototype.slice.call(te);return ne.forEach(function(ae,ie){var oe=ae.getAttribute('idref'),se=ae.getAttribute('properties')||'',le=se.length?se.split(' '):[],de={idref:oe,linear:ae.getAttribute('linear')||'',properties:le,index:ie};ee.push(de)}),ee}},{key:'findNavPath',value:function(Z){var Q=(0,G.qsp)(Z,'item',{properties:'nav'});return!!Q&&Q.getAttribute('href')}},{key:'findNcxPath',value:function(Z,Q){var ee=(0,G.qsp)(Z,'item',{'media-type':'application/x-dtbncx+xml'}),te;return ee||(te=Q.getAttribute('toc'),te&&(ee=Z.getElementById(te))),!!ee&&ee.getAttribute('href')}},{key:'findCoverPath',value:function(Z){var Q=(0,G.qs)(Z,'package'),ee=Q.getAttribute('version');if('2.0'===ee){var te=(0,G.qsp)(Z,'meta',{name:'cover'});if(te){var ne=te.getAttribute('content'),ae=Z.getElementById(ne);return ae?ae.getAttribute('href'):''}return!1}var ie=(0,G.qsp)(Z,'item',{properties:'cover-image'});return ie?ie.getAttribute('href'):''}},{key:'getElementText',value:function(Z,Q){var ee=Z.getElementsByTagNameNS('http://purl.org/dc/elements/1.1/',Q),te;return ee&&0!==ee.length?(te=ee[0],te.childNodes.length?te.childNodes[0].nodeValue:''):''}},{key:'getPropertyText',value:function(Z,Q){var ee=(0,G.qsp)(Z,'meta',{property:Q});return ee&&ee.childNodes.length?ee.childNodes[0].nodeValue:''}},{key:'load',value:function(Z){var Q=this;return this.metadata=Z.metadata,this.spine=Z.spine.map(function(ee,te){return ee.index=te,ee}),Z.resources.forEach(function(ee,te){Q.manifest[te]=ee,ee.rel&&'cover'===ee.rel[0]&&(Q.coverPath=ee.href)}),this.spineNodeIndex=0,this.toc=Z.toc.map(function(ee){return ee.label=ee.title,ee}),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}},{key:'destroy',value:function(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}]),$}();U.default=X,M.exports=U['default']},function(M,U,W){'use strict';function Y(Q,ee){if(!(Q instanceof ee))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function Q(ee,te){for(var ne=0,ae;ne<te.length;ne++)ae=te[ne],ae.enumerable=ae.enumerable||!1,ae.configurable=!0,'value'in ae&&(ae.writable=!0),Object.defineProperty(ee,ae.key,ae)}return function(ee,te,ne){return te&&Q(ee.prototype,te),ne&&Q(ee,ne),ee}}(),X=W(25),$=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(X),J=W(8),Z=function(){function Q(ee){Y(this,Q),this.pages=[],this.locations=[],this.epubcfi=new $.default,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,this.lastPage,ee&&(this.pageList=this.parse(ee)),this.pageList&&this.pageList.length&&this.process(this.pageList)}return G(Q,[{key:'parse',value:function(te){var ne=(0,J.qs)(te,'html'),ae=(0,J.qs)(te,'ncx');if(ne)this.toc=this.parseNav(te);else if(ae)return}},{key:'parseNav',value:function(te){var ne=(0,J.querySelectorByType)(te,'nav','page-list'),ae=ne?(0,J.qsa)(ne,'li'):[],ie=ae.length,se=[],oe,le;if(!ae||0===ie)return se;for(oe=0;oe<ie;++oe)le=this.item(ae[oe]),se.push(le);return se}},{key:'item',value:function(te){var ne=(0,J.qs)(te,'a'),ae=ne.getAttribute('href')||'',ie=ne.textContent||'',oe=parseInt(ie),se=ae.indexOf('epubcfi'),le,de,ue;return-1==se?{href:ae,page:oe}:(le=ae.split('#'),de=le[0],ue=!!(1<le.length)&&le[1],{cfi:ue,href:ae,packageUrl:de,page:oe})}},{key:'process',value:function(te){te.forEach(function(ne){this.pages.push(ne.page),ne.cfi&&this.locations.push(ne.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}},{key:'addCFIs',value:function(){this.pageList.forEach(function(te){!te.cfi})}},{key:'pageFromCfi',value:function(te){var ne=-1;if(0===this.locations.length)return-1;var ae=(0,J.indexOfSorted)(te,this.locations,this.epubcfi.compare);return-1==ae?(ae=(0,J.locationOf)(te,this.locations,this.epubcfi.compare),ne=0<=ae-1?this.pages[ae-1]:this.pages[0],void 0!==ne||(ne=-1)):ne=this.pages[ae],ne}},{key:'cfiFromPage',value:function(te){var ne=-1;'number'!=typeof te&&(te=parseInt(te));var ae=this.pages.indexOf(te);return-1!=ae&&(ne=this.locations[ae]),ne}},{key:'pageFromPercentage',value:function(te){var ne=Math.round(this.totalPages*te);return ne}},{key:'percentageFromPage',value:function(te){var ne=(te-this.firstPage)/this.totalPages;return Math.round(1e3*ne)/1e3}},{key:'percentageFromCfi',value:function(te){var ne=this.pageFromCfi(te),ae=this.percentageFromPage(ne);return ae}},{key:'destroy',value:function(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}]),Q}();U.default=Z,M.exports=U['default']},function(M,U,W){'use strict';function H(se){return se&&se.__esModule?se:{default:se}}function Y(se,le){if(!(se instanceof le))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function se(le,de){for(var ue=0,ce;ue<de.length;ue++)ce=de[ue],ce.enumerable=ce.enumerable||!1,ce.configurable=!0,'value'in ce&&(ce.writable=!0),Object.defineProperty(le,ce.key,ce)}return function(le,de,ue){return de&&se(le.prototype,de),ue&&se(le,ue),le}}(),X=W(64),$=W(8),J=W(65),Z=H(J),Q=W(126),ee=H(Q),te=W(51),ne=H(te),ae=W(52),ie=H(ae),oe=function(){function se(le,de){Y(this,se),this.settings={replacements:de&&de.replacements||'base64',archive:de&&de.archive,resolver:de&&de.resolver,request:de&&de.request},this.manifest=le,this.resources=Object.keys(le).map(function(ue){return le[ue]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}return G(se,[{key:'split',value:function(){this.html=this.resources.filter(function(de){if('application/xhtml+xml'===de.type||'text/html'===de.type)return!0}),this.assets=this.resources.filter(function(de){if('application/xhtml+xml'!==de.type&&'text/html'!==de.type)return!0}),this.css=this.resources.filter(function(de){if('text/css'===de.type)return!0})}},{key:'splitUrls',value:function(){this.urls=this.assets.map(function(de){return de.href}.bind(this)),this.cssUrls=this.css.map(function(de){return de.href})}},{key:'createUrl',value:function(de){var ue=new Z.default(de),ce=ee.default.lookup(ue.filename);return this.settings.archive?this.settings.archive.createUrl(de,{base64:'base64'===this.settings.replacements}):'base64'===this.settings.replacements?this.settings.request(de,'blob').then(function(pe){return(0,$.blob2base64)(pe)}).then(function(pe){return(0,$.createBase64Url)(pe,ce)}):this.settings.request(de,'blob').then(function(pe){return(0,$.createBlobUrl)(pe,ce)})}},{key:'replacements',value:function(){var de=this;if('none'===this.settings.replacements)return new Promise(function(ue){ue(this.urls)}.bind(this));var le=this.urls.map(function(ue){var ce=de.settings.resolver(ue);return de.createUrl(ce).catch(function(pe){return console.error(pe),null})});return Promise.all(le).then(function(ue){return de.replacementUrls=ue.filter(function(ce){return'string'==typeof ce}),ue})}},{key:'replaceCss',value:function(de,ue){var ce=[];return de=de||this.settings.archive,ue=ue||this.settings.resolver,this.cssUrls.forEach(function(pe){var fe=this.createCssFile(pe,de,ue).then(function(he){var ge=this.urls.indexOf(pe);-1<ge&&(this.replacementUrls[ge]=he)}.bind(this));ce.push(fe)}.bind(this)),Promise.all(ce)}},{key:'createCssFile',value:function(de){var ue=this,ce;if(ie.default.isAbsolute(de))return new Promise(function(ge){ge()});var pe=this.settings.resolver(de),fe;fe=this.settings.archive?this.settings.archive.getText(pe):this.settings.request(pe,'text');var he=this.urls.map(function(ge){var ye=ue.settings.resolver(ge),me=new ne.default(pe).relative(ye);return me});return fe?fe.then(function(ge){return ge=(0,X.substitute)(ge,he,ue.replacementUrls),ce='base64'===ue.settings.replacements?(0,$.createBase64Url)(ge,'text/css'):(0,$.createBlobUrl)(ge,'text/css'),ce},function(){return new Promise(function(ye){ye()})}):new Promise(function(ge){ge()})}},{key:'relativeTo',value:function(de,ue){return ue=ue||this.settings.resolver,this.urls.map(function(ce){var pe=ue(ce),fe=new ne.default(de).relative(pe);return fe}.bind(this))}},{key:'get',value:function(de){var ue=this.urls.indexOf(de);return-1===ue?void 0:this.replacementUrls.length?new Promise(function(ce){ce(this.replacementUrls[ue])}.bind(this)):this.createUrl(de)}},{key:'substitute',value:function(de,ue){var ce;return ce=ue?this.relativeTo(ue):this.urls,(0,X.substitute)(de,ce,this.replacementUrls)}},{key:'destroy',value:function(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}]),se}();U.default=oe,M.exports=U['default']},function(M,U,W){'use strict';function H(ne){return ne&&ne.__esModule?ne:{default:ne}}function Y(ne,ae){if(!(ne instanceof ae))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ne(ae,ie){for(var oe=0,se;oe<ie.length;oe++)se=ie[oe],se.enumerable=se.enumerable||!1,se.configurable=!0,'value'in se&&(se.writable=!0),Object.defineProperty(ae,se.key,se)}return function(ae,ie,oe){return ie&&ne(ae.prototype,ie),oe&&ne(ae,oe),ae}}(),X=W(8),$=W(25),J=H($),Z=W(95),Q=H(Z),ee=W(64),te=function(){function ne(ae,ie){Y(this,ne),this.idref=ae.idref,this.linear=ae.linear,this.properties=ae.properties,this.index=ae.index,this.href=ae.href,this.url=ae.url,this.next=ae.next,this.prev=ae.prev,this.cfiBase=ae.cfiBase,ie?this.hooks=ie:(this.hooks={},this.hooks.serialize=new Q.default(this),this.hooks.content=new Q.default(this)),this.document=void 0,this.contents=void 0,this.output=void 0}return G(ne,[{key:'load',value:function(ie){var oe=ie||this.request||W(97),se=new X.defer,le=se.promise;return this.contents?se.resolve(this.contents):oe(this.url).then(function(de){return this.document=de,this.contents=de.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){se.resolve(this.contents)}.bind(this)).catch(function(de){se.reject(de)}),le}},{key:'base',value:function(){return(0,ee.replaceBase)(this.document,this)}},{key:'render',value:function(ie){var oe=new X.defer,se=oe.promise;return this.output,this.load(ie).then(function(le){var de,ue;return ue='undefined'==typeof XMLSerializer?W(129).XMLSerializer:XMLSerializer,de=new ue,this.output=de.serializeToString(le),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){oe.resolve(this.output)}.bind(this)).catch(function(le){oe.reject(le)}),se}},{key:'find',value:function(){}},{key:'reconcileLayoutSettings',value:function(ie){var oe={layout:ie.layout,spread:ie.spread,orientation:ie.orientation};return this.properties.forEach(function(se){var le=se.replace('rendition:',''),de=le.indexOf('-'),ue,ce;-1!=de&&(ue=le.slice(0,de),ce=le.slice(de+1),oe[ue]=ce)}),oe}},{key:'cfiFromRange',value:function(ie){return new J.default(ie,this.cfiBase).toString()}},{key:'cfiFromElement',value:function(ie){return new J.default(ie,this.cfiBase).toString()}},{key:'unload',value:function(){this.document=void 0,this.contents=void 0,this.output=void 0}},{key:'destroy',value:function(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}]),ne}();U.default=te,M.exports=U['default']},function(M,U,W){'use strict';function H(ae){return ae&&ae.__esModule?ae:{default:ae}}function Y(ae,ie){if(!(ae instanceof ie))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ae(ie,oe){for(var se=0,le;se<oe.length;se++)le=oe[se],le.enumerable=le.enumerable||!1,le.configurable=!0,'value'in le&&(le.writable=!0),Object.defineProperty(ie,le.key,le)}return function(ie,oe,se){return oe&&ae(ie.prototype,oe),se&&ae(ie,se),ie}}(),X=W(25),$=H(X),J=W(95),Z=H(J),Q=W(343),ee=H(Q),te=W(64),ne=function(){function ae(){Y(this,ae),this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Z.default,this.hooks.content=new Z.default,this.hooks.content.register(te.replaceBase),this.hooks.content.register(te.replaceCanonical),this.epubcfi=new $.default,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}return G(ae,[{key:'unpack',value:function(oe,se){var le=this;this.items=oe.spine,this.manifest=oe.manifest,this.spineNodeIndex=oe.spineNodeIndex,this.baseUrl=oe.baseUrl||oe.basePath||'',this.length=this.items.length,this.items.forEach(function(de,ue){var ce=le.manifest[de.idref],pe;de.cfiBase=le.epubcfi.generateChapterComponent(le.spineNodeIndex,de.index,de.idref),de.href&&(de.url=se(de.href,!0)),ce&&(de.href=ce.href,de.url=se(de.href,!0),ce.properties.length&&de.properties.push.apply(de.properties,ce.properties)),de.prev=function(){return this.get(ue-1)}.bind(le),de.next=function(){return this.get(ue+1)}.bind(le),pe=new ee.default(de,le.hooks),le.append(pe)}),this.loaded=!0}},{key:'get',value:function(oe){var se=0;if(this.epubcfi.isCfiString(oe)){var le=new $.default(oe);se=le.spinePos}else oe&&('number'==typeof oe||!1===isNaN(oe))?se=oe:oe&&0===oe.indexOf('#')?se=this.spineById[oe.substring(1)]:oe&&(oe=oe.split('#')[0],se=this.spineByHref[oe]);return this.spineItems[se]||null}},{key:'append',value:function(oe){var se=this.spineItems.length;return oe.index=se,this.spineItems.push(oe),this.spineByHref[oe.href]=se,this.spineById[oe.idref]=se,se}},{key:'prepend',value:function(oe){return this.spineByHref[oe.href]=0,this.spineById[oe.idref]=0,this.spineItems.forEach(function(se,le){se.index=le}),0}},{key:'remove',value:function(oe){var se=this.spineItems.indexOf(oe);if(-1<se)return delete this.spineByHref[oe.href],delete this.spineById[oe.idref],this.spineItems.splice(se,1)}},{key:'each',value:function(){return this.spineItems.forEach.apply(this.spineItems,arguments)}},{key:'destroy',value:function(){this.each(function(oe){return oe.destroy()}),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}]),ae}();U.default=ne,M.exports=U['default']},function(M,U,W){'use strict';function Y(Q,ee){if(!(Q instanceof ee))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&'function'==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?'symbol':typeof Q},X=function(){function Q(ee,te){for(var ne=0,ae;ne<te.length;ne++)ae=te[ne],ae.enumerable=ae.enumerable||!1,ae.configurable=!0,'value'in ae&&(ae.writable=!0),Object.defineProperty(ee,ae.key,ae)}return function(ee,te,ne){return te&&Q(ee.prototype,te),ne&&Q(ee,ne),ee}}(),$=W(65),J=function(Q){return Q&&Q.__esModule?Q:{default:Q}}($),Z=function(){function Q(ee){Y(this,Q),this.rendition=ee,this._themes={'default':{rules:{},url:'',serialized:''}},this._overrides={},this._current='default',this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}return X(Q,[{key:'register',value:function(){return 0===arguments.length?void 0:1===arguments.length&&'object'===G(arguments[0])?this.registerThemes(arguments[0]):1===arguments.length&&'string'==typeof arguments[0]?this.default(arguments[0]):2===arguments.length&&'string'==typeof arguments[1]?this.registerUrl(arguments[0],arguments[1]):2===arguments.length&&'object'===G(arguments[1])?this.registerRules(arguments[0],arguments[1]):void 0}},{key:'default',value:function(te){return te?'string'==typeof te?this.registerUrl('default',te):'object'===('undefined'==typeof te?'undefined':G(te))?this.registerRules('default',te):void 0:void 0}},{key:'registerThemes',value:function(te){for(var ne in te)te.hasOwnProperty(ne)&&('string'==typeof te[ne]?this.registerUrl(ne,te[ne]):this.registerRules(ne,te[ne]))}},{key:'registerUrl',value:function(te,ne){var ae=new J.default(ne);this._themes[te]={url:ae.toString()},this._injected[te]&&this.update(te)}},{key:'registerRules',value:function(te,ne){this._themes[te]={rules:ne},this._injected[te]&&this.update(te)}},{key:'apply',value:function(te){var ne=this._current,ae;this._current=te,this.update(te),ae=this.rendition.getContents(),ae.forEach(function(ie){ie.removeClass(ne),ie.addClass(te)})}},{key:'update',value:function(te){var ne=this,ae=this.rendition.getContents();ae.forEach(function(ie){ne.add(te,ie)})}},{key:'inject',value:function(te){var ne=[],ae=this._themes,ie;for(var oe in ae)ae.hasOwnProperty(oe)&&oe===this._current&&(ie=ae[oe],(ie.rules||ie.url&&-1===ne.indexOf(ie.url))&&this.add(oe,te),this._injected.push(oe));'default'!=this._current&&te.addClass(this._current)}},{key:'add',value:function(te,ne){var ae=this._themes[te];ae&&(ae.url?ne.addStylesheet(ae.url):ae.serialized||ae.rules&&(ne.addStylesheetRules(ae.rules),ae.injected=!0))}},{key:'override',value:function(te,ne){var ae=this,ie=this.rendition.getContents();this._overrides[te]=ne,ie.forEach(function(oe){oe.css(te,ae._overrides[te])})}},{key:'overrides',value:function(te){var ee=this._overrides;for(var ne in ee)ee.hasOwnProperty(ne)&&te.css(ne,ee[ne])}},{key:'fontSize',value:function(te){this.override('font-size',te)}},{key:'destroy',value:function(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}]),Q}();U.default=Z,M.exports=U['default']},function(M){if('undefined'==typeof I){var W=new Error('Cannot find module "JSZip"');throw W.code='MODULE_NOT_FOUND',W}M.exports=I},function(M,U,W){W(130),W(131),M.exports=W(132)}])});